(window.webpackJsonp=window.webpackJsonp||[]).push([["skymap"],{EnYI:function(t,n,e){"use strict";e.r(n);e("NNql"),e("nQYg");var r,a,i,o,u,s,l=e("bnYU"),c=e("dw4P"),h=(r=e.n(c).a,a=document.getElementById("geojson").dataset.const,i=l.a,o=20,u="stars."+a+".json",s={width:0,projection:"aitoff",transform:"equatorial",center:JSON.parse(document.getElementById("geojson").dataset.center),adaptable:!0,interactive:!0,form:!1,location:!1,controls:!1,container:"map",datapath:"/build/data/",stars:{colors:!0,names:!0,proper:!0,style:{fill:"#ffffff",opacity:1},namelimit:2,limit:8,size:5,data:u},dsos:{show:!0,data:"nodata.json",names:!0,limit:1e3,namelimit:1e3,symbols:{gg:{shape:"circle",fill:i.gc},g:{shape:"ellipse",fill:i.g},s:{shape:"ellipse",fill:i.s},s0:{shape:"ellipse",fill:i.s0},sd:{shape:"ellipse",fill:i.sd},e:{shape:"ellipse",fill:i.e},i:{shape:"ellipse",fill:i.i},oc:{shape:"circle",fill:i.oc,stroke:i.oc,width:1.5},gc:{shape:"circle",fill:i.gc,stroke:i.gc,width:2},en:{shape:"square",fill:i.en},rn:{shape:"square",fill:i.rn},pn:{shape:"diamond",fill:i.pn},snr:{shape:"diamond",fill:i.snr},sfr:{shape:"square",fill:i.sfr,stroke:i.sfr,width:2},bn:{shape:"square",fill:i.bn,stroke:i.bn,width:2},dn:{shape:"square",fill:i.dn,stroke:i.dn,width:2},pos:{shape:"marker",fill:"#cccccc",stroke:"#cccccc",width:1.5}}},constellations:{show:!0,names:!0,desig:!0,namestyle:{fill:"#cccc99",align:"center",baseline:"middle",font:["14px Helvetica, Arial, sans-serif","12px Helvetica, Arial, sans-serif","11px Helvetica, Arial, sans-serif"]},lines:!0,linestyle:{stroke:"#cccccc",width:1,opacity:.6},bounds:!0,boundstyle:{stroke:"#cccc00",width:.5,opacity:.8,dash:[2,4]}},mw:{show:!0,data:"mw.json",style:{fill:"#ffffff",opacity:.15}},planets:{show:!1,data:""},lines:{graticule:{show:!0,stroke:"#cccccc",width:.6,opacity:.8,lon:{pos:[""],fill:"#eee",font:"10px Helvetica, Arial, sans-serif"},lat:{pos:[""],fill:"#eee",font:"10px Helvetica, Arial, sans-serif"}},equatorial:{show:!1,stroke:"#aaaaaa",width:1.3,opacity:.7}},background:{fill:"#0B182B",opacity:1,stroke:"#2B2A34",width:1.5},horizon:{show:!1,stroke:"#000099",width:1,fill:"#000000",opacity:.5}},{map:function(t,n){if(void 0!==n&&""!==n){var e={stroke:"rgba(255, 0, 204, 1)",fill:"rgba(255, 0, 204, 0.15)"},a={fill:"rgba(255, 0, 204, 1)",font:"normal bold 15px Helvetica, Arial, sans-serif",align:"left",baseline:"bottom"};r.add({type:"raw",callback:function(t,e){if(t)return console.warn("WARNING CELESTAL : "+t.message);var a=r.getData(n,s.transform);r.container.selectAll(".dsos").data(a.features).enter().append("path").attr("class","dso"),r.redraw()},redraw:function(){r.container.selectAll(".dsos").each(function(t){if(r.clip(t.geometry.coordinates)){var n=r.mapProjection(t.geometry.coordinates),i=Math.pow(20-t.properties.mag,.7);r.setStyle(e),r.context.beginPath(),r.context.arc(n[0],n[1],i,0,2*Math.PI),r.context.closePath(),r.context.stroke(),r.context.fill();var u=quadtree.find(n);(!u||(s=u,c=(l=n)[0]-s[0],h=l[1]-s[1],Math.sqrt(c*c+h*h)>o))&&(quadtree.add(n),r.setTextStyle(a),r.context.fillText(t.properties.name,n[0]+i+2,n[1]+i+2))}var s,l,c,h})}}),r.display(s),r.zoomBy(t)}else r.display(s)}}),f=JSON.parse(document.getElementById("geojson").dataset.dso),p=document.getElementById("geojson").dataset.zoom;h.map(p,f)},NNql:function(t,n,e){var r,a;!function(){function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function u(t,n){return n>t?-1:t>n?1:t>=n?0:NaN}function s(t){return null===t?NaN:+t}function l(t){return!isNaN(t)}function c(t){return{left:function(n,e,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=n.length);a>r;){var i=r+a>>>1;t(n[i],e)<0?r=i+1:a=i}return r},right:function(n,e,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=n.length);a>r;){var i=r+a>>>1;t(n[i],e)>0?a=i:r=i+1}return r}}}function h(t){return t.length}function f(t){for(var n=1;t*n%1;)n*=10;return n}function p(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function d(){this._=Object.create(null)}function g(t){return(t+="")===Si||t[0]===_i?_i+t:t}function v(t){return(t+="")[0]===_i?t.slice(1):t}function M(t){return g(t)in this._}function m(t){return(t=g(t))in this._&&delete this._[t]}function y(){var t=[];for(var n in this._)t.push(v(n));return t}function b(){var t=0;for(var n in this._)++t;return t}function x(){for(var t in this._)return!1;return!0}function w(){this._=Object.create(null)}function k(t){return t}function S(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function _(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=qi.length;r>e;++e){var a=qi[e]+n;if(a in t)return a}}function q(){}function z(){}function E(t){function n(){for(var n,r=e,a=-1,i=r.length;++a<i;)(n=r[a].on)&&n.apply(this,arguments);return t}var e=[],r=new d;return n.on=function(n,a){var i,o=r.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(n)),a&&e.push(r.set(n,{on:a})),t)},n}function A(){pi.event.preventDefault()}function N(){for(var t,n=pi.event;t=n.sourceEvent;)n=t;return n}function T(t){for(var n=new z,e=0,r=arguments.length;++e<r;)n[arguments[e]]=E(n);return n.of=function(e,r){return function(a){try{var i=a.sourceEvent=pi.event;a.target=t,pi.event=a,n[a.type].apply(e,r)}finally{pi.event=i}}},n}function P(t){return Ei(t,Pi),t}function C(t){return"function"==typeof t?t:function(){return Ai(t,this)}}function j(t){return"function"==typeof t?t:function(){return Ni(t,this)}}function I(t,n){return t=pi.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function L(t){return t.trim().replace(/\s+/g," ")}function D(t){return new RegExp("(?:^|\\s+)"+pi.requote(t)+"(?:\\s+|$)","g")}function R(t){return(t+"").trim().split(/^|\s+/)}function F(t,n){var e=(t=R(t).map(O)).length;return"function"==typeof n?function(){for(var r=-1,a=n.apply(this,arguments);++r<e;)t[r](this,a)}:function(){for(var r=-1;++r<e;)t[r](this,n)}}function O(t){var n=D(t);return function(e,r){if(a=e.classList)return r?a.add(t):a.remove(t);var a=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(a)||e.setAttribute("class",L(a+" "+t))):e.setAttribute("class",L(a.replace(n," ")))}}function U(t,n,e){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}:function(){this.style.setProperty(t,n,e)}}function H(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function Q(t){return"function"==typeof t?t:(t=pi.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Ci&&n.documentElement.namespaceURI===Ci?n.createElement(t):n.createElementNS(e,t)}}function Y(){var t=this.parentNode;t&&t.removeChild(this)}function B(t){return{__data__:t}}function V(t){return function(){return Ti(this,t)}}function W(t){return arguments.length||(t=u),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function G(t,n){for(var e=0,r=t.length;r>e;e++)for(var a,i=t[e],o=0,u=i.length;u>o;o++)(a=i[o])&&n(a,o,e);return t}function Z(t){return Ei(t,Ii),t}function $(t){var n,e;return function(r,a,i){var o,u=t[i].update,s=u.length;for(i!=e&&(e=i,n=0),a>=n&&(n=a+1);!(o=u[n])&&++n<s;);return o}}function X(t,n,e){function r(){var n=this[a];n&&(this.removeEventListener(t,n,n.$),delete this[a])}var a="__on"+t,i=t.indexOf("."),o=J;i>0&&(t=t.slice(0,i));var u=Li.get(t);return u&&(t=u,o=K),i?n?function(){var i=o(n,gi(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=e),i._=n}:r:n?q:function(){var n,e=new RegExp("^__on([^.]+)"+pi.requote(t)+"$");for(var r in this)if(n=r.match(e)){var a=this[r];this.removeEventListener(n[1],a,a.$),delete this[r]}}}function J(t,n){return function(e){var r=pi.event;pi.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{pi.event=r}}}function K(t,n){var e=J(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function tt(t){var n=".dragsuppress-"+ ++Ri,e="click"+n,r=pi.select(o(t)).on("touchmove"+n,A).on("dragstart"+n,A).on("selectstart"+n,A);if(null==Di&&(Di=!("onselectstart"in t)&&_(t.style,"userSelect")),Di){var a=i(t).style,u=a[Di];a[Di]="none"}return function(t){if(r.on(n,null),Di&&(a[Di]=u),t){var i=function(){r.on(e,null)};r.on(e,function(){A(),i()},!0),setTimeout(i,0)}}}function nt(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>Fi){var a=o(t);if(a.scrollX||a.scrollY){var i=(e=pi.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Fi=!(i.f||i.e),e.remove()}}return Fi?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function et(){return pi.event.changedTouches[0].identifier}function rt(t){return t>0?1:0>t?-1:0}function at(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function it(t){return t>1?0:-1>t?Hi:Math.acos(t)}function ot(t){return t>1?Bi:-1>t?-Bi:Math.asin(t)}function ut(t){return((t=Math.exp(t))+1/t)/2}function st(t){return(t=Math.sin(t/2))*t}function lt(){}function ct(t,n,e){return this instanceof ct?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof ct?new ct(t.h,t.s,t.l):St(""+t,_t,ct):new ct(t,n,e)}function ht(t,n,e){function r(t){return Math.round(255*function(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(i-a)*t/60:180>t?i:240>t?a+(i-a)*(240-t)/60:a}(t))}var a,i;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:0>n?0:n>1?1:n,a=2*(e=0>e?0:e>1?1:e)-(i=.5>=e?e*(1+n):e+n-e*n),new bt(r(t+120),r(t),r(t-120))}function ft(t,n,e){return this instanceof ft?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof ft?new ft(t.h,t.c,t.l):vt(t instanceof dt?t.l:(t=qt((t=pi.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ft(t,n,e)}function pt(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new dt(e,Math.cos(t*=Vi)*n,Math.sin(t)*n)}function dt(t,n,e){return this instanceof dt?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof dt?new dt(t.l,t.a,t.b):t instanceof ft?pt(t.h,t.c,t.l):qt((t=bt(t)).r,t.g,t.b):new dt(t,n,e)}function gt(t,n,e){var r=(t+16)/116,a=r+n/500,i=r-e/200;return new bt(yt(3.2404542*(a=Mt(a)*no)-1.5371385*(r=Mt(r)*eo)-.4985314*(i=Mt(i)*ro)),yt(-.969266*a+1.8760108*r+.041556*i),yt(.0556434*a-.2040259*r+1.0572252*i))}function vt(t,n,e){return t>0?new ft(Math.atan2(e,n)*Wi,Math.sqrt(n*n+e*e),t):new ft(NaN,NaN,t)}function Mt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function mt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function yt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function bt(t,n,e){return this instanceof bt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof bt?new bt(t.r,t.g,t.b):St(""+t,bt,ht):new bt(t,n,e)}function xt(t){return new bt(t>>16,t>>8&255,255&t)}function wt(t){return xt(t)+""}function kt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function St(t,n,e){var r,a,i,o=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(a=r[2].split(","),r[1]){case"hsl":return e(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return n(Et(a[0]),Et(a[1]),Et(a[2]))}return(i=oo.get(t))?n(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&i)>>4,o|=o>>4,u=240&i,u|=u>>4,s=15&i,s|=s<<4):7===t.length&&(o=(16711680&i)>>16,u=(65280&i)>>8,s=255&i)),n(o,u,s))}function _t(t,n,e){var r,a,i=Math.min(t/=255,n/=255,e/=255),o=Math.max(t,n,e),u=o-i,s=(o+i)/2;return u?(a=.5>s?u/(o+i):u/(2-o-i),r=t==o?(n-e)/u+(e>n?6:0):n==o?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,a=s>0&&1>s?0:r),new ct(r,a,s)}function qt(t,n,e){var r=mt((.4124564*(t=zt(t))+.3575761*(n=zt(n))+.1804375*(e=zt(e)))/no),a=mt((.2126729*t+.7151522*n+.072175*e)/eo);return dt(116*a-16,500*(r-a),200*(a-mt((.0193339*t+.119192*n+.9503041*e)/ro)))}function zt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Et(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function At(t){return"function"==typeof t?t:function(){return t}}function Nt(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Tt(n,e,t,r)}}function Tt(t,n,e,r){function a(){var t,n=s.status;if(!n&&function(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}(s)||n>=200&&300>n||304===n){try{t=e.call(i,s)}catch(t){return void o.error.call(i,t)}o.load.call(i,t)}else o.error.call(i,s)}var i={},o=pi.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=a:s.onreadystatechange=function(){s.readyState>3&&a()},s.onprogress=function(t){var n=pi.event;pi.event=t;try{o.progress.call(i,s)}finally{pi.event=n}},i.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",i)},i.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",i):n},i.responseType=function(t){return arguments.length?(l=t,i):l},i.response=function(t){return e=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(gi(arguments)))}}),i.send=function(e,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),s.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),s.setRequestHeader)for(var c in u)s.setRequestHeader(c,u[c]);return null!=n&&s.overrideMimeType&&s.overrideMimeType(n),null!=l&&(s.responseType=l),null!=a&&i.on("error",a).on("load",function(t){a(null,t)}),o.beforesend.call(i,s),s.send(null==r?null:r),i},i.abort=function(){return s.abort(),i},pi.rebind(i,o,"on"),null==r?i:i.get(function(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}(r))}function Pt(t,n,e){var r=arguments.length;2>r&&(n=0),3>r&&(e=Date.now());var a={c:t,t:e+n,n:null};return so?so.n=a:uo=a,so=a,lo||(co=clearTimeout(co),lo=1,ho(Ct)),a}function Ct(){var t=jt(),n=It()-t;n>24?(isFinite(n)&&(clearTimeout(co),co=setTimeout(Ct,n)),lo=0):(lo=1,ho(Ct))}function jt(){for(var t=Date.now(),n=uo;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function It(){for(var t,n=uo,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:uo=n.n;return so=t,e}function Lt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Dt(t){var n=t.decimal,e=t.thousands,r=t.grouping,a=t.currency,i=r&&e?function(t,n){for(var a=t.length,i=[],o=0,u=r[0],s=0;a>0&&u>0&&(s+u+1>n&&(u=Math.max(1,n-s)),i.push(t.substring(a-=u,a+u)),!((s+=u+1)>n));)u=r[o=(o+1)%r.length];return i.reverse().join(e)}:k;return function(t){var e=po.exec(t),r=e[1]||" ",o=e[2]||">",u=e[3]||"-",s=e[4]||"",l=e[5],c=+e[6],h=e[7],f=e[8],p=e[9],d=1,g="",v="",M=!1,m=!0;switch(f&&(f=+f.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),p){case"n":h=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===s&&(g="0"+p.toLowerCase());case"c":m=!1;case"d":M=!0,f=0;break;case"s":d=-1,p="r"}"$"===s&&(g=a[0],v=a[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=go.get(p)||Rt;var y=l&&h;return function(t){var e=v;if(M&&t%1)return"";var a=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>d){var s=pi.formatPrefix(t,f);t=s.scale(t),e=s.symbol+v}else t*=d;var b,x,w=(t=p(t,f)).lastIndexOf(".");if(0>w){var k=m?t.lastIndexOf("e"):-1;0>k?(b=t,x=""):(b=t.substring(0,k),x=t.substring(k))}else b=t.substring(0,w),x=n+t.substring(w+1);!l&&h&&(b=i(b,1/0));var S=g.length+b.length+x.length+(y?0:a.length),_=c>S?new Array(S=c-S+1).join(r):"";return y&&(b=i(_+b,_.length?c-x.length:1/0)),a+=g,t=b+x,("<"===o?a+t+_:">"===o?_+a+t:"^"===o?_.substring(0,S>>=1)+a+t+_.substring(S):a+(y?t:_+t))+e}}}function Rt(t){return t+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ot(t,n,e){function r(n){var e=t(n),r=i(e,1);return r-n>n-e?e:r}function a(e){return n(e=t(new Mo(e-1)),1),e}function i(t,e){return n(t=new Mo(+t),e),t}function o(t,r,i){var o=a(t),u=[];if(i>1)for(;r>o;)e(o)%i||u.push(new Date(+o)),n(o,1);else for(;r>o;)u.push(new Date(+o)),n(o,1);return u}t.floor=t,t.round=r,t.ceil=a,t.offset=i,t.range=o;var u=t.utc=Ut(t);return u.floor=u,u.round=Ut(r),u.ceil=Ut(a),u.offset=Ut(i),u.range=function(t,n,e){try{Mo=Ft;var r=new Ft;return r._=t,o(r,n,e)}finally{Mo=Date}},t}function Ut(t){return function(n,e){try{Mo=Ft;var r=new Ft;return r._=n,t(r,e)._}finally{Mo=Date}}}function Ht(t){function n(t){function n(n){for(var e,a,i,o=[],u=-1,s=0;++u<r;)37===t.charCodeAt(u)&&(o.push(t.slice(s,u)),null!=(a=yo[e=t.charAt(++u)])&&(e=t.charAt(++u)),(i=b[e])&&(e=i(n,null==a?"e"===e?" ":"0":a)),o.push(e),s=u+1);return o.push(t.slice(s,u)),o.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(r,t,n,0)!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&Mo!==Ft,i=new(a?Ft:Mo);return"j"in r?i.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),i.setFullYear(r.y,0,1),i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(i.getDay()+5)%7:r.w+7*r.U-(i.getDay()+6)%7)):i.setFullYear(r.y,r.m,r.d),i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?i._:i},n.toString=function(){return t},n}function e(t,n,e,r){for(var a,i,o,u=0,s=n.length,l=e.length;s>u;){if(r>=l)return-1;if(37===(a=n.charCodeAt(u++))){if(o=n.charAt(u++),!(i=x[o in yo?n.charAt(u++):o])||(r=i(t,e,r))<0)return-1}else if(a!=e.charCodeAt(r++))return-1}return r}var r=t.dateTime,a=t.date,i=t.time,o=t.periods,u=t.days,s=t.shortDays,l=t.months,c=t.shortMonths;n.utc=function(t){function e(t){try{var n=new(Mo=Ft);return n._=t,r(n)}finally{Mo=Date}}var r=n(t);return e.parse=function(t){try{Mo=Ft;var n=r.parse(t);return n&&n._}finally{Mo=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=sn;var h=pi.map(),f=Yt(u),p=Bt(u),d=Yt(s),g=Bt(s),v=Yt(l),M=Bt(l),m=Yt(c),y=Bt(c);o.forEach(function(t,n){h.set(t.toLowerCase(),n)});var b={a:function(t){return s[t.getDay()]},A:function(t){return u[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:n(r),d:function(t,n){return Qt(t.getDate(),n,2)},e:function(t,n){return Qt(t.getDate(),n,2)},H:function(t,n){return Qt(t.getHours(),n,2)},I:function(t,n){return Qt(t.getHours()%12||12,n,2)},j:function(t,n){return Qt(1+vo.dayOfYear(t),n,3)},L:function(t,n){return Qt(t.getMilliseconds(),n,3)},m:function(t,n){return Qt(t.getMonth()+1,n,2)},M:function(t,n){return Qt(t.getMinutes(),n,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,n){return Qt(t.getSeconds(),n,2)},U:function(t,n){return Qt(vo.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Qt(vo.mondayOfYear(t),n,2)},x:n(a),X:n(i),y:function(t,n){return Qt(t.getFullYear()%100,n,2)},Y:function(t,n){return Qt(t.getFullYear()%1e4,n,4)},Z:on,"%":function(){return"%"}},x={a:function(t,n,e){d.lastIndex=0;var r=d.exec(n.slice(e));return r?(t.w=g.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){f.lastIndex=0;var r=f.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){m.lastIndex=0;var r=m.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){v.lastIndex=0;var r=v.exec(n.slice(e));return r?(t.m=M.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,n,r){return e(t,b.c.toString(),n,r)},d:Kt,e:Kt,H:nn,I:nn,j:tn,L:an,m:Jt,M:en,p:function(t,n,e){var r=h.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)},S:rn,U:Wt,w:Vt,W:Gt,x:function(t,n,r){return e(t,b.x.toString(),n,r)},X:function(t,n,r){return e(t,b.X.toString(),n,r)},y:$t,Y:Zt,Z:Xt,"%":un};return n}function Qt(t,n,e){var r=0>t?"-":"",a=(r?-t:t)+"",i=a.length;return r+(e>i?new Array(e-i+1).join(n)+a:a)}function Yt(t){return new RegExp("^(?:"+t.map(pi.requote).join("|")+")","i")}function Bt(t){for(var n=new d,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Vt(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Wt(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Gt(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Zt(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function $t(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+2));return r?(t.y=function(t){return t+(t>68?1900:2e3)}(+r[0]),e+r[0].length):-1}function Xt(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Jt(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Kt(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function tn(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function nn(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function en(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function rn(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function an(t,n,e){bo.lastIndex=0;var r=bo.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function on(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=ki(n)/60|0,a=ki(n)%60;return e+Qt(r,"0",2)+Qt(a,"0",2)}function un(t,n,e){xo.lastIndex=0;var r=xo.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function sn(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function ln(){}function cn(t,n,e){var r=e.s=t+n,a=r-t,i=r-a;e.t=t-i+(n-a)}function hn(t,n){t&&_o.hasOwnProperty(t.type)&&_o[t.type](t,n)}function fn(t,n,e){var r,a=-1,i=t.length-e;for(n.lineStart();++a<i;)r=t[a],n.point(r[0],r[1],r[2]);n.lineEnd()}function pn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)fn(t[e],n,1);n.polygonEnd()}function dn(){function t(t,n){n=n*Vi/2+Hi/4;var e=(t*=Vi)-r,o=e>=0?1:-1,u=o*e,s=Math.cos(n),l=Math.sin(n),c=i*l,h=a*s+c*Math.cos(u),f=c*o*Math.sin(u);zo.add(Math.atan2(f,h)),r=t,a=s,i=l}var n,e,r,a,i;Eo.point=function(o,u){Eo.point=t,r=(n=o)*Vi,a=Math.cos(u=(e=u)*Vi/2+Hi/4),i=Math.sin(u)},Eo.lineEnd=function(){t(n,e)}}function gn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function vn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Mn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function mn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function yn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function bn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function xn(t){return[Math.atan2(t[1],t[0]),ot(t[2])]}function wn(t,n){return ki(t[0]-n[0])<Oi&&ki(t[1]-n[1])<Oi}function kn(t,n){t*=Vi;var e=Math.cos(n*=Vi);Sn(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function Sn(t,n,e){To+=(t-To)/++Ao,Po+=(n-Po)/Ao,Co+=(e-Co)/Ao}function _n(){function t(t,a){t*=Vi;var i=Math.cos(a*=Vi),o=i*Math.cos(t),u=i*Math.sin(t),s=Math.sin(a),l=Math.atan2(Math.sqrt((l=e*s-r*u)*l+(l=r*o-n*s)*l+(l=n*u-e*o)*l),n*o+e*u+r*s);No+=l,jo+=l*(n+(n=o)),Io+=l*(e+(e=u)),Lo+=l*(r+(r=s)),Sn(n,e,r)}var n,e,r;Oo.point=function(a,i){a*=Vi;var o=Math.cos(i*=Vi);n=o*Math.cos(a),e=o*Math.sin(a),r=Math.sin(i),Oo.point=t,Sn(n,e,r)}}function qn(){Oo.point=kn}function zn(){function t(t,n){t*=Vi;var e=Math.cos(n*=Vi),o=e*Math.cos(t),u=e*Math.sin(t),s=Math.sin(n),l=a*s-i*u,c=i*o-r*s,h=r*u-a*o,f=Math.sqrt(l*l+c*c+h*h),p=r*o+a*u+i*s,d=f&&-it(p)/f,g=Math.atan2(f,p);Do+=d*l,Ro+=d*c,Fo+=d*h,No+=g,jo+=g*(r+(r=o)),Io+=g*(a+(a=u)),Lo+=g*(i+(i=s)),Sn(r,a,i)}var n,e,r,a,i;Oo.point=function(o,u){n=o,e=u,Oo.point=t,o*=Vi;var s=Math.cos(u*=Vi);r=s*Math.cos(o),a=s*Math.sin(o),i=Math.sin(u),Sn(r,a,i)},Oo.lineEnd=function(){t(n,e),Oo.lineEnd=qn,Oo.point=kn}}function En(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function An(){return!0}function Nn(t,n,e,r,a){var i=[],o=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(wn(e,r)){a.lineStart();for(var u=0;n>u;++u)a.point((e=t[u])[0],e[1]);return void a.lineEnd()}var s=new Pn(e,t,null,!0),l=new Pn(e,null,s,!1);s.o=l,i.push(s),o.push(l),s=new Pn(r,t,null,!1),l=new Pn(r,null,s,!0),s.o=l,i.push(s),o.push(l)}}),o.sort(n),Tn(i),Tn(o),i.length){for(var u=0,s=e,l=o.length;l>u;++u)o[u].e=s=!s;for(var c,h,f=i[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;c=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(u=0,l=c.length;l>u;++u)a.point((h=c[u])[0],h[1]);else r(p.x,p.n.x,1,a);p=p.n}else{if(d)for(u=(c=p.p.z).length-1;u>=0;--u)a.point((h=c[u])[0],h[1]);else r(p.x,p.p.x,-1,a);p=p.p}c=(p=p.o).z,d=!d}while(!p.v);a.lineEnd()}}}function Tn(t){if(n=t.length){for(var n,e,r=0,a=t[0];++r<n;)a.n=e=t[r],e.p=a,a=e;a.n=e=t[0],e.p=a}}function Pn(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Cn(t,n,e,r){return function(a,i){function o(n,e){var r=a(n,e);t(n=r[0],e=r[1])&&i.point(n,e)}function u(t,n){var e=a(t,n);v.point(e[0],e[1])}function s(){m.point=u,v.lineStart()}function l(){m.point=o,v.lineEnd()}function c(t,n){g.push([t,n]);var e=a(t,n);b.point(e[0],e[1])}function h(){b.lineStart(),g=[]}function f(){c(g[0][0],g[0][1]),b.lineEnd();var t,n=b.clean(),e=y.buffer(),r=e.length;if(g.pop(),d.push(g),g=null,r)if(1&n){var a,o=-1;if((r=(t=e[0]).length-1)>0){for(x||(i.polygonStart(),x=!0),i.lineStart();++o<r;)i.point((a=t[o])[0],a[1]);i.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),p.push(e.filter(jn))}var p,d,g,v=n(i),M=a.invert(r[0],r[1]),m={point:o,lineStart:s,lineEnd:l,polygonStart:function(){m.point=c,m.lineStart=h,m.lineEnd=f,p=[],d=[]},polygonEnd:function(){m.point=o,m.lineStart=s,m.lineEnd=l,p=pi.merge(p);var t=function(t,n){var e=t[0],r=t[1],a=[Math.sin(e),-Math.cos(e),0],i=0,o=0;zo.reset();for(var u=0,s=n.length;s>u;++u){var l=n[u],c=l.length;if(c)for(var h=l[0],f=h[0],p=h[1]/2+Hi/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===c&&(v=0);var M=(t=l[v])[0],m=t[1]/2+Hi/4,y=Math.sin(m),b=Math.cos(m),x=M-f,w=x>=0?1:-1,k=w*x,S=k>Hi,_=d*y;if(zo.add(Math.atan2(_*w*Math.sin(k),g*b+_*Math.cos(k))),i+=S?x+w*Qi:x,S^f>=e^M>=e){var q=Mn(gn(h),gn(t));bn(q);var z=Mn(a,q);bn(z);var E=(S^x>=0?-1:1)*ot(z[2]);(r>E||r===E&&(q[0]||q[1]))&&(o+=S^x>=0?1:-1)}if(!v++)break;f=M,d=y,g=b,h=t}}return(-Oi>i||Oi>i&&-Oi>zo)^1&o}(M,d);p.length?(x||(i.polygonStart(),x=!0),Nn(p,Ln,t,e,i)):t&&(x||(i.polygonStart(),x=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),x&&(i.polygonEnd(),x=!1),p=d=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},y=In(),b=n(y),x=!1;return m}}function jn(t){return t.length>1}function In(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:q,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Ln(t,n){return((t=t.x)[0]<0?t[1]-Bi-Oi:Bi-t[1])-((n=n.x)[0]<0?n[1]-Bi-Oi:Bi-n[1])}function Dn(t){function n(t,n){return Math.cos(t)*Math.cos(n)>a}function e(t,n,e){var r=[1,0,0],i=Mn(gn(t),gn(n)),o=vn(i,i),u=i[0],s=o-u*u;if(!s)return!e&&t;var l=a*o/s,c=-a*u/s,h=Mn(r,i),f=yn(r,l);mn(f,yn(i,c));var p=h,d=vn(f,p),g=vn(p,p),v=d*d-g*(vn(f,f)-1);if(!(0>v)){var M=Math.sqrt(v),m=yn(p,(-d-M)/g);if(mn(m,f),m=xn(m),!e)return m;var y,b=t[0],x=n[0],w=t[1],k=n[1];b>x&&(y=b,b=x,x=y);var S=x-b,_=ki(S-Hi)<Oi;if(!_&&w>k&&(y=w,w=k,k=y),_||Oi>S?_?w+k>0^m[1]<(ki(m[0]-b)<Oi?w:k):w<=m[1]&&m[1]<=k:S>Hi^(b<=m[0]&&m[0]<=x)){var q=yn(p,(-d+M)/g);return mn(q,f),[m,xn(q)]}}}function r(n,e){var r=i?t:Hi-t,a=0;return-r>n?a|=1:n>r&&(a|=2),-r>e?a|=4:e>r&&(a|=8),a}var a=Math.cos(t),i=a>0,o=ki(a)>Oi;return Cn(n,function(t){var a,u,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(h,f){var p,d=[h,f],g=n(h,f),v=i?g?0:r(h,f):g?r(h+(0>h?Hi:-Hi),f):0;if(!a&&(l=s=g)&&t.lineStart(),g!==s&&(p=e(a,d),(wn(a,p)||wn(d,p))&&(d[0]+=Oi,d[1]+=Oi,g=n(d[0],d[1]))),g!==s)c=0,g?(t.lineStart(),p=e(d,a),t.point(p[0],p[1])):(p=e(a,d),t.point(p[0],p[1]),t.lineEnd()),a=p;else if(o&&a&&i^g){var M;v&u||!(M=e(d,a,!0))||(c=0,i?(t.lineStart(),t.point(M[0][0],M[0][1]),t.point(M[1][0],M[1][1]),t.lineEnd()):(t.point(M[1][0],M[1][1]),t.lineEnd(),t.lineStart(),t.point(M[0][0],M[0][1])))}!g||a&&wn(a,d)||t.point(d[0],d[1]),a=d,s=g,u=v},lineEnd:function(){s&&t.lineEnd(),a=null},clean:function(){return c|(l&&s)<<1}}},le(t,6*Vi),i?[0,-t]:[-Hi,t-Hi])}function Rn(t,n,e,r){return function(a){var i,o=a.a,u=a.b,s=o.x,l=o.y,c=0,h=1,f=u.x-s,p=u.y-l;if(i=t-s,f||!(i>0)){if(i/=f,0>f){if(c>i)return;h>i&&(h=i)}else if(f>0){if(i>h)return;i>c&&(c=i)}if(i=e-s,f||!(0>i)){if(i/=f,0>f){if(i>h)return;i>c&&(c=i)}else if(f>0){if(c>i)return;h>i&&(h=i)}if(i=n-l,p||!(i>0)){if(i/=p,0>p){if(c>i)return;h>i&&(h=i)}else if(p>0){if(i>h)return;i>c&&(c=i)}if(i=r-l,p||!(0>i)){if(i/=p,0>p){if(i>h)return;i>c&&(c=i)}else if(p>0){if(c>i)return;h>i&&(h=i)}return c>0&&(a.a={x:s+c*f,y:l+c*p}),1>h&&(a.b={x:s+h*f,y:l+h*p}),a}}}}}}function Fn(t,n,e,r){function a(r,a){return ki(r[0]-t)<Oi?a>0?0:3:ki(r[0]-e)<Oi?a>0?2:1:ki(r[1]-n)<Oi?a>0?1:0:a>0?3:2}function i(t,n){return o(t.x,n.x)}function o(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function s(i,u,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(u,s))||o(i,u)<0^s>0)do{l.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+s+4)%4)!==h);else l.point(u[0],u[1])}function l(a,i){return a>=t&&e>=a&&i>=n&&r>=i}function c(t,n){l(t,n)&&u.point(t,n)}function h(t,n){var e=l(t=Math.max(-Ho,Math.min(Ho,t)),n=Math.max(-Ho,Math.min(Ho,n)));if(p&&d.push([t,n]),x)g=t,v=n,M=e,x=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&b)u.point(t,n);else{var r={a:{x:m,y:y},b:{x:t,y:n}};_(r)?(b||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),w=!1):e&&(u.lineStart(),u.point(t,n),w=!1)}m=t,y=n,b=e}var f,p,d,g,v,M,m,y,b,x,w,k=u,S=In(),_=Rn(t,n,e,r),q={point:c,lineStart:function(){q.point=h,p&&p.push(d=[]),x=!0,b=!1,m=y=NaN},lineEnd:function(){f&&(h(g,v),M&&b&&S.rejoin(),f.push(S.buffer())),q.point=c,b&&u.lineEnd()},polygonStart:function(){u=S,f=[],p=[],w=!0},polygonEnd:function(){u=k,f=pi.merge(f);var n=function(t){for(var n=0,e=p.length,r=t[1],a=0;e>a;++a)for(var i,o=1,u=p[a],s=u.length,l=u[0];s>o;++o)i=u[o],l[1]<=r?i[1]>r&&at(l,i,t)>0&&++n:i[1]<=r&&at(l,i,t)<0&&--n,l=i;return 0!==n}([t,r]),e=w&&n,a=f.length;(e||a)&&(u.polygonStart(),e&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),a&&Nn(f,i,n,s,u),u.polygonEnd()),f=p=d=null}};return q}}function On(t){var n=0,e=Hi/3,r=ne(t),a=r(n,e);return a.parallels=function(t){return arguments.length?r(n=t[0]*Hi/180,e=t[1]*Hi/180):[n/Hi*180,e/Hi*180]},a}function Un(t,n){function e(t,n){var e=Math.sqrt(i-2*a*Math.sin(n))/a;return[e*Math.sin(t*=a),o-e*Math.cos(t)]}var r=Math.sin(t),a=(r+Math.sin(n))/2,i=1+r*(2*a-r),o=Math.sqrt(i)/a;return e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/a,ot((i-(t*t+e*e)*a*a)/(2*a))]},e}function Hn(){function t(t,n){Yo+=a*t-r*n,r=t,a=n}var n,e,r,a;Zo.point=function(i,o){Zo.point=t,n=r=i,e=a=o},Zo.lineEnd=function(){t(n,e)}}function Qn(){function t(t,n){o.push("M",t,",",n,i)}function n(t,n){o.push("M",t,",",n),u.point=e}function e(t,n){o.push("L",t,",",n)}function r(){u.point=t}function a(){o.push("Z")}var i=Yn(4.5),o=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=a},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return i=Yn(t),u},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return u}function Yn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Bn(t,n){To+=t,Po+=n,++Co}function Vn(){function t(t,r){var a=t-n,i=r-e,o=Math.sqrt(a*a+i*i);jo+=o*(n+t)/2,Io+=o*(e+r)/2,Lo+=o,Bn(n=t,e=r)}var n,e;Xo.point=function(r,a){Xo.point=t,Bn(n=r,e=a)}}function Wn(){Xo.point=Bn}function Gn(){function t(t,n){var e=t-r,i=n-a,o=Math.sqrt(e*e+i*i);jo+=o*(r+t)/2,Io+=o*(a+n)/2,Lo+=o,Do+=(o=a*t-r*n)*(r+t),Ro+=o*(a+n),Fo+=3*o,Bn(r=t,a=n)}var n,e,r,a;Xo.point=function(i,o){Xo.point=t,Bn(n=r=i,e=a=o)},Xo.lineEnd=function(){t(n,e)}}function Zn(t){function n(n,e){t.moveTo(n+o,e),t.arc(n,e,o,0,Qi)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function a(){u.point=n}function i(){t.closePath()}var o=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:a,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=a,u.point=n},pointRadius:function(t){return o=t,u},result:q};return u}function $n(t){function n(t){return(u?r:e)(t)}function e(n){return Kn(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){m=NaN,k.point=i,n.lineStart()}function i(e,r){var i=gn([e,r]),o=t(e,r);a(m,y,M,b,x,w,m=o[0],y=o[1],M=e,b=i[0],x=i[1],w=i[2],u,n),n.point(m,y)}function o(){k.point=e,n.lineEnd()}function s(){r(),k.point=l,k.lineEnd=c}function l(t,n){i(h=t,n),f=m,p=y,d=b,g=x,v=w,k.point=i}function c(){a(m,y,M,b,x,w,f,p,h,d,g,v,u,n),k.lineEnd=o,o()}var h,f,p,d,g,v,M,m,y,b,x,w,k={point:e,lineStart:r,lineEnd:o,polygonStart:function(){n.polygonStart(),k.lineStart=s},polygonEnd:function(){n.polygonEnd(),k.lineStart=r}};return k}function a(n,e,r,u,s,l,c,h,f,p,d,g,v,M){var m=c-n,y=h-e,b=m*m+y*y;if(b>4*i&&v--){var x=u+p,w=s+d,k=l+g,S=Math.sqrt(x*x+w*w+k*k),_=Math.asin(k/=S),q=ki(ki(k)-1)<Oi||ki(r-f)<Oi?(r+f)/2:Math.atan2(w,x),z=t(q,_),E=z[0],A=z[1],N=E-n,T=A-e,P=y*N-m*T;(P*P/b>i||ki((m*N+y*T)/b-.5)>.3||o>u*p+s*d+l*g)&&(a(n,e,r,u,s,l,E,A,q,x/=S,w/=S,k,v,M),M.point(E,A),a(E,A,q,x,w,k,c,h,f,p,d,g,v,M))}}var i=.5,o=Math.cos(30*Vi),u=16;return n.precision=function(t){return arguments.length?(u=(i=t*t)>0&&16,n):Math.sqrt(i)},n}function Xn(t){var n=$n(function(n,e){return t([n*Wi,e*Wi])});return function(t){return ee(n(t))}}function Jn(t){this.stream=t}function Kn(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function te(t){return ne(function(){return t})()}function ne(t){function n(t){return[(t=u(t[0]*Vi,t[1]*Vi))[0]*f+s,l-t[1]*f]}function e(t){return(t=u.invert((t[0]-s)/f,(l-t[1])/f))&&[t[0]*Wi,t[1]*Wi]}function r(){u=En(o=ie(M,m,y),i);var t=i(g,v);return s=p-t[0]*f,l=d+t[1]*f,a()}function a(){return c&&(c.valid=!1,c=null),n}var i,o,u,s,l,c,h=$n(function(t,n){return[(t=i(t,n))[0]*f+s,l-t[1]*f]}),f=150,p=480,d=250,g=0,v=0,M=0,m=0,y=0,b=Uo,x=k,w=null,S=null;return n.stream=function(t){return c&&(c.valid=!1),(c=ee(b(o,h(x(t))))).valid=!0,c},n.clipAngle=function(t){return arguments.length?(b=null==t?(w=t,Uo):Dn((w=+t)*Vi),a()):w},n.clipExtent=function(t){return arguments.length?(S=t,x=t?Fn(t[0][0],t[0][1],t[1][0],t[1][1]):k,a()):S},n.scale=function(t){return arguments.length?(f=+t,r()):f},n.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},n.center=function(t){return arguments.length?(g=t[0]%360*Vi,v=t[1]%360*Vi,r()):[g*Wi,v*Wi]},n.rotate=function(t){return arguments.length?(M=t[0]%360*Vi,m=t[1]%360*Vi,y=t.length>2?t[2]%360*Vi:0,r()):[M*Wi,m*Wi,y*Wi]},pi.rebind(n,h,"precision"),function(){return i=t.apply(this,arguments),n.invert=i.invert&&e,r()}}function ee(t){return Kn(t,function(n,e){t.point(n*Vi,e*Vi)})}function re(t,n){return[t,n]}function ae(t,n){return[t>Hi?t-Qi:-Hi>t?t+Qi:t,n]}function ie(t,n,e){return t?n||e?En(ue(t),se(n,e)):ue(t):n||e?se(n,e):ae}function oe(t){return function(n,e){return[(n+=t)>Hi?n-Qi:-Hi>n?n+Qi:n,e]}}function ue(t){var n=oe(t);return n.invert=oe(-t),n}function se(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,s=Math.sin(t)*e,l=Math.sin(n),c=l*r+u*a;return[Math.atan2(s*i-c*o,u*r-l*a),ot(c*i+s*o)]}var r=Math.cos(t),a=Math.sin(t),i=Math.cos(n),o=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,s=Math.sin(t)*e,l=Math.sin(n),c=l*i-s*o;return[Math.atan2(s*i+l*o,u*r+c*a),ot(c*r-u*a)]},e}function le(t,n){var e=Math.cos(t),r=Math.sin(t);return function(a,i,o,u){var s=o*n;null!=a?(a=ce(e,a),i=ce(e,i),(o>0?i>a:a>i)&&(a+=o*Qi)):(a=t+o*Qi,i=t-.5*s);for(var l,c=a;o>0?c>i:i>c;c-=s)u.point((l=xn([e,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function ce(t,n){var e=gn(n);e[0]-=t,bn(e);var r=it(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Oi)%(2*Math.PI)}function he(t,n,e){var r=pi.range(t,n-Oi,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function fe(t,n,e){var r=pi.range(t,n-Oi,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function pe(t){return t.source}function de(t){return t.target}function ge(t,n){function e(n,e){var r=Math.cos(n),a=Math.cos(e),i=t(r*a);return[i*a*Math.sin(n),i*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),a=n(r),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(t*i,r*o),Math.asin(r&&e*i/r)]},e}function ve(t,n){function e(t,n){o>0?-Bi+Oi>n&&(n=-Bi+Oi):n>Bi-Oi&&(n=Bi-Oi);var e=o/Math.pow(a(n),i);return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),a=function(t){return Math.tan(Hi/4+t/2)},i=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(a(n)/a(t)),o=r*Math.pow(a(t),i)/i;return i?(e.invert=function(t,n){var e=o-n,r=rt(i)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Bi]},e):me}function Me(t,n){function e(t,n){var e=i-n;return[e*Math.sin(a*t),i-e*Math.cos(a*t)]}var r=Math.cos(t),a=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),i=r/a+t;return ki(a)<Oi?re:(e.invert=function(t,n){var e=i-n;return[Math.atan2(t,e)/a,i-rt(a)*Math.sqrt(t*t+e*e)]},e)}function me(t,n){return[t,Math.log(Math.tan(Hi/4+n/2))]}function ye(t){var n,e=te(t),r=e.scale,a=e.translate,i=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=a.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var o=i.apply(e,arguments);if(o===e){if(n=null==t){var u=Hi*r(),s=a();i([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else n&&(o=null);return o},e.clipExtent(null)}function be(t,n){return[Math.log(Math.tan(Hi/4+n/2)),-t]}function xe(t){return t[0]}function we(t){return t[1]}function ke(t){for(var n=t.length,e=[0,1],r=2,a=2;n>a;a++){for(;r>1&&at(t[e[r-2]],t[e[r-1]],t[a])<=0;)--r;e[r++]=a}return e.slice(0,r)}function Se(t,n){return t[0]-n[0]||t[1]-n[1]}function _e(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function qe(t,n,e,r){var a=t[0],i=e[0],o=n[0]-a,u=r[0]-i,s=t[1],l=e[1],c=n[1]-s,h=r[1]-l,f=(u*(s-l)-h*(a-i))/(h*o-u*c);return[a+f*o,s+f*c]}function ze(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function Ee(){We(this),this.edge=this.site=this.circle=null}function Ae(t){var n=hu.pop()||new Ee;return n.site=t,n}function Ne(t){Fe(t),su.remove(t),hu.push(t),We(t)}function Te(t){var n=t.circle,e=n.x,r=n.cy,a={x:e,y:r},i=t.P,o=t.N,u=[t];Ne(t);for(var s=i;s.circle&&ki(e-s.circle.x)<Oi&&ki(r-s.circle.cy)<Oi;)i=s.P,u.unshift(s),Ne(s),s=i;u.unshift(s),Fe(s);for(var l=o;l.circle&&ki(e-l.circle.x)<Oi&&ki(r-l.circle.cy)<Oi;)o=l.N,u.push(l),Ne(l),l=o;u.push(l),Fe(l);var c,h=u.length;for(c=1;h>c;++c)l=u[c],s=u[c-1],Ye(l.edge,s.site,l.site,a);s=u[0],(l=u[h-1]).edge=He(s.site,l.site,null,a),Re(s),Re(l)}function Pe(t){for(var n,e,r,a,i=t.x,o=t.y,u=su._;u;)if((r=Ce(u,o)-i)>Oi)u=u.L;else{if(!((a=i-je(u,o))>Oi)){r>-Oi?(n=u.P,e=u):a>-Oi?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var s=Ae(t);if(su.insert(n,s),n||e){if(n===e)return Fe(n),e=Ae(n.site),su.insert(s,e),s.edge=e.edge=He(n.site,s.site),Re(n),void Re(e);if(!e)return void(s.edge=He(n.site,s.site));Fe(n),Fe(e);var l=n.site,c=l.x,h=l.y,f=t.x-c,p=t.y-h,d=e.site,g=d.x-c,v=d.y-h,M=2*(f*v-p*g),m=f*f+p*p,y=g*g+v*v,b={x:(v*m-p*y)/M+c,y:(f*y-g*m)/M+h};Ye(e.edge,l,d,b),s.edge=He(l,t,null,b),e.edge=He(t,d,null,b),Re(n),Re(e)}}function Ce(t,n){var e=t.site,r=e.x,a=e.y,i=a-n;if(!i)return r;var o=t.P;if(!o)return-1/0;var u=(e=o.site).x,s=e.y,l=s-n;if(!l)return u;var c=u-r,h=1/i-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-s+l/2+a-i/2)))/h+r:(r+u)/2}function je(t,n){var e=t.N;if(e)return Ce(e,n);var r=t.site;return r.y===n?r.x:1/0}function Ie(t){this.site=t,this.edges=[]}function Le(t,n){return n.angle-t.angle}function De(){We(this),this.x=this.y=this.arc=this.site=this.cy=null}function Re(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,a=t.site,i=e.site;if(r!==i){var o=a.x,u=a.y,s=r.x-o,l=r.y-u,c=i.x-o,h=2*(s*(v=i.y-u)-l*c);if(!(h>=-Ui)){var f=s*s+l*l,p=c*c+v*v,d=(v*f-l*p)/h,g=(s*p-c*f)/h,v=g+u,M=fu.pop()||new De;M.arc=t,M.site=a,M.x=d+o,M.y=v+Math.sqrt(d*d+g*g),M.cy=v,t.circle=M;for(var m=null,y=cu._;y;)if(M.y<y.y||M.y===y.y&&M.x<=y.x){if(!y.L){m=y.P;break}y=y.L}else{if(!y.R){m=y;break}y=y.R}cu.insert(m,M),m||(lu=M)}}}}function Fe(t){var n=t.circle;n&&(n.P||(lu=n.N),cu.remove(n),fu.push(n),We(n),t.circle=null)}function Oe(t,n){var e=t.b;if(e)return!0;var r,a,i=t.a,o=n[0][0],u=n[1][0],s=n[0][1],l=n[1][1],c=t.l,h=t.r,f=c.x,p=c.y,d=h.x,g=h.y,v=(f+d)/2,M=(p+g)/2;if(g===p){if(o>v||v>=u)return;if(f>d){if(i){if(i.y>=l)return}else i={x:v,y:s};e={x:v,y:l}}else{if(i){if(i.y<s)return}else i={x:v,y:l};e={x:v,y:s}}}else if(a=M-(r=(f-d)/(g-p))*v,-1>r||r>1)if(f>d){if(i){if(i.y>=l)return}else i={x:(s-a)/r,y:s};e={x:(l-a)/r,y:l}}else{if(i){if(i.y<s)return}else i={x:(l-a)/r,y:l};e={x:(s-a)/r,y:s}}else if(g>p){if(i){if(i.x>=u)return}else i={x:o,y:r*o+a};e={x:u,y:r*u+a}}else{if(i){if(i.x<o)return}else i={x:u,y:r*u+a};e={x:o,y:r*o+a}}return t.a=i,t.b=e,!0}function Ue(t,n){this.l=t,this.r=n,this.a=this.b=null}function He(t,n,e,r){var a=new Ue(t,n);return ou.push(a),e&&Ye(a,t,n,e),r&&Ye(a,n,t,r),uu[t.i].edges.push(new Be(a,t,n)),uu[n.i].edges.push(new Be(a,n,t)),a}function Qe(t,n,e){var r=new Ue(t,null);return r.a=n,r.b=e,ou.push(r),r}function Ye(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function Be(t,n,e){var r=t.a,a=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function Ve(){this._=null}function We(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ge(t,n){var e=n,r=n.R,a=e.U;a?a.L===e?a.L=r:a.R=r:t._=r,r.U=a,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function Ze(t,n){var e=n,r=n.L,a=e.U;a?a.L===e?a.L=r:a.R=r:t._=r,r.U=a,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function $e(t){for(;t.L;)t=t.L;return t}function Xe(t,n){var e,r,a,i=t.sort(Je).pop();for(ou=[],uu=new Array(t.length),su=new Ve,cu=new Ve;;)if(a=lu,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===e&&i.y===r||(uu[i.i]=new Ie(i),Pe(i),e=i.x,r=i.y),i=t.pop();else{if(!a)break;Te(a.arc)}n&&(function(t){for(var n,e=ou,r=Rn(t[0][0],t[0][1],t[1][0],t[1][1]),a=e.length;a--;)(!Oe(n=e[a],t)||!r(n)||ki(n.a.x-n.b.x)<Oi&&ki(n.a.y-n.b.y)<Oi)&&(n.a=n.b=null,e.splice(a,1))}(n),function(t){for(var n,e,r,a,i,o,u,s,l,c,h=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],g=uu,v=g.length;v--;)if((i=g[v])&&i.prepare())for(s=(u=i.edges).length,o=0;s>o;)r=(c=u[o].end()).x,a=c.y,n=(l=u[++o%s].start()).x,e=l.y,(ki(r-n)>Oi||ki(a-e)>Oi)&&(u.splice(o,0,new Be(Qe(i.site,c,ki(r-h)<Oi&&d-a>Oi?{x:h,y:ki(n-h)<Oi?e:d}:ki(a-d)<Oi&&f-r>Oi?{x:ki(e-d)<Oi?n:f,y:d}:ki(r-f)<Oi&&a-p>Oi?{x:f,y:ki(n-f)<Oi?e:p}:ki(a-p)<Oi&&r-h>Oi?{x:ki(e-p)<Oi?n:h,y:p}:null),i.site,null)),++s)}(n));var o={cells:uu,edges:ou};return su=cu=ou=uu=null,o}function Je(t,n){return n.y-t.y||n.x-t.x}function Ke(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function tr(t){return t.x}function nr(t){return t.y}function er(t,n,e,r,a,i){if(!t(n,e,r,a,i)){var o=.5*(e+a),u=.5*(r+i),s=n.nodes;s[0]&&er(t,s[0],e,r,o,u),s[1]&&er(t,s[1],o,r,a,u),s[2]&&er(t,s[2],e,u,o,i),s[3]&&er(t,s[3],o,u,a,i)}}function rr(t,n,e,r,a,i,o){var u,s=1/0;return function t(l,c,h,f,p){if(!(c>i||h>o||r>f||a>p)){if(d=l.point){var d,g=n-l.x,v=e-l.y,M=g*g+v*v;if(s>M){var m=Math.sqrt(s=M);r=n-m,a=e-m,i=n+m,o=e+m,u=d}}for(var y=l.nodes,b=.5*(c+f),x=.5*(h+p),w=(e>=x)<<1|n>=b,k=w+4;k>w;++w)if(l=y[3&w])switch(3&w){case 0:t(l,c,h,b,x);break;case 1:t(l,b,h,f,x);break;case 2:t(l,c,x,b,p);break;case 3:t(l,b,x,f,p)}}}(t,r,a,i,o),u}function ar(t,n){t=pi.rgb(t),n=pi.rgb(n);var e=t.r,r=t.g,a=t.b,i=n.r-e,o=n.g-r,u=n.b-a;return function(t){return"#"+kt(Math.round(e+i*t))+kt(Math.round(r+o*t))+kt(Math.round(a+u*t))}}function ir(t,n){var e,r={},a={};for(e in t)e in n?r[e]=sr(t[e],n[e]):a[e]=t[e];for(e in n)e in t||(a[e]=n[e]);return function(t){for(e in r)a[e]=r[e](t);return a}}function or(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function ur(t,n){var e,r,a,i=du.lastIndex=gu.lastIndex=0,o=-1,u=[],s=[];for(t+="",n+="";(e=du.exec(t))&&(r=gu.exec(n));)(a=r.index)>i&&(a=n.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(e=e[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:or(e,r)})),i=gu.lastIndex;return i<n.length&&(a=n.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?(n=s[0].x,function(t){return n(t)+""}):function(){return n}:(n=s.length,function(t){for(var e,r=0;n>r;++r)u[(e=s[r]).i]=e.x(t);return u.join("")})}function sr(t,n){for(var e,r=pi.interpolators.length;--r>=0&&!(e=pi.interpolators[r](t,n)););return e}function lr(t,n){var e,r=[],a=[],i=t.length,o=n.length,u=Math.min(t.length,n.length);for(e=0;u>e;++e)r.push(sr(t[e],n[e]));for(;i>e;++e)a[e]=t[e];for(;o>e;++e)a[e]=n[e];return function(t){for(e=0;u>e;++e)a[e]=r[e](t);return a}}function cr(t){return function(n){return 0>=n?0:n>=1?1:t(n)}}function hr(t){return function(n){return 1-t(1-n)}}function fr(t){return function(n){return.5*(.5>n?t(2*n):2-t(2-2*n))}}function pr(t){return t*t}function dr(t){return t*t*t}function gr(t){if(0>=t)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(.5>t?e:3*(t-n)+e-.75)}function vr(t){return 1-Math.cos(t*Bi)}function Mr(t){return Math.pow(2,10*(t-1))}function mr(t){return 1-Math.sqrt(1-t*t)}function yr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function br(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function xr(t){var n=[t.a,t.b],e=[t.c,t.d],r=kr(n),a=wr(n,e),i=kr(function(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}(e,n,-a))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Wi,this.translate=[t.e,t.f],this.scale=[r,i],this.skew=i?Math.atan2(a,i)*Wi:0}function wr(t,n){return t[0]*n[0]+t[1]*n[1]}function kr(t){var n=Math.sqrt(wr(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Sr(t){return t.length?t.pop()+",":""}function _r(t,n){var e=[],r=[];return t=pi.transform(t),n=pi.transform(n),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var a=e.push("translate(",null,",",null,")");r.push({i:a-4,x:or(t[0],n[0])},{i:a-2,x:or(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}(t.translate,n.translate,e,r),function(t,n,e,r){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),r.push({i:e.push(Sr(e)+"rotate(",null,")")-2,x:or(t,n)})):n&&e.push(Sr(e)+"rotate("+n+")")}(t.rotate,n.rotate,e,r),function(t,n,e,r){t!==n?r.push({i:e.push(Sr(e)+"skewX(",null,")")-2,x:or(t,n)}):n&&e.push(Sr(e)+"skewX("+n+")")}(t.skew,n.skew,e,r),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var a=e.push(Sr(e)+"scale(",null,",",null,")");r.push({i:a-4,x:or(t[0],n[0])},{i:a-2,x:or(t[1],n[1])})}else 1===n[0]&&1===n[1]||e.push(Sr(e)+"scale("+n+")")}(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,a=-1,i=r.length;++a<i;)e[(n=r[a]).i]=n.x(t);return e.join("")}}function qr(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function zr(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Er(t){for(var n=t.source,e=t.target,r=function(t,n){if(t===n)return t;for(var e=Ar(t),r=Ar(n),a=e.pop(),i=r.pop(),o=null;a===i;)o=a,a=e.pop(),i=r.pop();return o}(n,e),a=[n];n!==r;)n=n.parent,a.push(n);for(var i=a.length;e!==r;)a.splice(i,0,e),e=e.parent;return a}function Ar(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function Nr(t){t.fixed|=2}function Tr(t){t.fixed&=-7}function Pr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Cr(t){t.fixed&=-5}function jr(t,n){return pi.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=Or,t}function Ir(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(a=t.children)&&(r=a.length))for(var r,a;--r>=0;)e.push(a[r])}function Lr(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(i=t.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)e.push(i[o]);for(;null!=(t=r.pop());)n(t)}function Dr(t){return t.children}function Rr(t){return t.value}function Fr(t,n){return n.value-t.value}function Or(t){return pi.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function Ur(t){return t.x}function Hr(t){return t.y}function Qr(t,n,e){t.y0=n,t.y=e}function Yr(t){return pi.range(t.length)}function Br(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function Vr(t){for(var n,e=1,r=0,a=t[0][1],i=t.length;i>e;++e)(n=t[e][1])>a&&(r=e,a=n);return r}function Wr(t){return t.reduce(Gr,0)}function Gr(t,n){return t+n[1]}function Zr(t,n){return $r(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function $r(t,n){for(var e=-1,r=+t[0],a=(t[1]-r)/n,i=[];++e<=n;)i[e]=a*e+r;return i}function Xr(t){return[pi.min(t),pi.max(t)]}function Jr(t,n){return t.value-n.value}function Kr(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function ta(t,n){t._pack_next=n,n._pack_prev=t}function na(t,n){var e=n.x-t.x,r=n.y-t.y,a=t.r+n.r;return.999*a*a>e*e+r*r}function ea(t){function n(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((e=t.children)&&(l=e.length)){var e,r,a,i,o,u,s,l,c=1/0,h=-1/0,f=1/0,p=-1/0;if(e.forEach(ra),(r=e[0]).x=-r.r,r.y=0,n(r),l>1&&((a=e[1]).x=a.r,a.y=0,n(a),l>2))for(ia(r,a,i=e[2]),n(i),Kr(r,i),r._pack_prev=i,Kr(i,a),a=r._pack_next,o=3;l>o;o++){ia(r,a,i=e[o]);var d=0,g=1,v=1;for(u=a._pack_next;u!==a;u=u._pack_next,g++)if(na(u,i)){d=1;break}if(1==d)for(s=r._pack_prev;s!==u._pack_prev&&!na(s,i);s=s._pack_prev,v++);d?(v>g||g==v&&a.r<r.r?ta(r,a=u):ta(r=s,a),o--):(Kr(r,i),a=i,n(i))}var M=(c+h)/2,m=(f+p)/2,y=0;for(o=0;l>o;o++)(i=e[o]).x-=M,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(aa)}}function ra(t){t._pack_next=t._pack_prev=t}function aa(t){delete t._pack_next,delete t._pack_prev}function ia(t,n,e){var r=t.r+e.r,a=n.x-t.x,i=n.y-t.y;if(r&&(a||i)){var o=n.r+e.r,u=a*a+i*i,s=.5+((r*=r)-(o*=o))/(2*u),l=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);e.x=t.x+s*a+l*i,e.y=t.y+s*i-l*a}else e.x=t.x+r,e.y=t.y}function oa(t,n){return t.parent==n.parent?1:2}function ua(t){var n=t.children;return n.length?n[0]:t.t}function sa(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function la(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function ca(t,n,e){return t.a.parent===n.parent?t.a:e}function ha(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function fa(t,n){var e=t.x+n[3],r=t.y+n[0],a=t.dx-n[1]-n[3],i=t.dy-n[0]-n[2];return 0>a&&(e+=a/2,a=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:a,dy:i}}function pa(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function da(t){return t.rangeExtent?t.rangeExtent():pa(t.range())}function ga(t,n,e,r){var a=e(t[0],t[1]),i=r(n[0],n[1]);return function(t){return i(a(t))}}function va(t,n){var e,r=0,a=t.length-1,i=t[r],o=t[a];return i>o&&(e=r,r=a,a=e,e=i,i=o,o=e),t[r]=n.floor(i),t[a]=n.ceil(o),t}function Ma(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:qu}function ma(t,n,e,r){var a=[],i=[],o=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<=u;)a.push(e(t[o-1],t[o])),i.push(r(n[o-1],n[o]));return function(n){var e=pi.bisect(t,n,1,u)-1;return i[e](a[e](n))}}function ya(t,n){return pi.rebind(t,n,"range","rangeRound","interpolate","clamp")}function ba(t,n){return va(t,Ma(xa(t,n)[2])),va(t,Ma(xa(t,n)[2])),t}function xa(t,n){null==n&&(n=10);var e=pa(t),r=e[1]-e[0],a=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),i=n/r*a;return.15>=i?a*=10:.35>=i?a*=5:.75>=i&&(a*=2),e[0]=Math.ceil(e[0]/a)*a,e[1]=Math.floor(e[1]/a)*a+.5*a,e[2]=a,e}function wa(t,n){return pi.range.apply(pi,xa(t,n))}function ka(t,n,e){var r=xa(t,n);if(e){var a=po.exec(e);if(a.shift(),"s"===a[8]){var i=pi.formatPrefix(Math.max(ki(r[0]),ki(r[1])));return a[7]||(a[7]="."+Sa(i.scale(r[2]))),a[8]="f",e=pi.format(a.join("")),function(t){return e(i.scale(t))+i.symbol}}a[7]||(a[7]="."+function(t,n){var e=Sa(n[2]);return t in zu?Math.abs(e-Sa(Math.max(ki(n[0]),ki(n[1]))))+ +("e"!==t):e-2*("%"===t)}(a[8],r)),e=a.join("")}else e=",."+Sa(r[2])+"f";return pi.format(e)}function Sa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function _a(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function qa(){return 0}function za(t){return t.innerRadius}function Ea(t){return t.outerRadius}function Aa(t){return t.startAngle}function Na(t){return t.endAngle}function Ta(t){return t&&t.padAngle}function Pa(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function Ca(t,n,e,r,a){var i=t[0]-n[0],o=t[1]-n[1],u=(a?r:-r)/Math.sqrt(i*i+o*o),s=u*o,l=-u*i,c=t[0]+s,h=t[1]+l,f=n[0]+s,p=n[1]+l,d=(c+f)/2,g=(h+p)/2,v=f-c,M=p-h,m=v*v+M*M,y=e-r,b=c*p-f*h,x=(0>M?-1:1)*Math.sqrt(Math.max(0,y*y*m-b*b)),w=(b*M-v*x)/m,k=(-b*v-M*x)/m,S=(b*M+v*x)/m,_=(-b*v+M*x)/m,q=w-d,z=k-g,E=S-d,A=_-g;return q*q+z*z>E*E+A*A&&(w=S,k=_),[[w-s,k-l],[w*e/y,k*e/y]]}function ja(t){function n(n){function o(){l.push("M",i(t(c),u))}for(var s,l=[],c=[],h=-1,f=n.length,p=At(e),d=At(r);++h<f;)a.call(this,s=n[h],h)?c.push([+p.call(this,s,h),+d.call(this,s,h)]):c.length&&(o(),c=[]);return c.length&&o(),l.length?l.join(""):null}var e=xe,r=we,a=An,i=Ia,o=i.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=Iu.get(t)||Ia).key,n):o},n.tension=function(t){return arguments.length?(u=t,n):u},n}function Ia(t){return t.length>1?t.join("L"):t+"Z"}function La(t){return t.join("L")+"Z"}function Da(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("V",(r=t[n])[1],"H",r[0]);return a.join("")}function Ra(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("H",(r=t[n])[0],"V",r[1]);return a.join("")}function Fa(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return Ia(t);var e=t.length!=n.length,r="",a=t[0],i=t[1],o=n[0],u=o,s=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=t[1],s=2),n.length>1){u=n[1],i=t[s],s++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-u[0])+","+(i[1]-u[1])+","+i[0]+","+i[1];for(var l=2;l<n.length;l++,s++)i=t[s],u=n[l],r+="S"+(i[0]-u[0])+","+(i[1]-u[1])+","+i[0]+","+i[1]}if(e){var c=t[s];r+="Q"+(i[0]+2*u[0]/3)+","+(i[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function Oa(t,n){for(var e,r=[],a=(1-n)/2,i=t[0],o=t[1],u=1,s=t.length;++u<s;)e=i,i=o,o=t[u],r.push([a*(o[0]-e[0]),a*(o[1]-e[1])]);return r}function Ua(t){if(t.length<3)return Ia(t);var n=1,e=t.length,r=t[0],a=r[0],i=r[1],o=[a,a,a,(r=t[1])[0]],u=[i,i,i,r[1]],s=[a,",",i,"L",Ha(Ru,o),",",Ha(Ru,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Qa(s,o,u);return t.pop(),s.push("L",r),s.join("")}function Ha(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Qa(t,n,e){t.push("C",Ha(Lu,n),",",Ha(Lu,e),",",Ha(Du,n),",",Ha(Du,e),",",Ha(Ru,n),",",Ha(Ru,e))}function Ya(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Ba(t){for(var n,e,r,a,i=[],o=function(t){for(var n=0,e=t.length-1,r=[],a=t[0],i=t[1],o=r[0]=Ya(a,i);++n<e;)r[n]=(o+(o=Ya(a=i,i=t[n+1])))/2;return r[n]=o,r}(t),u=-1,s=t.length-1;++u<s;)n=Ya(t[u],t[u+1]),ki(n)<Oi?o[u]=o[u+1]=0:(a=(e=o[u]/n)*e+(r=o[u+1]/n)*r)>9&&(a=3*n/Math.sqrt(a),o[u]=a*e,o[u+1]=a*r);for(u=-1;++u<=s;)a=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),i.push([a||0,o[u]*a||0]);return i}function Va(t){for(var n,e,r,a=-1,i=t.length;++a<i;)e=(n=t[a])[0],r=n[1]-Bi,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Wa(t){function n(n){function s(){g.push("M",u(t(M),h),c,l(t(v.reverse()),h),"Z")}for(var f,p,d,g=[],v=[],M=[],m=-1,y=n.length,b=At(e),x=At(a),w=e===r?function(){return p}:At(r),k=a===i?function(){return d}:At(i);++m<y;)o.call(this,f=n[m],m)?(v.push([p=+b.call(this,f,m),d=+x.call(this,f,m)]),M.push([+w.call(this,f,m),+k.call(this,f,m)])):v.length&&(s(),v=[],M=[]);return v.length&&s(),g.length?g.join(""):null}var e=xe,r=xe,a=0,i=we,o=An,u=Ia,s=u.key,l=u,c="L",h=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(a=i=t,n):i},n.y0=function(t){return arguments.length?(a=t,n):a},n.y1=function(t){return arguments.length?(i=t,n):i},n.defined=function(t){return arguments.length?(o=t,n):o},n.interpolate=function(t){return arguments.length?(s="function"==typeof t?u=t:(u=Iu.get(t)||Ia).key,l=u.reverse||u,c=u.closed?"M":"L",n):s},n.tension=function(t){return arguments.length?(h=t,n):h},n}function Ga(t){return t.radius}function Za(t){return[t.x,t.y]}function $a(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Bi;return[e*Math.cos(r),e*Math.sin(r)]}}function Xa(){return 64}function Ja(){return"circle"}function Ka(t){var n=Math.sqrt(t/Hi);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function ti(t){return function(){var n,e,r;(n=this[t])&&(r=n[e=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[e]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ni(t,n,e){return Ei(t,Bu),t.namespace=n,t.id=e,t}function ei(t,n,e,r){var a=t.id,i=t.namespace;return G(t,"function"==typeof e?function(t,o,u){t[i][a].tween.set(n,r(e.call(t,t.__data__,o,u)))}:(e=r(e),function(t){t[i][a].tween.set(n,e)}))}function ri(t){return null==t&&(t=""),function(){this.textContent=t}}function ai(t){return null==t?"__transition__":"__transition_"+t+"__"}function ii(t,n,e,r,a){function i(e){var a=f.active,i=f[a];for(var d in i&&(i.timer.c=null,i.timer.t=NaN,--f.count,delete f[a],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),f)if(r>+d){var g=f[d];g.timer.c=null,g.timer.t=NaN,--f.count,delete f[d]}s.c=o,Pt(function(){return s.c&&o(e||1)&&(s.c=null,s.t=NaN),1},0,u),f.active=r,p.event&&p.event.start.call(t,t.__data__,n),h=[],p.tween.forEach(function(e,r){(r=r.call(t,t.__data__,n))&&h.push(r)}),c=p.ease,l=p.duration}function o(a){for(var i=a/l,o=c(i),u=h.length;u>0;)h[--u].call(t,o);return i>=1?(p.event&&p.event.end.call(t,t.__data__,n),--f.count?delete f[r]:delete t[e],1):void 0}var u,s,l,c,h,f=t[e]||(t[e]={active:0,count:0}),p=f[r];p||(u=a.time,s=Pt(function(t){var n=p.delay;return s.t=n+u,t>=n?i(t-n):void(s.c=i)},0,u),p=f[r]={tween:new d,time:u,timer:s,delay:a.delay,duration:a.duration,ease:a.ease,index:n},a=null,++f.count)}function oi(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function ui(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}function si(t){return t.toISOString()}function li(t,n,e){function r(n){return t(n)}function a(t,e){var r=(t[1]-t[0])/e,a=pi.bisect(ts,r);return a==ts.length?[n.year,xa(t.map(function(t){return t/31536e6}),e)[2]]:a?n[r/ts[a-1]<ts[a]/r?a-1:a]:[rs,xa(t,e)[2]]}return r.invert=function(n){return ci(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(ci)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,ci(+e+1),n).length}var i=r.domain(),o=pa(i),u=null==t?a(o,10):"number"==typeof t&&a(o,t);return u&&(t=u[0],n=u[1]),r.domain(va(i,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=ci(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=ci(+n+1);return n}}:t))},r.ticks=function(t,n){var e=pa(r.domain()),i=null==t?a(e,10):"number"==typeof t?a(e,t):!t.range&&[{range:t},n];return i&&(t=i[0],n=i[1]),t.range(e[0],ci(+e[1]+1),1>n?1:n)},r.tickFormat=function(){return e},r.copy=function(){return li(t.copy(),n,e)},ya(r,t)}function ci(t){return new Date(t)}function hi(t){return JSON.parse(t.responseText)}function fi(t){var n=vi.createRange();return n.selectNode(vi.body),n.createContextualFragment(t.responseText)}var pi={version:"3.5.17"},di=[].slice,gi=function(t){return di.call(t)},vi=this.document;if(vi)try{gi(vi.documentElement.childNodes)[0].nodeType}catch(t){gi=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),vi)try{vi.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var Mi=this.Element.prototype,mi=Mi.setAttribute,yi=Mi.setAttributeNS,bi=this.CSSStyleDeclaration.prototype,xi=bi.setProperty;Mi.setAttribute=function(t,n){mi.call(this,t,n+"")},Mi.setAttributeNS=function(t,n,e){yi.call(this,t,n,e+"")},bi.setProperty=function(t,n,e){xi.call(this,t,n+"",e)}}pi.ascending=u,pi.descending=function(t,n){return t>n?-1:n>t?1:n>=t?0:NaN},pi.min=function(t,n){var e,r,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=t[a])&&r>=r){e=r;break}for(;++a<i;)null!=(r=t[a])&&e>r&&(e=r)}else{for(;++a<i;)if(null!=(r=n.call(t,t[a],a))&&r>=r){e=r;break}for(;++a<i;)null!=(r=n.call(t,t[a],a))&&e>r&&(e=r)}return e},pi.max=function(t,n){var e,r,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=t[a])&&r>=r){e=r;break}for(;++a<i;)null!=(r=t[a])&&r>e&&(e=r)}else{for(;++a<i;)if(null!=(r=n.call(t,t[a],a))&&r>=r){e=r;break}for(;++a<i;)null!=(r=n.call(t,t[a],a))&&r>e&&(e=r)}return e},pi.extent=function(t,n){var e,r,a,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=a=r;break}for(;++i<o;)null!=(r=t[i])&&(e>r&&(e=r),r>a&&(a=r))}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=a=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&(e>r&&(e=r),r>a&&(a=r))}return[e,a]},pi.sum=function(t,n){var e,r=0,a=t.length,i=-1;if(1===arguments.length)for(;++i<a;)l(e=+t[i])&&(r+=e);else for(;++i<a;)l(e=+n.call(t,t[i],i))&&(r+=e);return r},pi.mean=function(t,n){var e,r=0,a=t.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)l(e=s(t[i]))?r+=e:--o;else for(;++i<a;)l(e=s(n.call(t,t[i],i)))?r+=e:--o;return o?r/o:void 0},pi.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),a=+t[r-1],i=e-r;return i?a+i*(t[r]-a):a},pi.median=function(t,n){var e,r=[],a=t.length,i=-1;if(1===arguments.length)for(;++i<a;)l(e=s(t[i]))&&r.push(e);else for(;++i<a;)l(e=s(n.call(t,t[i],i)))&&r.push(e);return r.length?pi.quantile(r.sort(u),.5):void 0},pi.variance=function(t,n){var e,r,a=t.length,i=0,o=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)l(e=s(t[u]))&&(o+=(r=e-i)*(e-(i+=r/++c)));else for(;++u<a;)l(e=s(n.call(t,t[u],u)))&&(o+=(r=e-i)*(e-(i+=r/++c)));return c>1?o/(c-1):void 0},pi.deviation=function(){var t=pi.variance.apply(this,arguments);return t?Math.sqrt(t):t};var wi=c(u);pi.bisectLeft=wi.left,pi.bisect=pi.bisectRight=wi.right,pi.bisector=function(t){return c(1===t.length?function(n,e){return u(t(n),e)}:t)},pi.shuffle=function(t,n,e){(i=arguments.length)<3&&(e=t.length,2>i&&(n=0));for(var r,a,i=e-n;i;)a=Math.random()*i--|0,r=t[i+n],t[i+n]=t[a+n],t[a+n]=r;return t},pi.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},pi.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],a=new Array(0>e?0:e);e>n;)a[n]=[r,r=t[++n]];return a},pi.transpose=function(t){if(!(a=t.length))return[];for(var n=-1,e=pi.min(t,h),r=new Array(e);++n<e;)for(var a,i=-1,o=r[n]=new Array(a);++i<a;)o[i]=t[i][n];return r},pi.zip=function(){return pi.transpose(arguments)},pi.keys=function(t){var n=[];for(var e in t)n.push(e);return n},pi.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},pi.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},pi.merge=function(t){for(var n,e,r,a=t.length,i=-1,o=0;++i<a;)o+=t[i].length;for(e=new Array(o);--a>=0;)for(n=(r=t[a]).length;--n>=0;)e[--o]=r[n];return e};var ki=Math.abs;pi.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,a=[],i=f(ki(e)),o=-1;if(t*=i,n*=i,0>(e*=i))for(;(r=t+e*++o)>n;)a.push(r/i);else for(;(r=t+e*++o)<n;)a.push(r/i);return a},pi.map=function(t,n){var e=new d;if(t instanceof d)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,a=-1,i=t.length;if(1===arguments.length)for(;++a<i;)e.set(a,t[a]);else for(;++a<i;)e.set(n.call(t,r=t[a],a),r)}else for(var o in t)e.set(o,t[o]);return e};var Si="__proto__",_i="\0";p(d,{has:M,get:function(t){return this._[g(t)]},set:function(t,n){return this._[g(t)]=n},remove:m,keys:y,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:v(n),value:this._[n]});return t},size:b,empty:x,forEach:function(t){for(var n in this._)t.call(this,v(n),this._[n])}}),pi.nest=function(){function t(i,o,u){if(u>=a.length)return e?e.call(r,o):n?o.sort(n):o;for(var s,l,c,h,f=-1,p=o.length,g=a[u++],v=new d;++f<p;)(h=v.get(s=g(l=o[f])))?h.push(l):v.set(s,[l]);return i?(l=i(),c=function(n,e){l.set(n,t(i,e,u))}):(l={},c=function(n,e){l[n]=t(i,e,u)}),v.forEach(c),l}var n,e,r={},a=[],i=[];return r.map=function(n,e){return t(e,n,0)},r.entries=function(n){return function t(n,e){if(e>=a.length)return n;var r=[],o=i[e++];return n.forEach(function(n,a){r.push({key:n,values:t(a,e)})}),o?r.sort(function(t,n){return o(t.key,n.key)}):r}(t(pi.map,n,0),0)},r.key=function(t){return a.push(t),r},r.sortKeys=function(t){return i[a.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return e=t,r},r},pi.set=function(t){var n=new w;if(t)for(var e=0,r=t.length;r>e;++e)n.add(t[e]);return n},p(w,{has:M,add:function(t){return this._[g(t+="")]=!0,t},remove:m,values:y,size:b,empty:x,forEach:function(t){for(var n in this._)t.call(this,v(n))}}),pi.behavior={},pi.rebind=function(t,n){for(var e,r=1,a=arguments.length;++r<a;)t[e=arguments[r]]=S(t,n,n[e]);return t};var qi=["webkit","ms","moz","Moz","o","O"];pi.dispatch=function(){for(var t=new z,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=E(t);return t},z.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},pi.event=null,pi.requote=function(t){return t.replace(zi,"\\$&")};var zi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ei={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},Ai=function(t,n){return n.querySelector(t)},Ni=function(t,n){return n.querySelectorAll(t)},Ti=function(t,n){var e=t.matches||t[_(t,"matchesSelector")];return(Ti=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(Ai=function(t,n){return Sizzle(t,n)[0]||null},Ni=Sizzle,Ti=Sizzle.matchesSelector),pi.selection=function(){return pi.select(vi.documentElement)};var Pi=pi.selection.prototype=[];Pi.select=function(t){var n,e,r,a,i=[];t=C(t);for(var o=-1,u=this.length;++o<u;){i.push(n=[]),n.parentNode=(r=this[o]).parentNode;for(var s=-1,l=r.length;++s<l;)(a=r[s])?(n.push(e=t.call(a,a.__data__,s,o)),e&&"__data__"in a&&(e.__data__=a.__data__)):n.push(null)}return P(i)},Pi.selectAll=function(t){var n,e,r=[];t=j(t);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],u=-1,s=o.length;++u<s;)(e=o[u])&&(r.push(n=gi(t.call(e,e.__data__,u,a))),n.parentNode=e);return P(r)};var Ci="http://www.w3.org/1999/xhtml",ji={svg:"http://www.w3.org/2000/svg",xhtml:Ci,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};pi.ns={prefix:ji,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ji.hasOwnProperty(e)?{space:ji[e],local:t}:t}},Pi.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return(t=pi.ns.qualify(t)).local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(I(n,t[n]));return this}return this.each(I(t,n))},Pi.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=R(t)).length,a=-1;if(n=e.classList){for(;++a<r;)if(!n.contains(t[a]))return!1}else for(n=e.getAttribute("class");++a<r;)if(!D(t[a]).test(n))return!1;return!0}for(n in t)this.each(F(n,t[n]));return this}return this.each(F(t,n))},Pi.style=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){for(e in 2>r&&(n=""),t)this.each(U(e,t[e],n));return this}if(2>r){var a=this.node();return o(a).getComputedStyle(a,null).getPropertyValue(t)}e=""}return this.each(U(t,n,e))},Pi.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(H(n,t[n]));return this}return this.each(H(t,n))},Pi.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Pi.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Pi.append=function(t){return t=Q(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Pi.insert=function(t,n){return t=Q(t),n=C(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},Pi.remove=function(){return this.each(Y)},Pi.data=function(t,n){function e(t,e){var r,a,i,o=t.length,c=e.length,h=Math.min(o,c),f=new Array(c),p=new Array(c),g=new Array(o);if(n){var v,M=new d,m=new Array(o);for(r=-1;++r<o;)(a=t[r])&&(M.has(v=n.call(a,a.__data__,r))?g[r]=a:M.set(v,a),m[r]=v);for(r=-1;++r<c;)(a=M.get(v=n.call(e,i=e[r],r)))?!0!==a&&(f[r]=a,a.__data__=i):p[r]=B(i),M.set(v,!0);for(r=-1;++r<o;)r in m&&!0!==M.get(m[r])&&(g[r]=t[r])}else{for(r=-1;++r<h;)a=t[r],i=e[r],a?(a.__data__=i,f[r]=a):p[r]=B(i);for(;c>r;++r)p[r]=B(e[r]);for(;o>r;++r)g[r]=t[r]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,u.push(p),s.push(f),l.push(g)}var r,a,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++i<o;)(a=r[i])&&(t[i]=a.__data__);return t}var u=Z([]),s=P([]),l=P([]);if("function"==typeof t)for(;++i<o;)e(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],t);return s.enter=function(){return u},s.exit=function(){return l},s},Pi.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Pi.filter=function(t){var n,e,r,a=[];"function"!=typeof t&&(t=V(t));for(var i=0,o=this.length;o>i;i++){a.push(n=[]),n.parentNode=(e=this[i]).parentNode;for(var u=0,s=e.length;s>u;u++)(r=e[u])&&t.call(r,r.__data__,u,i)&&n.push(r)}return P(a)},Pi.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],a=r.length-1,i=r[a];--a>=0;)(e=r[a])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},Pi.sort=function(t){t=W.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},Pi.each=function(t){return G(this,function(n,e,r){t.call(n,n.__data__,e,r)})},Pi.call=function(t){var n=gi(arguments);return t.apply(n[0]=this,n),this},Pi.empty=function(){return!this.node()},Pi.node=function(){for(var t=0,n=this.length;n>t;t++)for(var e=this[t],r=0,a=e.length;a>r;r++){var i=e[r];if(i)return i}return null},Pi.size=function(){var t=0;return G(this,function(){++t}),t};var Ii=[];pi.selection.enter=Z,pi.selection.enter.prototype=Ii,Ii.append=Pi.append,Ii.empty=Pi.empty,Ii.node=Pi.node,Ii.call=Pi.call,Ii.size=Pi.size,Ii.select=function(t){for(var n,e,r,a,i,o=[],u=-1,s=this.length;++u<s;){r=(a=this[u]).update,o.push(n=[]),n.parentNode=a.parentNode;for(var l=-1,c=a.length;++l<c;)(i=a[l])?(n.push(r[l]=e=t.call(a.parentNode,i.__data__,l,u)),e.__data__=i.__data__):n.push(null)}return P(o)},Ii.insert=function(t,n){return arguments.length<2&&(n=$(this)),Pi.insert.call(this,t,n)},pi.select=function(t){var n;return"string"==typeof t?(n=[Ai(t,vi)]).parentNode=vi.documentElement:(n=[t]).parentNode=i(t),P([n])},pi.selectAll=function(t){var n;return"string"==typeof t?(n=gi(Ni(t,vi))).parentNode=vi.documentElement:(n=gi(t)).parentNode=null,P([n])},Pi.on=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){for(e in 2>r&&(n=!1),t)this.each(X(e,t[e],n));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(X(t,n,e))};var Li=pi.map({mouseenter:"mouseover",mouseleave:"mouseout"});vi&&Li.forEach(function(t){"on"+t in vi&&Li.remove(t)});var Di,Ri=0;pi.mouse=function(t){return nt(t,N())};var Fi=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;pi.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=N().changedTouches),n)for(var r,a=0,i=n.length;i>a;++a)if((r=n[a]).identifier===e)return nt(t,r)},pi.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",i)}function n(t,n,a,i,o){return function(){function u(){var t,e,r=n(f,g);r&&(t=r[0]-y[0],e=r[1]-y[1],d|=t|e,y=r,p({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:e}))}function s(){n(f,g)&&(M.on(i+v,null).on(o+v,null),m(d),p({type:"dragend"}))}var l,c=this,h=pi.event.target.correspondingElement||pi.event.target,f=c.parentNode,p=e.of(c,arguments),d=0,g=t(),v=".drag"+(null==g?"":"-"+g),M=pi.select(a(h)).on(i+v,u).on(o+v,s),m=tt(h),y=n(f,g);r?l=[(l=r.apply(c,arguments)).x-y[0],l.y-y[1]]:l=[0,0],p({type:"dragstart"})}}var e=T(t,"drag","dragstart","dragend"),r=null,a=n(q,pi.mouse,o,"mousemove","mouseup"),i=n(et,pi.touch,k,"touchmove","touchend");return t.origin=function(n){return arguments.length?(r=n,t):r},pi.rebind(t,e,"on")},pi.touches=function(t,n){return arguments.length<2&&(n=N().touches),n?gi(n).map(function(n){var e=nt(t,n);return e.identifier=n.identifier,e}):[]};var Oi=1e-6,Ui=Oi*Oi,Hi=Math.PI,Qi=2*Hi,Yi=Qi-Oi,Bi=Hi/2,Vi=Hi/180,Wi=180/Hi,Gi=Math.SQRT2;pi.interpolateZoom=function(t,n){var e,r,a=t[0],i=t[1],o=t[2],u=n[0],s=n[1],l=n[2],c=u-a,h=s-i,f=c*c+h*h;if(Ui>f)r=Math.log(l/o)/Gi,e=function(t){return[a+t*c,i+t*h,o*Math.exp(Gi*t*r)]};else{var p=Math.sqrt(f),d=(l*l-o*o+4*f)/(2*o*2*p),g=(l*l-o*o-4*f)/(2*l*2*p),v=Math.log(Math.sqrt(d*d+1)-d),M=Math.log(Math.sqrt(g*g+1)-g);r=(M-v)/Gi,e=function(t){var n=t*r,e=ut(v),u=o/(2*p)*(e*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Gi*n+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[a+u*c,i+u*h,o*e/ut(Gi*n+v)]}}return e.duration=1e3*r,e},pi.behavior.zoom=function(){function t(t){t.on(E,c).on($i+".zoom",f).on("dblclick.zoom",p).on(C,h)}function n(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function e(t){k.k=Math.max(_[0],Math.min(_[1],t))}function r(t,n){n=function(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}(n),k.x+=t[0]-n[0],k.y+=t[1]-n[1]}function a(n,a,i,o){n.__chart__={x:k.x,y:k.y,k:k.k},e(Math.pow(2,o)),r(g=a,i),n=pi.select(n),q>0&&(n=n.transition().duration(q)),n.call(t.event)}function i(){b&&b.domain(y.range().map(function(t){return(t-k.x)/k.k}).map(y.invert)),w&&w.domain(x.range().map(function(t){return(t-k.y)/k.k}).map(x.invert))}function u(t){z++||t({type:"zoomstart"})}function s(t){i(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function l(t){--z||(t({type:"zoomend"}),g=null)}function c(){var t=this,e=j.of(t,arguments),a=0,i=pi.select(o(t)).on(N,function(){a=1,r(pi.mouse(t),c),s(e)}).on(P,function(){i.on(N,null).on(P,null),h(a),l(e)}),c=n(pi.mouse(t)),h=tt(t);Yu.call(t),u(e)}function h(){function t(){var t=pi.touches(d);return p=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function i(){var n=pi.event.target;pi.select(n).on(b,o).on(x,f),w.push(n);for(var e=pi.event.changedTouches,r=0,i=e.length;i>r;++r)v[e[r].identifier]=null;var u=t(),s=Date.now();if(1===u.length){if(500>s-m){var l=u[0];a(d,l,v[l.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),A()}m=s}else if(u.length>1){l=u[0];var c=u[1],h=l[0]-c[0],p=l[1]-c[1];M=h*h+p*p}}function o(){var t,n,a,i,o=pi.touches(d);Yu.call(d);for(var u=0,l=o.length;l>u;++u,i=null)if(a=o[u],i=v[a.identifier]){if(n)break;t=a,n=i}if(i){var c=(c=a[0]-t[0])*c+(c=a[1]-t[1])*c,h=M&&Math.sqrt(c/M);t=[(t[0]+a[0])/2,(t[1]+a[1])/2],n=[(n[0]+i[0])/2,(n[1]+i[1])/2],e(h*p)}m=null,r(t,n),s(g)}function f(){if(pi.event.touches.length){for(var n=pi.event.changedTouches,e=0,r=n.length;r>e;++e)delete v[n[e].identifier];for(var a in v)return void t()}pi.selectAll(w).on(y,null),S.on(E,c).on(C,h),_(),l(g)}var p,d=this,g=j.of(d,arguments),v={},M=0,y=".zoom-"+pi.event.changedTouches[0].identifier,b="touchmove"+y,x="touchend"+y,w=[],S=pi.select(d),_=tt(d);i(),u(g),S.on(E,null).on(C,i)}function f(){var t=j.of(this,arguments);M?clearTimeout(M):(Yu.call(this),d=n(g=v||pi.mouse(this)),u(t)),M=setTimeout(function(){M=null,l(t)},50),A(),e(Math.pow(2,.002*Zi())*k.k),r(g,d),s(t)}function p(){}var d,g,v,M,m,y,b,x,w,k={x:0,y:0,k:1},S=[960,500],_=Xi,q=250,z=0,E="mousedown.zoom",N="mousemove.zoom",P="mouseup.zoom",C="touchstart.zoom",j=T(t,"zoomstart","zoom","zoomend");return $i||($i="onwheel"in vi?(Zi=function(){return-pi.event.deltaY*(pi.event.deltaMode?120:1)},"wheel"):"onmousewheel"in vi?(Zi=function(){return pi.event.wheelDelta},"mousewheel"):(Zi=function(){return-pi.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=j.of(this,arguments),n=k;Hu?pi.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var e=S[0],r=S[1],a=g?g[0]:e/2,i=g?g[1]:r/2,o=pi.interpolateZoom([(a-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(a-n.x)/n.k,(i-n.y)/n.k,e/n.k]);return function(n){var r=o(n),u=e/r[2];this.__chart__=k={x:a-r[0]*u,y:i-r[1]*u,k:u},s(t)}}).each("interrupt.zoom",function(){l(t)}).each("end.zoom",function(){l(t)}):(this.__chart__=k,u(t),s(t),l(t))})},t.translate=function(n){return arguments.length?(k={x:+n[0],y:+n[1],k:k.k},i(),t):[k.x,k.y]},t.scale=function(n){return arguments.length?(k={x:k.x,y:k.y,k:null},e(+n),i(),t):k.k},t.scaleExtent=function(n){return arguments.length?(_=null==n?Xi:[+n[0],+n[1]],t):_},t.center=function(n){return arguments.length?(v=n&&[+n[0],+n[1]],t):v},t.size=function(n){return arguments.length?(S=n&&[+n[0],+n[1]],t):S},t.duration=function(n){return arguments.length?(q=+n,t):q},t.x=function(n){return arguments.length?(b=n,y=n.copy(),k={x:0,y:0,k:1},t):b},t.y=function(n){return arguments.length?(w=n,x=n.copy(),k={x:0,y:0,k:1},t):w},pi.rebind(t,j,"on")};var Zi,$i,Xi=[0,1/0];pi.color=lt,lt.prototype.toString=function(){return this.rgb()+""},pi.hsl=ct;var Ji=ct.prototype=new lt;Ji.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ct(this.h,this.s,this.l/t)},Ji.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ct(this.h,this.s,t*this.l)},Ji.rgb=function(){return ht(this.h,this.s,this.l)},pi.hcl=ft;var Ki=ft.prototype=new lt;Ki.brighter=function(t){return new ft(this.h,this.c,Math.min(100,this.l+to*(arguments.length?t:1)))},Ki.darker=function(t){return new ft(this.h,this.c,Math.max(0,this.l-to*(arguments.length?t:1)))},Ki.rgb=function(){return pt(this.h,this.c,this.l).rgb()},pi.lab=dt;var to=18,no=.95047,eo=1,ro=1.08883,ao=dt.prototype=new lt;ao.brighter=function(t){return new dt(Math.min(100,this.l+to*(arguments.length?t:1)),this.a,this.b)},ao.darker=function(t){return new dt(Math.max(0,this.l-to*(arguments.length?t:1)),this.a,this.b)},ao.rgb=function(){return gt(this.l,this.a,this.b)},pi.rgb=bt;var io=bt.prototype=new lt;io.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,a=30;return n||e||r?(n&&a>n&&(n=a),e&&a>e&&(e=a),r&&a>r&&(r=a),new bt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new bt(a,a,a)},io.darker=function(t){return new bt((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},io.hsl=function(){return _t(this.r,this.g,this.b)},io.toString=function(){return"#"+kt(this.r)+kt(this.g)+kt(this.b)};var oo=pi.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});oo.forEach(function(t,n){oo.set(t,xt(n))}),pi.functor=At,pi.xhr=Nt(k),pi.dsv=function(t,n){function e(t,e,i){arguments.length<3&&(i=e,e=null);var o=Tt(t,n,null==e?r:a(e),i);return o.row=function(t){return arguments.length?o.response(null==(e=t)?r:a(t)):e},o}function r(t){return e.parse(t.responseText)}function a(t){return function(n){return e.parse(n.responseText,t)}}function i(n){return n.map(o).join(t)}function o(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var a=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(a(t),e)}:a})},e.parseRows=function(t,n){function e(){if(c>=l)return o;if(a)return a=!1,i;var n=c;if(34===t.charCodeAt(n)){for(var e=n;e++<l;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}return c=e+2,13===(r=t.charCodeAt(e+1))?(a=!0,10===t.charCodeAt(e+2)&&++c):10===r&&(a=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;l>c;){var r,u=1;if(10===(r=t.charCodeAt(c++)))a=!0;else if(13===r)a=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==s)continue;return t.slice(n,c-u)}return t.slice(n)}for(var r,a,i={},o={},u=[],l=t.length,c=0,h=0;(r=e())!==o;){for(var f=[];r!==i&&r!==o;)f.push(r),r=e();n&&null==(f=n(f,h++))||u.push(f)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new w,a=[];return n.forEach(function(t){for(var n in t)r.has(n)||a.push(r.add(n))}),[a.map(o).join(t)].concat(n.map(function(n){return a.map(function(t){return o(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(i).join("\n")},e},pi.csv=pi.dsv(",","text/csv"),pi.tsv=pi.dsv("\t","text/tab-separated-values");var uo,so,lo,co,ho=this[_(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};pi.timer=function(){Pt.apply(this,arguments)},pi.timer.flush=function(){jt(),It()},pi.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var fo=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(t,n){var e=Math.pow(10,3*ki(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}});pi.formatPrefix=function(t,n){var e=0;return(t=+t)&&(0>t&&(t*=-1),n&&(t=pi.round(t,Lt(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),fo[8+e/3]};var po=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,go=pi.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=pi.round(t,Lt(t,n))).toFixed(Math.max(0,Math.min(20,Lt(t*(1+1e-15),n))))}}),vo=pi.time={},Mo=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){mo.setUTCDate.apply(this._,arguments)},setDay:function(){mo.setUTCDay.apply(this._,arguments)},setFullYear:function(){mo.setUTCFullYear.apply(this._,arguments)},setHours:function(){mo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){mo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){mo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){mo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){mo.setUTCSeconds.apply(this._,arguments)},setTime:function(){mo.setTime.apply(this._,arguments)}};var mo=Date.prototype;vo.year=Ot(function(t){return(t=vo.day(t)).setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),vo.years=vo.year.range,vo.years.utc=vo.year.utc.range,vo.day=Ot(function(t){var n=new Mo(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),vo.days=vo.day.range,vo.days.utc=vo.day.utc.range,vo.dayOfYear=function(t){var n=vo.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=vo[t]=Ot(function(t){return(t=vo.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=vo.year(t).getDay();return Math.floor((vo.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});vo[t+"s"]=e.range,vo[t+"s"].utc=e.utc.range,vo[t+"OfYear"]=function(t){var e=vo.year(t).getDay();return Math.floor((vo.dayOfYear(t)+(e+n)%7)/7)}}),vo.week=vo.sunday,vo.weeks=vo.sunday.range,vo.weeks.utc=vo.sunday.utc.range,vo.weekOfYear=vo.sundayOfYear;var yo={"-":"",_:" ",0:"0"},bo=/^\s*\d+/,xo=/^%/;pi.locale=function(t){return{numberFormat:Dt(t),timeFormat:Ht(t)}};var wo=pi.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});pi.format=wo.numberFormat,pi.geo={},ln.prototype={s:0,t:0,add:function(t){cn(t,this.t,ko),cn(ko.s,this.s,this),this.s?this.t+=ko.t:this.s=ko.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ko=new ln;pi.geo.stream=function(t,n){t&&So.hasOwnProperty(t.type)?So[t.type](t,n):hn(t,n)};var So={Feature:function(t,n){hn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,a=e.length;++r<a;)hn(e[r].geometry,n)}},_o={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){fn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)fn(e[r],n,0)},Polygon:function(t,n){pn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)pn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,a=e.length;++r<a;)hn(e[r],n)}};pi.geo.area=function(t){return qo=0,pi.geo.stream(t,Eo),qo};var qo,zo=new ln,Eo={sphere:function(){qo+=4*Hi},point:q,lineStart:q,lineEnd:q,polygonStart:function(){zo.reset(),Eo.lineStart=dn},polygonEnd:function(){var t=2*zo;qo+=0>t?4*Hi+t:t,Eo.lineStart=Eo.lineEnd=Eo.point=q}};pi.geo.bounds=function(){function t(t,n){y.push(b=[c=t,f=t]),h>n&&(h=n),n>p&&(p=n)}function n(n,e){var r=gn([n*Vi,e*Vi]);if(M){var a=Mn(M,r),i=Mn([a[1],-a[0],0],a);bn(i),i=xn(i);var o=n-d,s=o>0?1:-1,l=i[0]*Wi*s,g=ki(o)>180;if(g^(l>s*d&&s*n>l))(v=i[1]*Wi)>p&&(p=v);else if(g^((l=(l+360)%360-180)>s*d&&s*n>l)){var v=-i[1]*Wi;h>v&&(h=v)}else h>e&&(h=e),e>p&&(p=e);g?d>n?u(c,n)>u(c,f)&&(f=n):u(n,f)>u(c,f)&&(c=n):f>=c?(c>n&&(c=n),n>f&&(f=n)):n>d?u(c,n)>u(c,f)&&(f=n):u(n,f)>u(c,f)&&(c=n)}else t(n,e);M=r,d=n}function e(){x.point=n}function r(){b[0]=c,b[1]=f,x.point=t,M=null}function a(t,e){if(M){var r=t-d;m+=ki(r)>180?r+(r>0?360:-360):r}else g=t,v=e;Eo.point(t,e),n(t,e)}function i(){Eo.lineStart()}function o(){a(g,v),Eo.lineEnd(),ki(m)>Oi&&(c=-(f=180)),b[0]=c,b[1]=f,M=null}function u(t,n){return(n-=t)<0?n+360:n}function s(t,n){return t[0]-n[0]}function l(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var c,h,f,p,d,g,v,M,m,y,b,x={point:t,lineStart:e,lineEnd:r,polygonStart:function(){x.point=a,x.lineStart=i,x.lineEnd=o,m=0,Eo.polygonStart()},polygonEnd:function(){Eo.polygonEnd(),x.point=t,x.lineStart=e,x.lineEnd=r,0>zo?(c=-(f=180),h=-(p=90)):m>Oi?p=90:-Oi>m&&(h=-90),b[0]=c,b[1]=f}};return function(t){if(p=f=-(c=h=1/0),y=[],pi.geo.stream(t,x),i=y.length){y.sort(s);for(var n=1,e=[d=y[0]];i>n;++n)l((a=y[n])[0],d)||l(a[1],d)?(u(d[0],a[1])>u(d[0],d[1])&&(d[1]=a[1]),u(a[0],d[1])>u(d[0],d[1])&&(d[0]=a[0])):e.push(d=a);for(var r,a,i,o=-1/0,d=(n=0,e[i=e.length-1]);i>=n;d=a,++n)a=e[n],(r=u(d[1],a[0]))>o&&(o=r,c=a[0],f=d[1])}return y=b=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,p]]}}(),pi.geo.centroid=function(t){Ao=No=To=Po=Co=jo=Io=Lo=Do=Ro=Fo=0,pi.geo.stream(t,Oo);var n=Do,e=Ro,r=Fo,a=n*n+e*e+r*r;return Ui>a&&(n=jo,e=Io,r=Lo,Oi>No&&(n=To,e=Po,r=Co),Ui>(a=n*n+e*e+r*r))?[NaN,NaN]:[Math.atan2(e,n)*Wi,ot(r/Math.sqrt(a))*Wi]};var Ao,No,To,Po,Co,jo,Io,Lo,Do,Ro,Fo,Oo={sphere:q,point:kn,lineStart:_n,lineEnd:qn,polygonStart:function(){Oo.lineStart=zn},polygonEnd:function(){Oo.lineStart=_n}},Uo=Cn(An,function(t){var n,e=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(i,o){var u=i>0?Hi:-Hi,s=ki(i-e);ki(s-Hi)<Oi?(t.point(e,r=(r+o)/2>0?Bi:-Bi),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(i,r),n=0):a!==u&&s>=Hi&&(ki(e-a)<Oi&&(e-=a*Oi),ki(i-u)<Oi&&(i-=u*Oi),r=function(t,n,e,r){var a,i,o=Math.sin(t-e);return ki(o)>Oi?Math.atan((Math.sin(n)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(a=Math.cos(n))*Math.sin(t))/(a*i*o)):(n+r)/2}(e,r,i,o),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=i,r=o),a=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var a;if(null==t)a=e*Bi,r.point(-Hi,a),r.point(0,a),r.point(Hi,a),r.point(Hi,0),r.point(Hi,-a),r.point(0,-a),r.point(-Hi,-a),r.point(-Hi,0),r.point(-Hi,a);else if(ki(t[0]-n[0])>Oi){var i=t[0]<n[0]?Hi:-Hi;a=e*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(n[0],n[1])},[-Hi,-Hi/2]),Ho=1e9;pi.geo.clipExtent=function(){var t,n,e,r,a,i,o={stream:function(t){return a&&(a.valid=!1),(a=i(t)).valid=!0,a},extent:function(u){return arguments.length?(i=Fn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),a&&(a.valid=!1,a=null),o):[[t,n],[e,r]]}};return o.extent([[0,0],[960,500]])},(pi.geo.conicEqualArea=function(){return On(Un)}).raw=Un,pi.geo.albers=function(){return pi.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},pi.geo.albersUsa=function(){function t(t){var i=t[0],o=t[1];return n=null,e(i,o),n||(r(i,o),n)||a(i,o),n}var n,e,r,a,i=pi.geo.albers(),o=pi.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=pi.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=i.scale(),e=i.translate(),r=(t[0]-e[0])/n,a=(t[1]-e[1])/n;return(a>=.12&&.234>a&&r>=-.425&&-.214>r?o:a>=.166&&.234>a&&r>=-.214&&-.115>r?u:i).invert(t)},t.stream=function(t){var n=i.stream(t),e=o.stream(t),r=u.stream(t);return{point:function(t,a){n.point(t,a),e.point(t,a),r.point(t,a)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(i.precision(n),o.precision(n),u.precision(n),t):i.precision()},t.scale=function(n){return arguments.length?(i.scale(n),o.scale(.35*n),u.scale(n),t.translate(i.translate())):i.scale()},t.translate=function(n){if(!arguments.length)return i.translate();var l=i.scale(),c=+n[0],h=+n[1];return e=i.translate(n).clipExtent([[c-.455*l,h-.238*l],[c+.455*l,h+.238*l]]).stream(s).point,r=o.translate([c-.307*l,h+.201*l]).clipExtent([[c-.425*l+Oi,h+.12*l+Oi],[c-.214*l-Oi,h+.234*l-Oi]]).stream(s).point,a=u.translate([c-.205*l,h+.212*l]).clipExtent([[c-.214*l+Oi,h+.166*l+Oi],[c-.115*l-Oi,h+.234*l-Oi]]).stream(s).point,t},t.scale(1070)};var Qo,Yo,Bo,Vo,Wo,Go,Zo={point:q,lineStart:q,lineEnd:q,polygonStart:function(){Yo=0,Zo.lineStart=Hn},polygonEnd:function(){Zo.lineStart=Zo.lineEnd=Zo.point=q,Qo+=ki(Yo/2)}},$o={point:function(t,n){Bo>t&&(Bo=t),t>Wo&&(Wo=t),Vo>n&&(Vo=n),n>Go&&(Go=n)},lineStart:q,lineEnd:q,polygonStart:q,polygonEnd:q},Xo={point:Bn,lineStart:Vn,lineEnd:Wn,polygonStart:function(){Xo.lineStart=Gn},polygonEnd:function(){Xo.point=Bn,Xo.lineStart=Vn,Xo.lineEnd=Wn}};pi.geo.path=function(){function t(t){return t&&("function"==typeof u&&i.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=a(i)),pi.geo.stream(t,o)),i.result()}function n(){return o=null,t}var e,r,a,i,o,u=4.5;return t.area=function(t){return Qo=0,pi.geo.stream(t,a(Zo)),Qo},t.centroid=function(t){return To=Po=Co=jo=Io=Lo=Do=Ro=Fo=0,pi.geo.stream(t,a(Xo)),Fo?[Do/Fo,Ro/Fo]:Lo?[jo/Lo,Io/Lo]:Co?[To/Co,Po/Co]:[NaN,NaN]},t.bounds=function(t){return Wo=Go=-(Bo=Vo=1/0),pi.geo.stream(t,a($o)),[[Bo,Vo],[Wo,Go]]},t.projection=function(t){return arguments.length?(a=(e=t)?t.stream||Xn(t):k,n()):e},t.context=function(t){return arguments.length?(i=null==(r=t)?new Qn:new Zn(t),"function"!=typeof u&&i.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(i.pointRadius(+n),+n),t):u},t.projection(pi.geo.albersUsa()).context(null)},pi.geo.transform=function(t){return{stream:function(n){var e=new Jn(n);for(var r in t)e[r]=t[r];return e}}},Jn.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},pi.geo.projection=te,pi.geo.projectionMutator=ne,(pi.geo.equirectangular=function(){return te(re)}).raw=re.invert=re,pi.geo.rotation=function(t){function n(n){return(n=t(n[0]*Vi,n[1]*Vi))[0]*=Wi,n[1]*=Wi,n}return t=ie(t[0]%360*Vi,t[1]*Vi,t.length>2?t[2]*Vi:0),n.invert=function(n){return(n=t.invert(n[0]*Vi,n[1]*Vi))[0]*=Wi,n[1]*=Wi,n},n},ae.invert=re,pi.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=ie(-t[0]*Vi,-t[1]*Vi,0).invert,a=[];return e(null,null,1,{point:function(t,e){a.push(t=n(t,e)),t[0]*=Wi,t[1]*=Wi}}),{type:"Polygon",coordinates:[a]}}var n,e,r=[0,0],a=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=le((n=+r)*Vi,a*Vi),t):n},t.precision=function(r){return arguments.length?(e=le(n*Vi,(a=+r)*Vi),t):a},t.angle(90)},pi.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Vi,a=t[1]*Vi,i=n[1]*Vi,o=Math.sin(r),u=Math.cos(r),s=Math.sin(a),l=Math.cos(a),c=Math.sin(i),h=Math.cos(i);return Math.atan2(Math.sqrt((e=h*o)*e+(e=l*c-s*h*u)*e),s*c+l*h*u)},pi.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return pi.range(Math.ceil(i/v)*v,a,v).map(f).concat(pi.range(Math.ceil(l/M)*M,s,M).map(p)).concat(pi.range(Math.ceil(r/d)*d,e,d).filter(function(t){return ki(t%v)>Oi}).map(c)).concat(pi.range(Math.ceil(u/g)*g,o,g).filter(function(t){return ki(t%M)>Oi}).map(h))}var e,r,a,i,o,u,s,l,c,h,f,p,d=10,g=d,v=90,M=360,m=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(p(s).slice(1),f(a).reverse().slice(1),p(l).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(i=+n[0][0],a=+n[1][0],l=+n[0][1],s=+n[1][1],i>a&&(n=i,i=a,a=n),l>s&&(n=l,l=s,s=n),t.precision(m)):[[i,l],[a,s]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],o=+n[1][1],r>e&&(n=r,r=e,e=n),u>o&&(n=u,u=o,o=n),t.precision(m)):[[r,u],[e,o]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],M=+n[1],t):[v,M]},t.minorStep=function(n){return arguments.length?(d=+n[0],g=+n[1],t):[d,g]},t.precision=function(n){return arguments.length?(m=+n,c=he(u,o,90),h=fe(r,e,m),f=he(l,s,90),p=fe(i,a,m),t):m},t.majorExtent([[-180,-90+Oi],[180,90-Oi]]).minorExtent([[-180,-80-Oi],[180,80+Oi]])},pi.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||a.apply(this,arguments)]}}var n,e,r=pe,a=de;return t.distance=function(){return pi.geo.distance(n||r.apply(this,arguments),e||a.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(a=n,e="function"==typeof n?null:n,t):a},t.precision=function(){return arguments.length?t:0},t},pi.geo.interpolate=function(t,n){return function(t,n,e,r){var a=Math.cos(n),i=Math.sin(n),o=Math.cos(r),u=Math.sin(r),s=a*Math.cos(t),l=a*Math.sin(t),c=o*Math.cos(e),h=o*Math.sin(e),f=2*Math.asin(Math.sqrt(st(r-n)+a*o*st(e-t))),p=1/Math.sin(f),d=f?function(t){var n=Math.sin(t*=f)*p,e=Math.sin(f-t)*p,r=e*s+n*c,a=e*l+n*h,o=e*i+n*u;return[Math.atan2(a,r)*Wi,Math.atan2(o,Math.sqrt(r*r+a*a))*Wi]}:function(){return[t*Wi,n*Wi]};return d.distance=f,d}(t[0]*Vi,t[1]*Vi,n[0]*Vi,n[1]*Vi)},pi.geo.length=function(t){return Jo=0,pi.geo.stream(t,Ko),Jo};var Jo,Ko={sphere:q,point:q,lineStart:function(){function t(t,a){var i=Math.sin(a*=Vi),o=Math.cos(a),u=ki((t*=Vi)-n),s=Math.cos(u);Jo+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*i-e*o*s)*u),e*i+r*o*s),n=t,e=i,r=o}var n,e,r;Ko.point=function(a,i){n=a*Vi,e=Math.sin(i*=Vi),r=Math.cos(i),Ko.point=t},Ko.lineEnd=function(){Ko.point=Ko.lineEnd=q}},lineEnd:q,polygonStart:q,polygonEnd:q},tu=ge(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(pi.geo.azimuthalEqualArea=function(){return te(tu)}).raw=tu;var nu=ge(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},k);(pi.geo.azimuthalEquidistant=function(){return te(nu)}).raw=nu,(pi.geo.conicConformal=function(){return On(ve)}).raw=ve,(pi.geo.conicEquidistant=function(){return On(Me)}).raw=Me;var eu=ge(function(t){return 1/t},Math.atan);(pi.geo.gnomonic=function(){return te(eu)}).raw=eu,me.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Bi]},(pi.geo.mercator=function(){return ye(me)}).raw=me;var ru=ge(function(){return 1},Math.asin);(pi.geo.orthographic=function(){return te(ru)}).raw=ru;var au=ge(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(pi.geo.stereographic=function(){return te(au)}).raw=au,be.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Bi]},(pi.geo.transverseMercator=function(){var t=ye(be),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90])}).raw=be,pi.geom={},pi.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,a=At(e),i=At(r),o=t.length,u=[],s=[];for(n=0;o>n;n++)u.push([+a.call(this,t[n],n),+i.call(this,t[n],n),n]);for(u.sort(Se),n=0;o>n;n++)s.push([u[n][0],-u[n][1]]);var l=ke(u),c=ke(s),h=c[0]===l[0],f=c[c.length-1]===l[l.length-1],p=[];for(n=l.length-1;n>=0;--n)p.push(t[u[l[n]][2]]);for(n=+h;n<c.length-f;++n)p.push(t[u[c[n]][2]]);return p}var e=xe,r=we;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},pi.geom.polygon=function(t){return Ei(t,iu),t};var iu=pi.geom.polygon.prototype=[];iu.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],a=0;++n<e;)t=r,r=this[n],a+=t[1]*r[0]-t[0]*r[1];return.5*a},iu.centroid=function(t){var n,e,r=-1,a=this.length,i=0,o=0,u=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++r<a;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],i+=(n[0]+u[0])*e,o+=(n[1]+u[1])*e;return[i*t,o*t]},iu.clip=function(t){for(var n,e,r,a,i,o,u=ze(t),s=-1,l=this.length-ze(this),c=this[l-1];++s<l;){for(n=t.slice(),t.length=0,a=this[s],i=n[(r=n.length-u)-1],e=-1;++e<r;)_e(o=n[e],c,a)?(_e(i,c,a)||t.push(qe(i,o,c,a)),t.push(o)):_e(i,c,a)&&t.push(qe(i,o,c,a)),i=o;u&&t.push(t[0]),c=a}return t};var ou,uu,su,lu,cu,hu=[],fu=[];Ie.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)(t=n[e].edge).b&&t.a||n.splice(e,1);return n.sort(Le),n.length},Be.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ve.prototype={insert:function(t,n){var e,r,a;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=$e(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(a=r.R)&&a.C?(e.C=a.C=!1,r.C=!0,t=r):(t===e.R&&(Ge(this,e),e=(t=e).U),e.C=!1,r.C=!0,Ze(this,r)):(a=r.L)&&a.C?(e.C=a.C=!1,r.C=!0,t=r):(t===e.L&&(Ze(this,e),e=(t=e).U),e.C=!1,r.C=!0,Ge(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,a=t.U,i=t.L,o=t.R;if(e=i?o?$e(o):i:o,a?a.L===t?a.L=e:a.R=e:this._=e,i&&o?(r=e.C,e.C=t.C,e.L=i,i.U=e,e!==o?(a=e.U,e.U=t.U,t=e.R,a.L=t,e.R=o,o.U=e):(e.U=a,a=e,t=e.R)):(r=t.C,t=e),t&&(t.U=a),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===a.L){if((n=a.R).C&&(n.C=!1,a.C=!0,Ge(this,a),n=a.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,Ze(this,n),n=a.R),n.C=a.C,a.C=n.R.C=!1,Ge(this,a),t=this._;break}}else if((n=a.L).C&&(n.C=!1,a.C=!0,Ze(this,a),n=a.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,Ge(this,n),n=a.L),n.C=a.C,a.C=n.L.C=!1,Ze(this,a),t=this._;break}n.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},pi.geom.voronoi=function(t){function n(t){var n=new Array(t.length),r=u[0][0],a=u[0][1],i=u[1][0],o=u[1][1];return Xe(e(t),u).cells.forEach(function(e,u){var s=e.edges,l=e.site;(n[u]=s.length?s.map(function(t){var n=t.start();return[n.x,n.y]}):l.x>=r&&l.x<=i&&l.y>=a&&l.y<=o?[[r,o],[i,o],[i,a],[r,a]]:[]).point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(i(t,n)/Oi)*Oi,y:Math.round(o(t,n)/Oi)*Oi,i:n}})}var r=xe,a=we,i=r,o=a,u=pu;return t?n(t):(n.links=function(t){return Xe(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return Xe(e(t)).cells.forEach(function(e,r){for(var a,i=e.site,o=e.edges.sort(Le),u=-1,s=o.length,l=o[s-1].edge,c=l.l===i?l.r:l.l;++u<s;)l,a=c,c=(l=o[u].edge).l===i?l.r:l.l,r<a.i&&r<c.i&&Ke(i,a,c)<0&&n.push([t[r],t[a.i],t[c.i]])}),n},n.x=function(t){return arguments.length?(i=At(r=t),n):r},n.y=function(t){return arguments.length?(o=At(a=t),n):a},n.clipExtent=function(t){return arguments.length?(u=null==t?pu:t,n):u===pu?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===pu?null:u&&u[1]},n)};var pu=[[-1e6,-1e6],[1e6,1e6]];pi.geom.delaunay=function(t){return pi.geom.voronoi().triangles(t)},pi.geom.quadtree=function(t,n,e,r,a){function i(t){function i(t,n,e,r,a,i,o,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var s=t.x,c=t.y;if(null!=s)if(ki(s-e)+ki(c-r)<.01)l(t,n,e,r,a,i,o,u);else{var h=t.point;t.x=t.y=t.point=null,l(t,h,s,c,a,i,o,u),l(t,n,e,r,a,i,o,u)}else t.x=e,t.y=r,t.point=n}else l(t,n,e,r,a,i,o,u)}function l(t,n,e,r,a,o,u,s){var l=.5*(a+u),c=.5*(o+s),h=e>=l,f=r>=c,p=f<<1|h;t.leaf=!1,h?a=l:u=l,f?o=c:s=c,i(t=t.nodes[p]||(t.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null}),n,e,r,a,o,u,s)}var c,h,f,p,d,g,v,M,m,y=At(u),b=At(s);if(null!=n)g=n,v=e,M=r,m=a;else if(M=m=-(g=v=1/0),h=[],f=[],d=t.length,o)for(p=0;d>p;++p)(c=t[p]).x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>M&&(M=c.x),c.y>m&&(m=c.y),h.push(c.x),f.push(c.y);else for(p=0;d>p;++p){var x=+y(c=t[p],p),w=+b(c,p);g>x&&(g=x),v>w&&(v=w),x>M&&(M=x),w>m&&(m=w),h.push(x),f.push(w)}var k=M-g,S=m-v;k>S?m=v+k:M=g+S;var _={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){i(_,t,+y(t,++p),+b(t,p),g,v,M,m)},visit:function(t){er(t,_,g,v,M,m)},find:function(t){return rr(_,t[0],t[1],g,v,M,m)}};if(p=-1,null==n){for(;++p<d;)i(_,t[p],h[p],f[p],g,v,M,m);--p}else t.forEach(_.add);return h=f=t=c=null,_}var o,u=xe,s=we;return(o=arguments.length)?(u=tr,s=nr,3===o&&(a=e,r=n,e=n=0),i(t)):(i.x=function(t){return arguments.length?(u=t,i):u},i.y=function(t){return arguments.length?(s=t,i):s},i.extent=function(t){return arguments.length?(null==t?n=e=r=a=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],a=+t[1][1]),i):null==n?null:[[n,e],[r,a]]},i.size=function(t){return arguments.length?(null==t?n=e=r=a=null:(n=e=0,r=+t[0],a=+t[1]),i):null==n?null:[r-n,a-e]},i)},pi.interpolateRgb=ar,pi.interpolateObject=ir,pi.interpolateNumber=or,pi.interpolateString=ur;var du=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gu=new RegExp(du.source,"g");pi.interpolate=sr,pi.interpolators=[function(t,n){var e=typeof n;return("string"===e?oo.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?ar:ur:n instanceof lt?ar:Array.isArray(n)?lr:"object"===e&&isNaN(n)?ir:or)(t,n)}],pi.interpolateArray=lr;var vu=function(){return k},Mu=pi.map({linear:vu,poly:function(t){return function(n){return Math.pow(n,t)}},quad:function(){return pr},cubic:function(){return dr},sin:function(){return vr},exp:function(){return Mr},circle:function(){return mr},elastic:function(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/Qi*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Qi/n)}},back:function(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}},bounce:function(){return yr}}),mu=pi.map({in:k,out:hr,"in-out":fr,"out-in":function(t){return fr(hr(t))}});pi.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return e=Mu.get(e)||vu,cr((r=mu.get(r)||k)(e.apply(null,di.call(arguments,1))))},pi.interpolateHcl=function(t,n){t=pi.hcl(t),n=pi.hcl(n);var e=t.h,r=t.c,a=t.l,i=n.h-e,o=n.c-r,u=n.l-a;return isNaN(o)&&(o=0,r=isNaN(r)?n.c:r),isNaN(i)?(i=0,e=isNaN(e)?n.h:e):i>180?i-=360:-180>i&&(i+=360),function(t){return pt(e+i*t,r+o*t,a+u*t)+""}},pi.interpolateHsl=function(t,n){t=pi.hsl(t),n=pi.hsl(n);var e=t.h,r=t.s,a=t.l,i=n.h-e,o=n.s-r,u=n.l-a;return isNaN(o)&&(o=0,r=isNaN(r)?n.s:r),isNaN(i)?(i=0,e=isNaN(e)?n.h:e):i>180?i-=360:-180>i&&(i+=360),function(t){return ht(e+i*t,r+o*t,a+u*t)+""}},pi.interpolateLab=function(t,n){t=pi.lab(t),n=pi.lab(n);var e=t.l,r=t.a,a=t.b,i=n.l-e,o=n.a-r,u=n.b-a;return function(t){return gt(e+i*t,r+o*t,a+u*t)+""}},pi.interpolateRound=br,pi.transform=function(t){var n=vi.createElementNS(pi.ns.prefix.svg,"g");return(pi.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new xr(e?e.matrix:yu)})(t)},xr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var yu={a:1,b:0,c:0,d:1,e:0,f:0};pi.interpolateTransform=_r,pi.layout={},pi.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Er(t[e]));return n}},pi.layout.chord=function(){function t(){var t,l,h,f,p,d={},g=[],v=pi.range(i),M=[];for(e=[],r=[],t=0,f=-1;++f<i;){for(l=0,p=-1;++p<i;)l+=a[f][p];g.push(l),M.push(pi.range(i)),t+=l}for(o&&v.sort(function(t,n){return o(g[t],g[n])}),u&&M.forEach(function(t,n){t.sort(function(t,e){return u(a[n][t],a[n][e])})}),t=(Qi-c*i)/t,l=0,f=-1;++f<i;){for(h=l,p=-1;++p<i;){var m=v[f],y=M[m][p],b=a[m][y],x=l,w=l+=b*t;d[m+"-"+y]={index:m,subindex:y,startAngle:x,endAngle:w,value:b}}r[m]={index:m,startAngle:h,endAngle:l,value:g[m]},l+=c}for(f=-1;++f<i;)for(p=f-1;++p<i;){var k=d[f+"-"+p],S=d[p+"-"+f];(k.value||S.value)&&e.push(k.value<S.value?{source:S,target:k}:{source:k,target:S})}s&&n()}function n(){e.sort(function(t,n){return s((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,a,i,o,u,s,l={},c=0;return l.matrix=function(t){return arguments.length?(i=(a=t)&&a.length,e=r=null,l):a},l.padding=function(t){return arguments.length?(c=t,e=r=null,l):c},l.sortGroups=function(t){return arguments.length?(o=t,e=r=null,l):o},l.sortSubgroups=function(t){return arguments.length?(u=t,e=null,l):u},l.sortChords=function(t){return arguments.length?(s=t,e&&n(),l):s},l.chords=function(){return e||t(),e},l.groups=function(){return r||t(),r},l},pi.layout.force=function(){function t(t){return function(n,e,r,a){if(n.point!==t){var i=n.cx-t.x,o=n.cy-t.y,u=a-e,s=i*i+o*o;if(s>u*u/M){if(g>s){var l=n.charge/s;t.px-=i*l,t.py-=o*l}return!0}if(n.point&&s&&g>s){l=n.pointCharge/s;t.px-=i*l,t.py-=o*l}}return!n.charge}}function n(t){t.px=pi.event.x,t.py=pi.event.y,s.resume()}var e,r,a,i,o,u,s={},l=pi.dispatch("start","tick","end"),c=[1,1],h=.9,f=bu,p=xu,d=-30,g=wu,v=.1,M=.64,m=[],y=[];return s.tick=function(){if((a*=.99)<.005)return e=null,l.end({type:"end",alpha:a=0}),!0;var n,r,s,f,p,g,M,b,x,w=m.length,k=y.length;for(r=0;k>r;++r)f=(s=y[r]).source,(g=(b=(p=s.target).x-f.x)*b+(x=p.y-f.y)*x)&&(b*=g=a*o[r]*((g=Math.sqrt(g))-i[r])/g,x*=g,p.x-=b*(M=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=x*M,f.x+=b*(M=1-M),f.y+=x*M);if((M=a*v)&&(b=c[0]/2,x=c[1]/2,r=-1,M))for(;++r<w;)(s=m[r]).x+=(b-s.x)*M,s.y+=(x-s.y)*M;if(d)for(function t(n,e,r){var a=0,i=0;if(n.charge=0,!n.leaf)for(var o,u=n.nodes,s=u.length,l=-1;++l<s;)null!=(o=u[l])&&(t(o,e,r),n.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=e*r[n.point.index];n.charge+=n.pointCharge=c,a+=c*n.point.x,i+=c*n.point.y}n.cx=a/n.charge,n.cy=i/n.charge}(n=pi.geom.quadtree(m),a,u),r=-1;++r<w;)(s=m[r]).fixed||n.visit(t(s));for(r=-1;++r<w;)(s=m[r]).fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*h,s.y-=(s.py-(s.py=s.y))*h);l.tick({type:"tick",alpha:a})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(c=t,s):c},s.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,s):p},s.friction=function(t){return arguments.length?(h=+t,s):h},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.gravity=function(t){return arguments.length?(v=+t,s):v},s.theta=function(t){return arguments.length?(M=t*t,s):Math.sqrt(M)},s.alpha=function(t){return arguments.length?(t=+t,a?t>0?a=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:a=0})):t>0&&(l.start({type:"start",alpha:a=t}),e=Pt(s.tick)),s):a},s.start=function(){function t(t,r){if(!e){for(e=new Array(a),s=0;a>s;++s)e[s]=[];for(s=0;l>s;++s){var i=y[s];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var o,u=e[n],s=-1,c=u.length;++s<c;)if(!isNaN(o=u[s][t]))return o;return Math.random()*r}var n,e,r,a=m.length,l=y.length,h=c[0],g=c[1];for(n=0;a>n;++n)(r=m[n]).index=n,r.weight=0;for(n=0;l>n;++n)"number"==typeof(r=y[n]).source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;a>n;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",h)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof f)for(n=0;l>n;++n)i[n]=+f.call(this,y[n],n);else for(n=0;l>n;++n)i[n]=f;if(o=[],"function"==typeof p)for(n=0;l>n;++n)o[n]=+p.call(this,y[n],n);else for(n=0;l>n;++n)o[n]=p;if(u=[],"function"==typeof d)for(n=0;a>n;++n)u[n]=+d.call(this,m[n],n);else for(n=0;a>n;++n)u[n]=d;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return r||(r=pi.behavior.drag().origin(k).on("dragstart.force",Nr).on("drag.force",n).on("dragend.force",Tr)),arguments.length?void this.on("mouseover.force",Pr).on("mouseout.force",Cr).call(r):r},pi.rebind(s,l,"on")};var bu=20,xu=1,wu=1/0;pi.layout.hierarchy=function(){function t(a){var i,o=[a],u=[];for(a.depth=0;null!=(i=o.pop());)if(u.push(i),(l=e.call(t,i,i.depth))&&(s=l.length)){for(var s,l,c;--s>=0;)o.push(c=l[s]),c.parent=i,c.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(t,i,i.depth)||0),delete i.children;return Lr(a,function(t){var e,a;n&&(e=t.children)&&e.sort(n),r&&(a=t.parent)&&(a.value+=t.value)}),u}var n=Fr,e=Dr,r=Rr;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(Ir(n,function(t){t.children&&(t.value=0)}),Lr(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},pi.layout.partition=function(){function t(t,r){var a=n.call(this,t,r);return function t(n,e,r,a){var i=n.children;if(n.x=e,n.y=n.depth*a,n.dx=r,n.dy=a,i&&(o=i.length)){var o,u,s,l=-1;for(r=n.value?r/n.value:0;++l<o;)t(u=i[l],e,s=u.value*r,a),e+=s}}(a[0],0,e[0],e[1]/function t(n){var e=n.children,r=0;if(e&&(a=e.length))for(var a,i=-1;++i<a;)r=Math.max(r,t(e[i]));return 1+r}(a[0])),a}var n=pi.layout.hierarchy(),e=[1,1];return t.size=function(n){return arguments.length?(e=n,t):e},jr(t,n)},pi.layout.pie=function(){function t(o){var u,s=o.length,l=o.map(function(e,r){return+n.call(t,e,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),h=("function"==typeof a?a.apply(this,arguments):a)-c,f=Math.min(Math.abs(h)/s,+("function"==typeof i?i.apply(this,arguments):i)),p=f*(0>h?-1:1),d=pi.sum(l),g=d?(h-s*p)/d:0,v=pi.range(s),M=[];return null!=e&&v.sort(e===ku?function(t,n){return l[n]-l[t]}:function(t,n){return e(o[t],o[n])}),v.forEach(function(t){M[t]={data:o[t],value:u=l[t],startAngle:c,endAngle:c+=u*g+p,padAngle:f}}),M}var n=Number,e=ku,r=0,a=Qi,i=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(a=n,t):a},t.padAngle=function(n){return arguments.length?(i=n,t):i},t};var ku={};pi.layout.stack=function(){function t(u,s){if(!(f=u.length))return u;var l=u.map(function(e,r){return n.call(t,e,r)}),c=l.map(function(n){return n.map(function(n,e){return[i.call(t,n,e),o.call(t,n,e)]})}),h=e.call(t,c,s);l=pi.permute(l,h),c=pi.permute(c,h);var f,p,d,g,v=r.call(t,c,s),M=l[0].length;for(d=0;M>d;++d)for(a.call(t,l[0][d],g=v[d],c[0][d][1]),p=1;f>p;++p)a.call(t,l[p][d],g+=c[p-1][d][1],c[p][d][1]);return u}var n=k,e=Yr,r=Br,a=Qr,i=Ur,o=Hr;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:Su.get(n)||Yr,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:_u.get(n)||Br,t):r},t.x=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.length?(a=n,t):a},t};var Su=pi.map({"inside-out":function(t){var n,e,r=t.length,a=t.map(Vr),i=t.map(Wr),o=pi.range(r).sort(function(t,n){return a[t]-a[n]}),u=0,s=0,l=[],c=[];for(n=0;r>n;++n)e=o[n],s>u?(u+=i[e],l.push(e)):(s+=i[e],c.push(e));return c.reverse().concat(l)},reverse:function(t){return pi.range(t.length).reverse()},default:Yr}),_u=pi.map({silhouette:function(t){var n,e,r,a=t.length,i=t[0].length,o=[],u=0,s=[];for(e=0;i>e;++e){for(n=0,r=0;a>n;n++)r+=t[n][e][1];r>u&&(u=r),o.push(r)}for(e=0;i>e;++e)s[e]=(u-o[e])/2;return s},wiggle:function(t){var n,e,r,a,i,o,u,s,l,c=t.length,h=t[0],f=h.length,p=[];for(p[0]=s=l=0,e=1;f>e;++e){for(n=0,a=0;c>n;++n)a+=t[n][e][1];for(n=0,i=0,u=h[e][0]-h[e-1][0];c>n;++n){for(r=0,o=(t[n][e][1]-t[n][e-1][1])/(2*u);n>r;++r)o+=(t[r][e][1]-t[r][e-1][1])/u;i+=o*t[n][e][1]}p[e]=s-=a?i/a*u:0,l>s&&(l=s)}for(e=0;f>e;++e)p[e]-=l;return p},expand:function(t){var n,e,r,a=t.length,i=t[0].length,o=1/a,u=[];for(e=0;i>e;++e){for(n=0,r=0;a>n;n++)r+=t[n][e][1];if(r)for(n=0;a>n;n++)t[n][e][1]/=r;else for(n=0;a>n;n++)t[n][e][1]=o}for(e=0;i>e;++e)u[e]=0;return u},zero:Br});pi.layout.histogram=function(){function t(t,i){for(var o,u,s=[],l=t.map(e,this),c=r.call(this,l,i),h=a.call(this,c,l,i),f=(i=-1,l.length),p=h.length-1,d=n?1:1/f;++i<p;)(o=s[i]=[]).dx=h[i+1]-(o.x=h[i]),o.y=0;if(p>0)for(i=-1;++i<f;)(u=l[i])>=c[0]&&u<=c[1]&&((o=s[pi.bisect(h,u,1,p)-1]).y+=d,o.push(t[i]));return s}var n=!0,e=Number,r=Xr,a=Zr;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=At(n),t):r},t.bins=function(n){return arguments.length?(a="number"==typeof n?function(t){return $r(t,n)}:At(n),t):a},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},pi.layout.pack=function(){function t(t,i){var o=e.call(this,t,i),u=o[0],s=a[0],l=a[1],c=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,Lr(u,function(t){t.r=+c(t.value)}),Lr(u,ea),r){var h=r*(n?1:Math.max(2*u.r/s,2*u.r/l))/2;Lr(u,function(t){t.r+=h}),Lr(u,ea),Lr(u,function(t){t.r-=h})}return function t(n,e,r,a){var i=n.children;if(n.x=e+=a*n.x,n.y=r+=a*n.y,n.r*=a,i)for(var o=-1,u=i.length;++o<u;)t(i[o],e,r,a)}(u,s/2,l/2,n?1:1/Math.max(2*u.r/s,2*u.r/l)),o}var n,e=pi.layout.hierarchy().sort(Jr),r=0,a=[1,1];return t.size=function(n){return arguments.length?(a=n,t):a},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},jr(t,e)},pi.layout.tree=function(){function t(t,s){var l=a.call(this,t,s),c=l[0],h=function(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var a,i=n.children,o=0,u=i.length;u>o;++o)r.push((i[o]=a={_:i[o],parent:n,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return e.children[0]}(c);if(Lr(h,n),h.parent.m=-h.z,Ir(h,e),u)Ir(c,r);else{var f=c,p=c,d=c;Ir(c,function(t){t.x<f.x&&(f=t),t.x>p.x&&(p=t),t.depth>d.depth&&(d=t)});var g=i(f,p)/2-f.x,v=o[0]/(p.x+i(p,f)/2+g),M=o[1]/(d.depth||1);Ir(c,function(t){t.x=(t.x+g)*v,t.y=t.depth*M})}return l}function n(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){!function(t){for(var n,e=0,r=0,a=t.children,i=a.length;--i>=0;)(n=a[i]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+i(t._,r._),t.m=t.z-a):t.z=a}else r&&(t.z=r.z+i(t._,r._));t.parent.A=function(t,n,e){if(n){for(var r,a=t,o=t,u=n,s=a.parent.children[0],l=a.m,c=o.m,h=u.m,f=s.m;u=sa(u),a=ua(a),u&&a;)s=ua(s),(o=sa(o)).a=t,(r=u.z+h-a.z-l+i(u._,a._))>0&&(la(ca(u,t,e),t,r),l+=r,c+=r),h+=u.m,l+=a.m,f+=s.m,c+=o.m;u&&!sa(o)&&(o.t=u,o.m+=h-c),a&&!ua(s)&&(s.t=a,s.m+=l-f,e=t)}return e}(t,r,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=o[0],t.y=t.depth*o[1]}var a=pi.layout.hierarchy().sort(null).value(null),i=oa,o=[1,1],u=null;return t.separation=function(n){return arguments.length?(i=n,t):i},t.size=function(n){return arguments.length?(u=null==(o=n)?r:null,t):u?null:o},t.nodeSize=function(n){return arguments.length?(u=null==(o=n)?null:r,t):u?o:null},jr(t,a)},pi.layout.cluster=function(){function t(t,i){var o,u=n.call(this,t,i),s=u[0],l=0;Lr(s,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}(n),t.y=function(t){return 1+pi.max(t,function(t){return t.y})}(n)):(t.x=o?l+=e(t,o):0,t.y=0,o=t)});var c=function t(n){var e=n.children;return e&&e.length?t(e[0]):n}(s),h=function t(n){var e,r=n.children;return r&&(e=r.length)?t(r[e-1]):n}(s),f=c.x-e(c,h)/2,p=h.x+e(h,c)/2;return Lr(s,a?function(t){t.x=(t.x-s.x)*r[0],t.y=(s.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),u}var n=pi.layout.hierarchy().sort(null).value(null),e=oa,r=[1,1],a=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(a=null==(r=n),t):a?null:r},t.nodeSize=function(n){return arguments.length?(a=null!=(r=n),t):a?r:null},jr(t,n)},pi.layout.treemap=function(){function t(t,n){for(var e,r,a=-1,i=t.length;++a<i;)r=(e=t[a]).value*(0>n?0:n),e.area=isNaN(r)||0>=r?0:r}function n(e){var i=e.children;if(i&&i.length){var o,u,s,l=h(e),c=[],f=i.slice(),d=1/0,g="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/e.value),c.area=0;(s=f.length)>0;)c.push(o=f[s-1]),c.area+=o.area,"squarify"!==p||(u=r(c,g))<=d?(f.pop(),d=u):(c.area-=c.pop().area,a(c,g,l,!1),g=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(a(c,g,l,!0),c.length=c.area=0),i.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var i,o=h(n),u=r.slice(),s=[];for(t(u,o.dx*o.dy/n.value),s.area=0;i=u.pop();)s.push(i),s.area+=i.area,null!=i.z&&(a(s,i.z?o.dx:o.dy,o,!u.length),s.length=s.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,a=0,i=1/0,o=-1,u=t.length;++o<u;)(e=t[o].area)&&(i>e&&(i=e),e>a&&(a=e));return n*=n,(r*=r)?Math.max(n*a*d/r,r/(n*i*d)):1/0}function a(t,n,e,r){var a,i=-1,o=t.length,u=e.x,l=e.y,c=n?s(t.area/n):0;if(n==e.dx){for((r||c>e.dy)&&(c=e.dy);++i<o;)(a=t[i]).x=u,a.y=l,a.dy=c,u+=a.dx=Math.min(e.x+e.dx-u,c?s(a.area/c):0);a.z=!0,a.dx+=e.x+e.dx-u,e.y+=c,e.dy-=c}else{for((r||c>e.dx)&&(c=e.dx);++i<o;)(a=t[i]).x=u,a.y=l,a.dx=c,l+=a.dy=Math.min(e.y+e.dy-l,c?s(a.area/c):0);a.z=!1,a.dy+=e.y+e.dy-l,e.x+=c,e.dx-=c}}function i(r){var a=o||u(r),i=a[0];return i.x=i.y=0,i.value?(i.dx=l[0],i.dy=l[1]):i.dx=i.dy=0,o&&u.revalue(i),t([i],i.dx*i.dy/i.value),(o?e:n)(i),f&&(o=a),a}var o,u=pi.layout.hierarchy(),s=Math.round,l=[1,1],c=null,h=ha,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(l=t,i):l},i.padding=function(t){function n(n){var e=t.call(i,n,n.depth);return null==e?ha(n):fa(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return fa(n,t)}return arguments.length?(h=null==(c=t)?ha:"function"==(r=typeof t)?n:"number"===r?(t=[t,t,t,t],e):e,i):c;var r},i.round=function(t){return arguments.length?(s=t?Math.round:Number,i):s!=Number},i.sticky=function(t){return arguments.length?(f=t,o=null,i):f},i.ratio=function(t){return arguments.length?(d=t,i):d},i.mode=function(t){return arguments.length?(p=t+"",i):p},jr(i,u)},pi.random={normal:function(t,n){var e=arguments.length;return 2>e&&(n=1),1>e&&(t=0),function(){var e,r,a;do{a=(e=2*Math.random()-1)*e+(r=2*Math.random()-1)*r}while(!a||a>1);return t+n*e*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=pi.random.normal.apply(pi,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=pi.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;t>e;e++)n+=Math.random();return n}}},pi.scale={};var qu={floor:k,ceil:k};pi.scale.linear=function(){return function t(n,e,r,a){function i(){var t=Math.min(n.length,e.length)>2?ma:ga,i=a?zr:qr;return u=t(n,e,i,r),s=t(e,n,i,sr),o}function o(t){return u(t)}var u,s;return o.invert=function(t){return s(t)},o.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(br)},o.clamp=function(t){return arguments.length?(a=t,i()):a},o.interpolate=function(t){return arguments.length?(r=t,i()):r},o.ticks=function(t){return wa(n,t)},o.tickFormat=function(t,e){return ka(n,t,e)},o.nice=function(t){return ba(n,t),i()},o.copy=function(){return t(n,e,r,a)},i()}([0,1],[0,1],sr,!1)};var zu={s:1,g:1,p:1,r:1,e:1};pi.scale.log=function(){return function t(n,e,r,a){function i(t){return(r?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return r?Math.pow(e,t):-Math.pow(e,-t)}function u(t){return n(i(t))}return u.invert=function(t){return o(n.invert(t))},u.domain=function(t){return arguments.length?(r=t[0]>=0,n.domain((a=t.map(Number)).map(i)),u):a},u.base=function(t){return arguments.length?(e=+t,n.domain(a.map(i)),u):e},u.nice=function(){var t=va(a.map(i),r?Math:Au);return n.domain(t),a=t.map(o),u},u.ticks=function(){var t=pa(a),n=[],u=t[0],s=t[1],l=Math.floor(i(u)),c=Math.ceil(i(s)),h=e%1?2:e;if(isFinite(c-l)){if(r){for(;c>l;l++)for(var f=1;h>f;f++)n.push(o(l)*f);n.push(o(l))}else for(n.push(o(l));l++<c;)for(f=h-1;f>0;f--)n.push(o(l)*f);for(l=0;n[l]<u;l++);for(c=n.length;n[c-1]>s;c--);n=n.slice(l,c)}return n},u.tickFormat=function(t,n){if(!arguments.length)return Eu;arguments.length<2?n=Eu:"function"!=typeof n&&(n=pi.format(n));var r=Math.max(1,e*t/u.ticks().length);return function(t){var a=t/o(Math.round(i(t)));return e-.5>a*e&&(a*=e),r>=a?n(t):""}},u.copy=function(){return t(n.copy(),e,r,a)},ya(u,n)}(pi.scale.linear().domain([0,1]),10,!0,[1,10])};var Eu=pi.format(".0e"),Au={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};pi.scale.pow=function(){return function t(n,e,r){function a(t){return n(i(t))}var i=_a(e),o=_a(1/e);return a.invert=function(t){return o(n.invert(t))},a.domain=function(t){return arguments.length?(n.domain((r=t.map(Number)).map(i)),a):r},a.ticks=function(t){return wa(r,t)},a.tickFormat=function(t,n){return ka(r,t,n)},a.nice=function(t){return a.domain(ba(r,t))},a.exponent=function(t){return arguments.length?(i=_a(e=t),o=_a(1/e),n.domain(r.map(i)),a):e},a.copy=function(){return t(n.copy(),e,r)},ya(a,n)}(pi.scale.linear(),1,[0,1])},pi.scale.sqrt=function(){return pi.scale.pow().exponent(.5)},pi.scale.ordinal=function(){return function t(n,e){function r(t){return o[((i.get(t)||("range"===e.t?i.set(t,n.push(t)):NaN))-1)%o.length]}function a(t,e){return pi.range(n.length).map(function(n){return t+e*n})}var i,o,u;return r.domain=function(t){if(!arguments.length)return n;n=[],i=new d;for(var a,o=-1,u=t.length;++o<u;)i.has(a=t[o])||i.set(a,n.push(a));return r[e.t].apply(r,e.a)},r.range=function(t){return arguments.length?(o=t,u=0,e={t:"range",a:arguments},r):o},r.rangePoints=function(t,i){arguments.length<2&&(i=0);var s=t[0],l=t[1],c=n.length<2?(s=(s+l)/2,0):(l-s)/(n.length-1+i);return o=a(s+c*i/2,c),u=0,e={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(t,i){arguments.length<2&&(i=0);var s=t[0],l=t[1],c=n.length<2?(s=l=Math.round((s+l)/2),0):(l-s)/(n.length-1+i)|0;return o=a(s+Math.round(c*i/2+(l-s-(n.length-1+i)*c)/2),c),u=0,e={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(t,i,s){arguments.length<2&&(i=0),arguments.length<3&&(s=i);var l=t[1]<t[0],c=t[l-0],h=t[1-l],f=(h-c)/(n.length-i+2*s);return o=a(c+f*s,f),l&&o.reverse(),u=f*(1-i),e={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(t,i,s){arguments.length<2&&(i=0),arguments.length<3&&(s=i);var l=t[1]<t[0],c=t[l-0],h=t[1-l],f=Math.floor((h-c)/(n.length-i+2*s));return o=a(c+Math.round((h-c-(n.length-i)*f)/2),f),l&&o.reverse(),u=Math.round(f*(1-i)),e={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return u},r.rangeExtent=function(){return pa(e.a[0])},r.copy=function(){return t(n,e)},r.domain(n)}([],{t:"range",a:[[]]})},pi.scale.category10=function(){return pi.scale.ordinal().range(Nu)},pi.scale.category20=function(){return pi.scale.ordinal().range(Tu)},pi.scale.category20b=function(){return pi.scale.ordinal().range(Pu)},pi.scale.category20c=function(){return pi.scale.ordinal().range(Cu)};var Nu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wt),Tu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wt),Pu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wt),Cu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(wt);pi.scale.quantile=function(){return function t(n,e){function r(){var t=0,r=e.length;for(i=[];++t<r;)i[t-1]=pi.quantile(n,t/r);return a}function a(t){return isNaN(t=+t)?void 0:e[pi.bisect(i,t)]}var i;return a.domain=function(t){return arguments.length?(n=t.map(s).filter(l).sort(u),r()):n},a.range=function(t){return arguments.length?(e=t,r()):e},a.quantiles=function(){return i},a.invertExtent=function(t){return 0>(t=e.indexOf(t))?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.copy=function(){return t(n,e)},r()}([],[])},pi.scale.quantize=function(){return function t(n,e,r){function a(t){return r[Math.max(0,Math.min(u,Math.floor(o*(t-n))))]}function i(){return o=r.length/(e-n),u=r.length-1,a}var o,u;return a.domain=function(t){return arguments.length?(n=+t[0],e=+t[t.length-1],i()):[n,e]},a.range=function(t){return arguments.length?(r=t,i()):r},a.invertExtent=function(t){return[t=0>(t=r.indexOf(t))?NaN:t/o+n,t+1/o]},a.copy=function(){return t(n,e,r)},i()}(0,1,[0,1])},pi.scale.threshold=function(){return function t(n,e){function r(t){return t>=t?e[pi.bisect(n,t)]:void 0}return r.domain=function(t){return arguments.length?(n=t,r):n},r.range=function(t){return arguments.length?(e=t,r):e},r.invertExtent=function(t){return t=e.indexOf(t),[n[t-1],n[t]]},r.copy=function(){return t(n,e)},r}([.5],[0,1])},pi.scale.identity=function(){return function t(n){function e(t){return+t}return e.invert=e,e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n},e.ticks=function(t){return wa(n,t)},e.tickFormat=function(t,e){return ka(n,t,e)},e.copy=function(){return t(n)},e}([0,1])},pi.svg={},pi.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-Bi,h=u.apply(this,arguments)-Bi,f=Math.abs(h-c),p=c>h?0:1;if(t>l&&(d=l,l=t,t=d),f>=Yi)return n(l,p)+(t?n(t,1-p):"")+"Z";var d,g,v,M,m,y,b,x,w,k,S,_,q=0,z=0,E=[];if((M=(+s.apply(this,arguments)||0)/2)&&(v=i===ju?Math.sqrt(t*t+l*l):+i.apply(this,arguments),p||(z*=-1),l&&(z=ot(v/l*Math.sin(M))),t&&(q=ot(v/t*Math.sin(M)))),l){m=l*Math.cos(c+z),y=l*Math.sin(c+z),b=l*Math.cos(h-z),x=l*Math.sin(h-z);var A=Math.abs(h-c-2*z)<=Hi?0:1;if(z&&Pa(m,y,b,x)===p^A){var N=(c+h)/2;m=l*Math.cos(N),y=l*Math.sin(N),b=x=null}}else m=y=0;if(t){w=t*Math.cos(h-q),k=t*Math.sin(h-q),S=t*Math.cos(c+q),_=t*Math.sin(c+q);var T=Math.abs(c-h+2*q)<=Hi?0:1;if(q&&Pa(w,k,S,_)===1-p^T){var P=(c+h)/2;w=t*Math.cos(P),k=t*Math.sin(P),S=_=null}}else w=k=0;if(f>Oi&&(d=Math.min(Math.abs(l-t)/2,+a.apply(this,arguments)))>.001){g=l>t^p?0:1;var C=d,j=d;if(Hi>f){var I=null==S?[w,k]:null==b?[m,y]:qe([m,y],[S,_],[b,x],[w,k]),L=m-I[0],D=y-I[1],R=b-I[0],F=x-I[1],O=1/Math.sin(Math.acos((L*R+D*F)/(Math.sqrt(L*L+D*D)*Math.sqrt(R*R+F*F)))/2),U=Math.sqrt(I[0]*I[0]+I[1]*I[1]);j=Math.min(d,(t-U)/(O-1)),C=Math.min(d,(l-U)/(O+1))}if(null!=b){var H=Ca(null==S?[w,k]:[S,_],[m,y],l,C,p),Q=Ca([b,x],[w,k],l,C,p);d===C?E.push("M",H[0],"A",C,",",C," 0 0,",g," ",H[1],"A",l,",",l," 0 ",1-p^Pa(H[1][0],H[1][1],Q[1][0],Q[1][1]),",",p," ",Q[1],"A",C,",",C," 0 0,",g," ",Q[0]):E.push("M",H[0],"A",C,",",C," 0 1,",g," ",Q[0])}else E.push("M",m,",",y);if(null!=S){var Y=Ca([m,y],[S,_],t,-j,p),B=Ca([w,k],null==b?[m,y]:[b,x],t,-j,p);d===j?E.push("L",B[0],"A",j,",",j," 0 0,",g," ",B[1],"A",t,",",t," 0 ",p^Pa(B[1][0],B[1][1],Y[1][0],Y[1][1]),",",1-p," ",Y[1],"A",j,",",j," 0 0,",g," ",Y[0]):E.push("L",B[0],"A",j,",",j," 0 0,",g," ",Y[0])}else E.push("L",w,",",k)}else E.push("M",m,",",y),null!=b&&E.push("A",l,",",l," 0 ",A,",",p," ",b,",",x),E.push("L",w,",",k),null!=S&&E.push("A",t,",",t," 0 ",T,",",1-p," ",S,",",_);return E.push("Z"),E.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=za,r=Ea,a=qa,i=ju,o=Aa,u=Na,s=Ta;return t.innerRadius=function(n){return arguments.length?(e=At(n),t):e},t.outerRadius=function(n){return arguments.length?(r=At(n),t):r},t.cornerRadius=function(n){return arguments.length?(a=At(n),t):a},t.padRadius=function(n){return arguments.length?(i=n==ju?ju:At(n),t):i},t.startAngle=function(n){return arguments.length?(o=At(n),t):o},t.endAngle=function(n){return arguments.length?(u=At(n),t):u},t.padAngle=function(n){return arguments.length?(s=At(n),t):s},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-Bi;return[Math.cos(n)*t,Math.sin(n)*t]},t};var ju="auto";pi.svg.line=function(){return ja(k)};var Iu=pi.map({linear:Ia,"linear-closed":La,step:function(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&a.push("H",r[0]),a.join("")},"step-before":Da,"step-after":Ra,basis:Ua,"basis-open":function(t){if(t.length<4)return Ia(t);for(var n,e=[],r=-1,a=t.length,i=[0],o=[0];++r<3;)n=t[r],i.push(n[0]),o.push(n[1]);for(e.push(Ha(Ru,i)+","+Ha(Ru,o)),--r;++r<a;)n=t[r],i.shift(),i.push(n[0]),o.shift(),o.push(n[1]),Qa(e,i,o);return e.join("")},"basis-closed":function(t){for(var n,e,r=-1,a=t.length,i=a+4,o=[],u=[];++r<4;)e=t[r%a],o.push(e[0]),u.push(e[1]);for(n=[Ha(Ru,o),",",Ha(Ru,u)],--r;++r<i;)e=t[r%a],o.shift(),o.push(e[0]),u.shift(),u.push(e[1]),Qa(n,o,u);return n.join("")},bundle:function(t,n){var e=t.length-1;if(e)for(var r,a,i=t[0][0],o=t[0][1],u=t[e][0]-i,s=t[e][1]-o,l=-1;++l<=e;)a=l/e,(r=t[l])[0]=n*r[0]+(1-n)*(i+a*u),r[1]=n*r[1]+(1-n)*(o+a*s);return Ua(t)},cardinal:function(t,n){return t.length<3?Ia(t):t[0]+Fa(t,Oa(t,n))},"cardinal-open":function(t,n){return t.length<4?Ia(t):t[1]+Fa(t.slice(1,-1),Oa(t,n))},"cardinal-closed":function(t,n){return t.length<3?La(t):t[0]+Fa((t.push(t[0]),t),Oa([t[t.length-2]].concat(t,[t[1]]),n))},monotone:function(t){return t.length<3?Ia(t):t[0]+Fa(t,Ba(t))}});Iu.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Lu=[0,2/3,1/3,0],Du=[0,1/3,2/3,0],Ru=[0,1/6,2/3,1/6];pi.svg.line.radial=function(){var t=ja(Va);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Da.reverse=Ra,Ra.reverse=Da,pi.svg.area=function(){return Wa(k)},pi.svg.area.radial=function(){var t=Wa(Va);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},pi.svg.chord=function(){function t(t,o){var u=n(this,a,t,o),s=n(this,i,t,o);return"M"+u.p0+e(u.r,u.p1,u.a1-u.a0)+(function(t,n){return t.a0==n.a0&&t.a1==n.a1}(u,s)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,s.r,s.p0)+e(s.r,s.p1,s.a1-s.a0)+r(s.r,s.p1,u.r,u.p0))+"Z"}function n(t,n,e,r){var a=n.call(t,e,r),i=o.call(t,a,r),l=u.call(t,a,r)-Bi,c=s.call(t,a,r)-Bi;return{r:i,a0:l,a1:c,p0:[i*Math.cos(l),i*Math.sin(l)],p1:[i*Math.cos(c),i*Math.sin(c)]}}function e(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Hi)+",1 "+n}function r(t,n,e,r){return"Q 0,0 "+r}var a=pe,i=de,o=Ga,u=Aa,s=Na;return t.radius=function(n){return arguments.length?(o=At(n),t):o},t.source=function(n){return arguments.length?(a=At(n),t):a},t.target=function(n){return arguments.length?(i=At(n),t):i},t.startAngle=function(n){return arguments.length?(u=At(n),t):u},t.endAngle=function(n){return arguments.length?(s=At(n),t):s},t},pi.svg.diagonal=function(){function t(t,a){var i=n.call(this,t,a),o=e.call(this,t,a),u=(i.y+o.y)/2,s=[i,{x:i.x,y:u},{x:o.x,y:u},o];return"M"+(s=s.map(r))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var n=pe,e=de,r=Za;return t.source=function(e){return arguments.length?(n=At(e),t):n},t.target=function(n){return arguments.length?(e=At(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},pi.svg.diagonal.radial=function(){var t=pi.svg.diagonal(),n=Za,e=t.projection;return t.projection=function(t){return arguments.length?e($a(n=t)):n},t},pi.svg.symbol=function(){function t(t,r){return(Fu.get(n.call(this,t,r))||Ka)(e.call(this,t,r))}var n=Ja,e=Xa;return t.type=function(e){return arguments.length?(n=At(e),t):n},t.size=function(n){return arguments.length?(e=At(n),t):e},t};var Fu=pi.map({circle:Ka,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Uu)),e=n*Uu;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Ou),e=n*Ou/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Ou),e=n*Ou/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});pi.svg.symbolTypes=Fu.keys();var Ou=Math.sqrt(3),Uu=Math.tan(30*Vi);Pi.transition=function(t){for(var n,e,r=Hu||++Vu,a=ai(t),i=[],o=Qu||{time:Date.now(),ease:gr,delay:0,duration:250},u=-1,s=this.length;++u<s;){i.push(n=[]);for(var l=this[u],c=-1,h=l.length;++c<h;)(e=l[c])&&ii(e,c,a,r,o),n.push(e)}return ni(i,a,r)},Pi.interrupt=function(t){return this.each(null==t?Yu:ti(ai(t)))};var Hu,Qu,Yu=ti(ai()),Bu=[],Vu=0;Bu.call=Pi.call,Bu.empty=Pi.empty,Bu.node=Pi.node,Bu.size=Pi.size,pi.transition=function(t,n){return t&&t.transition?Hu?t.transition(n):t:pi.selection().transition(t)},pi.transition.prototype=Bu,Bu.select=function(t){var n,e,r,a=this.id,i=this.namespace,o=[];t=C(t);for(var u=-1,s=this.length;++u<s;){o.push(n=[]);for(var l=this[u],c=-1,h=l.length;++c<h;)(r=l[c])&&(e=t.call(r,r.__data__,c,u))?("__data__"in r&&(e.__data__=r.__data__),ii(e,c,i,a,r[i][a]),n.push(e)):n.push(null)}return ni(o,i,a)},Bu.selectAll=function(t){var n,e,r,a,i,o=this.id,u=this.namespace,s=[];t=j(t);for(var l=-1,c=this.length;++l<c;)for(var h=this[l],f=-1,p=h.length;++f<p;)if(r=h[f]){i=r[u][o],e=t.call(r,r.__data__,f,l),s.push(n=[]);for(var d=-1,g=e.length;++d<g;)(a=e[d])&&ii(a,d,u,o,i),n.push(a)}return ni(s,u,o)},Bu.filter=function(t){var n,e,r=[];"function"!=typeof t&&(t=V(t));for(var a=0,i=this.length;i>a;a++){r.push(n=[]);for(var o,u=0,s=(o=this[a]).length;s>u;u++)(e=o[u])&&t.call(e,e.__data__,u,a)&&n.push(e)}return ni(r,this.namespace,this.id)},Bu.tween=function(t,n){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(t):G(this,null==n?function(n){n[r][e].tween.remove(t)}:function(a){a[r][e].tween.set(t,n)})},Bu.attr=function(t,n){function e(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function a(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(u);return e!==t&&(n=o(e,t),function(t){this.setAttribute(u,n(t))})})}function i(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(u.space,u.local);return e!==t&&(n=o(e,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var o="transform"==t?_r:sr,u=pi.ns.qualify(t);return ei(this,"attr."+t,n,u.local?i:a)},Bu.attrTween=function(t,n){var e=pi.ns.qualify(t);return this.tween("attr."+t,e.local?function(t,r){var a=n.call(this,t,r,this.getAttributeNS(e.space,e.local));return a&&function(t){this.setAttributeNS(e.space,e.local,a(t))}}:function(t,r){var a=n.call(this,t,r,this.getAttribute(e));return a&&function(t){this.setAttribute(e,a(t))}})},Bu.style=function(t,n,e){function r(){this.style.removeProperty(t)}function a(n){return null==n?r:(n+="",function(){var r,a=o(this).getComputedStyle(this,null).getPropertyValue(t);return a!==n&&(r=sr(a,n),function(n){this.style.setProperty(t,r(n),e)})})}var i=arguments.length;if(3>i){if("string"!=typeof t){for(e in 2>i&&(n=""),t)this.style(e,t[e],n);return this}e=""}return ei(this,"style."+t,n,a)},Bu.styleTween=function(t,n,e){function r(r,a){var i=n.call(this,r,a,o(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(n){this.style.setProperty(t,i(n),e)}}return arguments.length<3&&(e=""),this.tween("style."+t,r)},Bu.text=function(t){return ei(this,"text",t,ri)},Bu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Bu.ease=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].ease:("function"!=typeof t&&(t=pi.ease.apply(pi,arguments)),G(this,function(r){r[e][n].ease=t}))},Bu.delay=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].delay:G(this,"function"==typeof t?function(r,a,i){r[e][n].delay=+t.call(r,r.__data__,a,i)}:(t=+t,function(r){r[e][n].delay=t}))},Bu.duration=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].duration:G(this,"function"==typeof t?function(r,a,i){r[e][n].duration=Math.max(1,t.call(r,r.__data__,a,i))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},Bu.each=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2){var a=Qu,i=Hu;try{Hu=e,G(this,function(n,a,i){Qu=n[r][e],t.call(n,n.__data__,a,i)})}finally{Qu=a,Hu=i}}else G(this,function(a){var i=a[r][e];(i.event||(i.event=pi.dispatch("start","end","interrupt"))).on(t,n)});return this},Bu.transition=function(){for(var t,n,e,r=this.id,a=++Vu,i=this.namespace,o=[],u=0,s=this.length;s>u;u++){o.push(t=[]);for(var l,c=0,h=(l=this[u]).length;h>c;c++)(n=l[c])&&ii(n,c,i,a,{time:(e=n[i][r]).time,ease:e.ease,delay:e.delay+e.duration,duration:e.duration}),t.push(n)}return ni(o,i,a)},pi.svg.axis=function(){function t(t){t.each(function(){var t,l=pi.select(this),c=this.__chart__||e,h=this.__chart__=e.copy(),f=null==s?h.ticks?h.ticks.apply(h,u):h.domain():s,p=null==n?h.tickFormat?h.tickFormat.apply(h,u):k:n,d=l.selectAll(".tick").data(f,h),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Oi),v=pi.transition(d.exit()).style("opacity",Oi).remove(),M=pi.transition(d.order()).style("opacity",1),m=Math.max(a,0)+o,y=da(h),b=l.selectAll(".domain").data([0]),x=(b.enter().append("path").attr("class","domain"),pi.transition(b));g.append("line"),g.append("text");var w,S,_,q,z=g.select("line"),E=M.select("line"),A=d.select("text").text(p),N=g.select("text"),T=M.select("text"),P="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=oi,w="x",_="y",S="x2",q="y2",A.attr("dy",0>P?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+y[0]+","+P*i+"V0H"+y[1]+"V"+P*i)):(t=ui,w="y",_="x",S="y2",q="x2",A.attr("dy",".32em").style("text-anchor",0>P?"end":"start"),x.attr("d","M"+P*i+","+y[0]+"H0V"+y[1]+"H"+P*i)),z.attr(q,P*a),N.attr(_,P*m),E.attr(S,0).attr(q,P*a),T.attr(w,0).attr(_,P*m),h.rangeBand){var C=h,j=C.rangeBand()/2;c=h=function(t){return C(t)+j}}else c.rangeBand?c=h:v.call(t,h,c);g.call(t,c,h),M.call(t,h,h)})}var n,e=pi.scale.linear(),r=Wu,a=6,i=6,o=3,u=[10],s=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in Gu?n+"":Wu,t):r},t.ticks=function(){return arguments.length?(u=gi(arguments),t):u},t.tickValues=function(n){return arguments.length?(s=n,t):s},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(a=+n,i=+arguments[e-1],t):a},t.innerTickSize=function(n){return arguments.length?(a=+n,t):a},t.outerTickSize=function(n){return arguments.length?(i=+n,t):i},t.tickPadding=function(n){return arguments.length?(o=+n,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Wu="bottom",Gu={top:1,right:1,bottom:1,left:1};pi.svg.brush=function(){function t(i){i.each(function(){var i=pi.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=i.selectAll(".resize").data(g,k);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Zu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var s,h=pi.transition(i),f=pi.transition(o);l&&(s=da(l),f.attr("x",s[0]).attr("width",s[1]-s[0]),e(h)),c&&(s=da(c),f.attr("y",s[0]).attr("height",s[1]-s[0]),r(h)),n(h)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function e(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function a(){function a(){var t=pi.mouse(y),a=!1;m&&(t[0]+=m[0],t[1]+=m[1]),q||(pi.event.altKey?(M||(M=[(h[0]+h[1])/2,(f[0]+f[1])/2]),E[0]=h[+(t[0]<M[0])],E[1]=f[+(t[1]<M[1])]):M=null),S&&g(t,l,0)&&(e(w),a=!0),_&&g(t,c,1)&&(r(w),a=!0),a&&(n(w),x({type:"brush",mode:q?"move":"resize"}))}function g(t,n,e){var r,a,o=da(n),s=o[0],l=o[1],c=E[e],g=e?f:h,v=g[1]-g[0];return q&&(s-=c,l-=v+c),r=(e?d:p)?Math.max(s,Math.min(l,t[e])):t[e],q?a=(r+=c)+v:(M&&(c=Math.max(s,Math.min(l,2*M[e]-r))),r>c?(a=r,r=c):a=c),g[0]!=r||g[1]!=a?(e?u=null:i=null,g[0]=r,g[1]=a,!0):void 0}function v(){a(),w.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),pi.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),x({type:"brushend"})}var M,m,y=this,b=pi.select(pi.event.target),x=s.of(y,arguments),w=pi.select(y),k=b.datum(),S=!/^(n|s)$/.test(k)&&l,_=!/^(e|w)$/.test(k)&&c,q=b.classed("extent"),z=tt(y),E=pi.mouse(y),N=pi.select(o(y)).on("keydown.brush",function(){32==pi.event.keyCode&&(q||(M=null,E[0]-=h[1],E[1]-=f[1],q=2),A())}).on("keyup.brush",function(){32==pi.event.keyCode&&2==q&&(E[0]+=h[1],E[1]+=f[1],q=0,A())});if(pi.event.changedTouches?N.on("touchmove.brush",a).on("touchend.brush",v):N.on("mousemove.brush",a).on("mouseup.brush",v),w.interrupt().selectAll("*").interrupt(),q)E[0]=h[0]-E[0],E[1]=f[0]-E[1];else if(k){var T=+/w$/.test(k),P=+/^n/.test(k);m=[h[1-T]-E[0],f[1-P]-E[1]],E[0]=h[T],E[1]=f[P]}else pi.event.altKey&&(M=E.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),pi.select("body").style("cursor",b.style("cursor")),x({type:"brushstart"}),a()}var i,u,s=T(t,"brushstart","brush","brushend"),l=null,c=null,h=[0,0],f=[0,0],p=!0,d=!0,g=$u[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),n={x:h,y:f,i:i,j:u},e=this.__chart__||n;this.__chart__=n,Hu?pi.select(this).transition().each("start.brush",function(){i=e.i,u=e.j,h=e.x,f=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=lr(h,n.x),r=lr(f,n.y);return i=u=null,function(a){h=n.x=e(a),f=n.y=r(a),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=n.i,u=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(g=$u[!(l=n)<<1|!c],t):l},t.y=function(n){return arguments.length?(g=$u[!l<<1|!(c=n)],t):c},t.clamp=function(n){return arguments.length?(l&&c?(p=!!n[0],d=!!n[1]):l?p=!!n:c&&(d=!!n),t):l&&c?[p,d]:l?p:c?d:null},t.extent=function(n){var e,r,a,o,s;return arguments.length?(l&&(e=n[0],r=n[1],c&&(e=e[0],r=r[0]),i=[e,r],l.invert&&(e=l(e),r=l(r)),e>r&&(s=e,e=r,r=s),e==h[0]&&r==h[1]||(h=[e,r])),c&&(a=n[0],o=n[1],l&&(a=a[1],o=o[1]),u=[a,o],c.invert&&(a=c(a),o=c(o)),a>o&&(s=a,a=o,o=s),a==f[0]&&o==f[1]||(f=[a,o])),t):(l&&(i?(e=i[0],r=i[1]):(e=h[0],r=h[1],l.invert&&(e=l.invert(e),r=l.invert(r)),e>r&&(s=e,e=r,r=s))),c&&(u?(a=u[0],o=u[1]):(a=f[0],o=f[1],c.invert&&(a=c.invert(a),o=c.invert(o)),a>o&&(s=a,a=o,o=s))),l&&c?[[e,a],[r,o]]:l?[e,r]:c&&[a,o])},t.clear=function(){return t.empty()||(h=[0,0],f=[0,0],i=u=null),t},t.empty=function(){return!!l&&h[0]==h[1]||!!c&&f[0]==f[1]},pi.rebind(t,s,"on")};var Zu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$u=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xu=vo.format=wo.timeFormat,Ju=Xu.utc,Ku=Ju("%Y-%m-%dT%H:%M:%S.%LZ");Xu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?si:Ku,si.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},si.toString=Ku.toString,vo.second=Ot(function(t){return new Mo(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),vo.seconds=vo.second.range,vo.seconds.utc=vo.second.utc.range,vo.minute=Ot(function(t){return new Mo(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),vo.minutes=vo.minute.range,vo.minutes.utc=vo.minute.utc.range,vo.hour=Ot(function(t){var n=t.getTimezoneOffset()/60;return new Mo(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),vo.hours=vo.hour.range,vo.hours.utc=vo.hour.utc.range,vo.month=Ot(function(t){return(t=vo.day(t)).setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),vo.months=vo.month.range,vo.months.utc=vo.month.utc.range;var ts=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ns=[[vo.second,1],[vo.second,5],[vo.second,15],[vo.second,30],[vo.minute,1],[vo.minute,5],[vo.minute,15],[vo.minute,30],[vo.hour,1],[vo.hour,3],[vo.hour,6],[vo.hour,12],[vo.day,1],[vo.day,2],[vo.week,1],[vo.month,1],[vo.month,3],[vo.year,1]],es=Xu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",An]]),rs={range:function(t,n,e){return pi.range(Math.ceil(t/e)*e,+n,e).map(ci)},floor:k,ceil:k};ns.year=vo.year,vo.scale=function(){return li(pi.scale.linear(),ns,es)};var as=ns.map(function(t){return[t[0].utc,t[1]]}),is=Ju.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",An]]);as.year=vo.year.utc,vo.scale.utc=function(){return li(pi.scale.linear(),as,is)},pi.text=Nt(function(t){return t.responseText}),pi.json=function(t,n){return Tt(t,"application/json",hi,n)},pi.html=function(t,n){return Tt(t,"text/html",fi,n)},pi.xml=Nt(function(t){return t.responseXML}),this.d3=pi,void 0===(a="function"==typeof(r=pi)?r.call(n,e,n,t):r)||(t.exports=a)}()},bnYU:function(t,n,e){"use strict";e.d(n,"a",function(){return r});var r={gg:"#8B1A1A",g:"#C62828",s:"#D32F2F",s0:"#E53935",sd:"#F44336",e:"#EF5350",i:"#E57373",oc:"#FF4626",gc:"#ff9900",en:"#64DD17",bn:"#1E88E5",bpn:"#ffffff",sfr:"#EEFF41",rn:"#00E5FF",pn:"#00BFA5",snr:"#1838CC",dn:"#5E35B1",pos:"#cccccc",sc:"#ffffff",vn:"#ffffff"}},dw4P:function(t,n,e){!function(){function n(t,n){return e(t.map(function(t){return t*W}),n).map(function(t){return t/W})}function e(t,n){var e,r,a,i,o,u,s,l,c;return n?(0>(u=t[0])&&(u+=B),s=t[1],u-=n[0],i=n[1],o=n[2],e=Math.sin(s)*Math.sin(i)-Math.cos(s)*Math.cos(i)*Math.cos(u),Math.abs(e)<1e-5&&(e=-Math.cos(s+i)+Math.cos(s)*Math.cos(i)*(1-Math.cos(u))),r=-Math.cos(s)*Math.sin(u),(l=o+(0!==e||0!==r?Math.atan2(r,e):u-Math.PI))>Math.PI&&(l-=B),u%Math.PI==0?((c=s+Math.cos(u)*i)>V&&(c=Math.PI-c),-V>c&&(c=-Math.PI-c)):(a=Math.sin(s)*Math.cos(i)+Math.cos(s)*Math.sin(i)*Math.cos(u),Math.abs(a)>.99?(c=Math.abs(Math.acos(Math.sqrt(e*e+r*r))),0>a&&(c*=-1)):c=Math.asin(a)),[l,c]):t}function r(t,n){var e=t.getUTCFullYear(),r=t.getUTCMonth()+1,a=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),u=t.getUTCSeconds();(1==r||2==r)&&(e-=1,r+=12);var s=Math.floor(e/100),l=2-s+Math.floor(s/4)+Math.floor(365.25*e)+Math.floor(30.6001*(r+1))-730550.5+a+(i+o/60+u/3600)/24,c=l/36525,h=280.46061837+360.98564736629*l+387933e-9*c*c-c*c*c/3871e4+n;if(h>0)for(;h>360;)h-=360;else for(;0>h;)h+=360;return h}function a(t,n){if("equatorial"===n)return t;for(var e=G[n],r=t.features,a=0;a<r.length;a++)r[a].geometry.coordinates=o(r[a],e);return t}function i(t){var n=[];for(var e in t)if(g(t,e)&&-1!==N.planets.which.indexOf(e)){var r=st().id(e);g(t[e],"parent")&&r.parentBody(t[e].parent),r.elements(t[e].elements[0]),"ter"===e?I.origin=r:n.push(r)}return n.push(st().id("sol")),n.push(st().id("lun")),n}function o(t,e){var r=[];switch(t.geometry.type){case"Point":r=n(t.geometry.coordinates,e);break;case"LineString":r.push(l(t.geometry.coordinates,e));break;case"MultiLineString":r=c(t.geometry.coordinates,e);break;case"Polygon":r.push(l(t.geometry.coordinates[0],e));break;case"MultiPolygon":r.push(c(t.geometry.coordinates[0],e))}return r}function u(t,n){var e=[];if(!n)return[];M(n)||(n=[n]);for(var r=0;r<n.length;r++)switch(n[r]){case"center":e=e.concat("lat"===t?s(t,N.center[0],"N"):s(t,N.center[1],"S"));break;case"outline":"lon"===t?e=(e=e.concat(s(t,N.center[1]-89.99,"S"))).concat(s(t,N.center[1]+89.99),"N"):e=(e=e.concat(s(t,N.center[0]-179.99,"E"))).concat(s(t,N.center[0]+179.99,"W"));break;default:if(v(n[r])){e=e.concat(s(t,n[r],"lat"===t?"N":"S"));break}}return function(t){for(var n=[],e=0;e<t.length;e++){var r={type:"Feature",id:e,properties:{},geometry:{type:"Point"}};r.properties.value=t[e].value,r.properties.orientation=t[e].orientation,r.geometry.coordinates=t[e].coordinates,n.push(r)}return n}(e)}function s(t,n,e){var r,a,i,o,u,s=t,l=[],c=n;"equatorial"===N.transform&&"lon"===s&&(s="ra"),"ra"===s?(r=0,a=23,i=1):"lon"===s?(r=0,a=350,i=10):(r=-80,a=80,i=10);for(var h=r;a>=h;h+=i){var f=e;"lat"===s?(u=[c,h],o=h.toString()+"",f+=0>h?"S":"N"):"ra"===s?(u=[15*h,c],o=h.toString()+""):(u=[h,c],o=h.toString()+""),l.push({coordinates:u,value:o,orientation:f})}return l}function l(t,e){for(var r=[],a=0;a<t.length;a++)r.push(n(t[a],e));return r}function c(t,n){for(var e=[],r=0;r<t.length;r++)e.push(l(t[r],n));return e}function h(t){return document.getElementById(t)}function f(t){return t+"px"}function p(t,n){return Math.round(Math.pow(10,n)*t)/Math.pow(10,n)}function d(t){return 10>t?"0"+t:t}function g(t,n){return null!==t&&hasOwnProperty.call(t,n)}function v(t){return!isNaN(parseFloat(t))&&isFinite(t)}function M(t){return"[object Array]"===Object.prototype.toString.call(t)}function m(t,n,e){var r=n.valueOf()-t.valueOf();switch(e||"d"){case"y":case"yr":r/=31556926080;break;case"m":case"mo":r/=26298e5;break;case"d":case"dy":r/=864e5;break;case"h":case"hr":r/=36e5;break;case"n":case"mn":r/=6e4;break;case"s":case"sec":r/=1e3}return Math.floor(r)}function y(t){if(t){var n=t.split(".");if(!(n.length<1)&&((n=n[0].split("-"))[0]=n[0].replace(/\D/g,""),n[0]))return n[1]=n[1]?n[1].replace(/\D/g,""):"1",n[2]=n[2]?n[2].replace(/\D/g,""):"1",new Date(Date.UTC(n[0],n[1]-1,n[2]))}}function b(t,n){return t=(t*W+B)%B,n=(n*W+B)%B,Math.abs(t-n)>Math.PI&&(t>n?t-=B:n>t&&(n-=B)),d3.interpolateNumber(t/W,n/W)}function x(t){function n(){!1!==_(this)&&!1!==e()&&I.rotate(a)}function e(){var t=h("centerx"),n=h("centery"),e=h("centerz");if(t&&n){if("equatorial"!==a.transform)a.center[0]=parseFloat(t.value);else{var r=parseFloat(t.value);a.center[0]=r>12?15*r-360:15*r}a.center[1]=parseFloat(n.value);var i=parseFloat(e.value);return a.center[2]=isNaN(i)?0:i,""!==t.value&&""!==n.value}}function r(){var t,n=this;switch(n.type){case"checkbox":t=n.checked,w(n);break;case"number":if(!1===_(n))return;t=parseFloat(n.value);break;case"color":if(!1===q(n))return;t=n.value;break;case"text":if(-1===n.id.search(/fill$/))return;if(!1===q(n))return;t=n.value}null!==t&&(function(t,n){var e=t.split("-");switch(e.length){case 1:a[e[0]]=n;break;case 2:a[e[0]][e[1]]=n;break;case 3:a[e[0]][e[1]][e[2]]=n;break;default:;}}(n.id,t),e(),I.apply(a))}var a=$.set(t),i=I.projections(),o=I.eulerAngles(),u=d3.select("#celestial-form").append("div").attr("class","ctrl").append("form").attr("id","params").attr("name","params").attr("method","get").attr("action","#"),s=u.append("div").attr("class","col").attr("id","general");s.append("label").attr("title","Map width in pixel, 0 indicates full width").attr("for","width").html("Width "),s.append("input").attr("type","number").attr("maxlength","4").attr("max","20000").attr("min","0").attr("title","Map width").attr("id","width").attr("value",a.width).on("change",function(){var t=this.value;!1!==_(this)&&(a.width=t,I.resize({width:t}))}),s.append("span").html("px"),s.append("label").attr("title","Map projection, (hemi) indicates hemispherical projection").attr("for","projection").html("Projection");var l=s.append("select").attr("id","projection").on("change",function(){this&&(a.projection=this.value,I.reproject(a))}),c=0,f=Object.keys(i).map(function(t,n){var e=i[t].clip&&!0===i[t].clip?i[t].n+" (hemi)":i[t].n;return t===a.projection&&(c=n),{o:t,n:e}});l.selectAll("option").data(f).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),l.property("selectedIndex",c),c=0,s.append("label").attr("title","Coordinate space in which the map is displayed").attr("for","transform").html("Coordinates"),l=s.append("select").attr("id","transform").on("change",function(){var t=this.value,n=z(t,a.transform);null!==n&&(a.center[0]=n),a.transform=t,I.reload({transform:t})}),f=Object.keys(o).map(function(t,n){return t===a.transform&&(c=n),{o:t,n:t.replace(/^([a-z])/,function(t,n){return n.toUpperCase()})}}),l.selectAll("option").data(f).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),l.property("selectedIndex",c),s.append("br"),s.append("label").attr("title","Center coordinates long/lat in selected coordinate space").attr("for","centerx").html("Center"),s.append("input").attr("type","number").attr("id","centerx").attr("title","Center right ascension/longitude").attr("max","24").attr("min","0").attr("step","0.1").on("change",n),s.append("span").attr("id","cxunit").html("h"),s.append("input").attr("type","number").attr("id","centery").attr("title","Center declination/latitude").attr("max","90").attr("min","-90").attr("step","0.1").on("change",n),s.append("span").html(""),s.append("label").attr("title","Orientation").attr("for","centerz").html("Orientation"),s.append("input").attr("type","number").attr("id","centerz").attr("title","Center orientation").attr("max","180").attr("min","-180").attr("step","0.1").on("change",n),s.append("span").html(""),s.append("label").attr("for","orientationfixed").html("Fixed"),s.append("input").attr("type","checkbox").attr("id","orientationfixed").property("checked",a.orientationfixed).on("change",r),s.append("label").attr("title","Center and zoom in on this constellation").attr("for","constellation").html("Show"),s.append("select").attr("id","constellation").on("change",function(){var t=this.value,n=[];if(""===t)return I.constellation=null,void I.redraw();var e=I.constellations[t];a.center=e.center,E(a.center,a.transform);var r=I.zoomBy();1!==r&&n.push({param:"zoom",value:1/r,duration:0}),n.push({param:"center",value:e.center,duration:0});var i=e.scale>10?10:e.scale;n.push({param:"zoom",value:i,duration:0}),I.constellation=t,I.animate(n,!1)}),E(a.center,a.transform),(s=u.append("div").attr("class","col").attr("id","stars")).append("label").attr("class","header").attr("for","stars-show").html("Stars"),s.append("input").attr("type","checkbox").attr("id","stars-show").property("checked",a.stars.show).on("change",r),s.append("label").attr("for","stars-limit").html("down to magnitude"),s.append("input").attr("type","number").attr("id","stars-limit").attr("title","Star display limit (magnitude)").attr("value",a.stars.limit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",r),s.append("label").attr("for","stars-colors").html("with spectral colors"),s.append("input").attr("type","checkbox").attr("id","stars-colors").property("checked",a.stars.colors).on("change",r),s.append("label").attr("for","stars-color").html("or default color "),s.append("input").attr("type","color").attr("autocomplete","off").attr("id","stars-style-fill").attr("title","Star color").property("value",a.stars.style.fill).on("change",r),s.append("br"),s.append("label").attr("for","stars-names").html("Show designations"),s.append("input").attr("type","checkbox").attr("id","stars-names").property("checked",a.stars.names).on("change",r),s.append("label").attr("for","stars-namelimit").html("down to mag"),s.append("input").attr("type","number").attr("id","stars-namelimit").attr("title","Star designaton display limit (magnitude)").attr("value",a.stars.namelimit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",r),s.append("label").attr("for","stars-desig").attr("title","include HD/HIP designations").html("all"),s.append("input").attr("type","checkbox").attr("id","stars-desig").property("checked",a.stars.desig).on("change",r),s.append("label").attr("for","stars-proper").html("proper names"),s.append("input").attr("type","checkbox").attr("id","stars-proper").property("checked",a.stars.proper).on("change",r),s.append("label").attr("for","stars-propernamelimit").html("down to mag"),s.append("input").attr("type","number").attr("id","stars-propernamelimit").attr("title","Star name display limit (magnitude)").attr("value",a.stars.propernamelimit).attr("max","6").attr("min","-1").attr("step","0.1").on("change",r),s.append("br"),s.append("label").attr("for","stars-size").html("Stellar disk size: base"),s.append("input").attr("type","number").attr("id","stars-size").attr("title","Size of the displayed star disk; base").attr("value",a.stars.size).attr("max","100").attr("min","0").attr("step","0.1").on("change",r),s.append("label").attr("for","stars-exponent").html(" * e ^ (exponent"),s.append("input").attr("type","number").attr("id","stars-exponent").attr("title","Size of the displayed star disk; exponent").attr("value",a.stars.exponent).attr("max","3").attr("min","-1").attr("step","0.01").on("change",r),s.append("span").text(" * (magnitude + 2))  [* adaptation]"),w(h("stars-show")),(s=u.append("div").attr("class","col").attr("id","dsos")).append("label").attr("class","header").attr("title","Deep Space Objects").attr("for","dsos-show").html("DSOs"),s.append("input").attr("type","checkbox").attr("id","dsos-show").property("checked",a.dsos.show).on("change",r),s.append("label").attr("for","dsos-limit").html("down to mag"),s.append("input").attr("type","number").attr("id","dsos-limit").attr("title","DSO display limit (magnitude)").attr("value",a.dsos.limit).attr("max","6").attr("min","0").attr("step","0.1").on("change",r),s.append("label").attr("for","dsos-names").html("with names"),s.append("input").attr("type","checkbox").attr("id","dsos-names").property("checked",a.dsos.names).on("change",r),s.append("label").attr("for","dsos-desig").html("or designations"),s.append("input").attr("type","checkbox").attr("id","dsos-desig").property("checked",a.dsos.desig).on("change",r),s.append("label").attr("for","dsos-namelimit").html("down to mag"),s.append("input").attr("type","number").attr("id","dsos-namelimit").attr("title","DSO name display limit (magnitude)").attr("value",a.dsos.namelimit).attr("max","6").attr("min","0").attr("step","0.1").on("change",r),s.append("br"),s.append("label").attr("for","dsos-size").html("DSO symbol size: (base"),s.append("input").attr("type","number").attr("id","dsos-size").attr("title","Size of the displayed symbol: base").attr("value",a.dsos.size).attr("max","100").attr("min","0").attr("step","0.1").on("change",r),s.append("label").attr("for","dsos-exponent").html(" * 2 [* adaptation] - magnitude) ^ exponent"),s.append("input").attr("type","number").attr("id","dsos-exponent").attr("title","Size of the displayed symbol; exponent").attr("value",a.dsos.exponent).attr("max","3").attr("min","-1").attr("step","0.01").on("change",r),w(h("dsos-show")),(s=u.append("div").attr("class","col").attr("id","constellations")).append("label").attr("class","header").html("Constellations"),s.append("label").attr("for","constellations-names").html("Show names"),s.append("input").attr("type","checkbox").attr("id","constellations-names").property("checked",a.constellations.names).on("change",r),s.append("label").attr("for","constellations-desig").html("abbreviated"),s.append("input").attr("type","checkbox").attr("id","constellations-desig").property("checked",a.constellations.desig).on("change",r),s.append("label").attr("for","constellations-lines").html("with lines"),s.append("input").attr("type","checkbox").attr("id","constellations-lines").property("checked",a.constellations.lines).on("change",r),s.append("label").attr("for","constellations-bounds").html("with boundaries"),s.append("input").attr("type","checkbox").attr("id","constellations-bounds").property("checked",a.constellations.bounds).on("change",r),w(h("constellations-names")),(s=u.append("div").attr("class","col").attr("id","lines")).append("label").attr("class","header").html("Lines"),s.append("label").attr("title","Laitudet/longitude grid lines").attr("for","lines-graticule").html("Graticule"),s.append("input").attr("type","checkbox").attr("id","lines-graticule-show").property("checked",a.lines.graticule.show).on("change",r),s.append("label").attr("for","lines-equatorial").html("Equator"),s.append("input").attr("type","checkbox").attr("id","lines-equatorial-show").property("checked",a.lines.equatorial.show).on("change",r),s.append("label").attr("for","lines-ecliptic").html("Ecliptic"),s.append("input").attr("type","checkbox").attr("id","lines-ecliptic-show").property("checked",a.lines.ecliptic.show).on("change",r),s.append("label").attr("for","lines-galactic").html("Galactic plane"),s.append("input").attr("type","checkbox").attr("id","lines-galactic-show").property("checked",a.lines.galactic.show).on("change",r),s.append("label").attr("for","lines-supergalactic").html("Supergalactic plane"),s.append("input").attr("type","checkbox").attr("id","lines-supergalactic-show").property("checked",a.lines.supergalactic.show).on("change",r),(s=u.append("div").attr("class","col").attr("id","other")).append("label").attr("class","header").html("Other"),s.append("label").attr("for","mw-show").html("Milky Way"),s.append("input").attr("type","checkbox").attr("id","mw-show").property("checked",a.mw.show).on("change",r),s.append("label").attr("for","mw-style-fill").html(" color"),s.append("input").attr("type","color").attr("id","mw-style-fill").attr("title","Milky Way color").attr("value",a.mw.style.fill).on("change",r),s.append("label").attr("for","mw-style-opacity").html(" opacity"),s.append("input").attr("type","number").attr("id","mw-style-opacity").attr("title","Transparency of each Milky Way layer").attr("value",a.mw.style.opacity).attr("max","1").attr("min","0").attr("step","0.01").on("change",r),s.append("br"),s.append("label").attr("for","background").html("Background color"),s.append("input").attr("type","color").attr("id","background-fill").attr("title","Background color").attr("value",a.background.fill).on("change",r),s.append("label").attr("title","Star/DSO sizes are increased with higher zoom-levels").attr("for","adaptable").html("Adaptable object sizes"),s.append("input").attr("type","checkbox").attr("id","adaptable").property("checked",a.adaptable).on("change",r),function(){var t,n,e,r=/\d+(\.\d+)?/g,a={s:6,d:6},i=I.settings();e=i.dsos.data,null!==(t=e.match(r))&&(a.d=parseFloat(t[t.length-1])),6!=a.d&&(h("dsos-limit").max=a.d,h("dsos-namelimit").max=a.d),n=i.stars.data,null!==(t=n.match(r))&&(a.s=parseFloat(t[t.length-1])),6!=a.s&&(h("stars-limit").max=a.s,h("stars-namelimit").max=a.s)}(),z(a.transform)}function w(t){var n,e=t.id;switch(e){case"stars-show":n=!h(e).checked;for(var r=0;r<nt[e].length;r++)k(nt[e][r],n);case"stars-names":for(n=!h("stars-names").checked||!h("stars-show").checked,r=0;r<nt["stars-names"].length;r++)k(nt["stars-names"][r],n);case"stars-proper":for(n=!h("stars-names").checked||!h("stars-show").checked||!h("stars-proper").checked,r=0;r<nt["stars-proper"].length;r++)k(nt["stars-proper"][r],n);break;case"dsos-show":for(n=!h(e).checked,r=0;r<nt[e].length;r++)k(nt[e][r],n);case"dsos-names":for(n=!h("dsos-names").checked||!h("dsos-show").checked,r=0;r<nt["dsos-names"].length;r++)k(nt["dsos-names"][r],n);break;case"constellations-show":for(n=!h(e).checked,r=0;r<nt[e].length;r++)k(nt[e][r],n);break;case"mw-show":for(n=!h(e).checked,r=0;r<nt[e].length;r++)k(nt[e][r],n)}}function k(t,n){var e=h(t);e.disabled=n,e.previousSibling.style.color=n?"#999":"#000"}function S(t,n){var e=function(t){var n=0,e=0;if(t.offsetParent)do{n+=t.offsetLeft,e+=t.offsetTop}while(null!==(t=t.offsetParent));return[n,e]}(t);d3.select("#error").html(n).style({top:f(e[1]+t.offsetHeight+1),left:f(e[0]),opacity:1}),t.focus()}function _(t){var n,e="hr"===t.id||"min"===t.id||"sec"===t.id?1:0;if(t.validity){if((n=t.validity).typeMismatch||n.badInput)return S(t,t.title+": check field value"),!1;if(n.rangeOverflow||n.rangeUnderflow)return S(t,t.title+" must be between "+(parseInt(t.min)+e)+" and "+(parseInt(t.max)-e)),!1}else{if(!v(n=t.value))return S(t,t.title+": check field value"),!1;if((n=parseFloat(n))<t.min||n>t.max)return S(t,t.title+" must be between "+(t.min+e)+" and "+(+t.max-e)),!1}return d3.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),!0}function q(t){var n;if(t.validity){if((n=t.validity).typeMismatch||n.badInput)return S(t,t.title+": check field value"),!1;if(-1===t.value.search(/^#[0-9A-F]{6}$/i))return S(t,t.title+": not a color value"),!1}else{if(""===(n=t.value))return!0;if(-1===n.search(/^#[0-9A-F]{6}$/i))return S(t,t.title+": not a color value"),!1}return d3.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),!0}function z(t,n){var e=h("centerx");return e?(n&&("equatorial"===t&&"equatorial"!==n?(e.value=(e.value/15).toFixed(1),e.value<0&&(e.value+=24)):"equatorial"!==t&&"equatorial"===n&&(e.value=(15*e.value).toFixed(1),e.value>180&&(e.value-=360))),"equatorial"===t?(e.min="0",e.max="24",h("cxunit").innerHTML="h"):(e.min="-180",e.max="180",h("cxunit").innerHTML=""),e.value):null}function E(t,n){var e=h("centerx"),r=h("centery"),a=h("centerz");e&&r&&(null===t&&(t=[0,0,0]),t.length<=2&&(t[2]=0),e.value="equatorial"!==n?t[0].toFixed(1):t[0]<0?(t[0]/15+24).toFixed(1):(t[0]/15).toFixed(1),r.value=t[1].toFixed(1),a.value=null!==t[2]?t[2].toFixed(1):0)}function A(t){function n(){c.show(s)}function e(t,n){var e;if(n&&"0"!==n){var r=Math.floor(Math.abs(n)/60),a=Math.abs(n)-60*r;e=(0>n?" +":" ")+d(r)+d(a)}else e=" 0000";return i(t)+e}function r(){var n=h("lon").value,e=h("lat").value,r=(s=i.parse(h("datetime").value.slice(0,-6))).getTimezoneOffset(),a=new Date(s.valueOf()+6e4*(l-r));t.horizon.show=!!h("horizon-show").checked,t.planets.show=!!h("planets-show").checked,""!==n&&""!==e&&(u=[parseFloat(e),parseFloat(n)],(o=I.getPoint(Z.inverse(a,[90,0],u),t.transform))[2]=0,"zenith"===t.follow?I.rotate({center:o,horizon:t.horizon}):I.apply({horizon:t.horizon}))}var a=d3.select("#celestial-form").append("div").attr("id","loc"),i=d3.time.format("%Y-%m-%d %H:%M:%S"),o=[0,0],u=[0,0],s=new Date,l=s.getTimezoneOffset(),c=new ct(t,function(t,n){h("datetime").value=e(t,n),l=n,r()});g(t,"geopos")&&null!==t.geopos&&2===t.geopos.length&&(u=t.geopos);var f=a.append("div").attr("class","col").attr("id","location");f.append("label").attr("title","Location coordinates long/lat").attr("for","lat").html("Location"),f.append("input").attr("type","number").attr("id","lat").attr("title","Latitude").attr("placeholder","Latitude").attr("max","90").attr("min","-90").attr("step","0.0001").attr("value",u[0]).on("change",function(){!0===_(this)&&r()}),f.append("span").html(""),f.append("input").attr("type","number").attr("id","lon").attr("title","Longitude").attr("placeholder","Longitude").attr("max","180").attr("min","-180").attr("step","0.0001").attr("value",u[1]).on("change",function(){!0===_(this)&&r()}),f.append("span").html(""),"geolocation"in navigator&&f.append("input").attr("type","button").attr("value","Here").attr("id","here").on("click",function(){navigator.geolocation.getCurrentPosition(function(t){u=[p(t.coords.latitude,4),p(t.coords.longitude,4)],h("lat").value=u[0],h("lon").value=u[1],r()})}),f.append("label").attr("title","Local date/time").attr("for","datetime").html(" Date/time"),f.append("input").attr("type","button").attr("id","day-left").attr("title","One day back").on("click",function(){s.setDate(s.getDate()-1),h("datetime").value=e(s,l),r()}),f.append("input").attr("type","text").attr("id","datetime").attr("title","Date and time").attr("value",e(s,l)).on("click",n,!0).on("input",function(){this.value=e(s,l),c.isVisible()||n()}),f.append("div").attr("id","datepick").on("click",n),f.append("input").attr("type","button").attr("id","day-right").attr("title","One day forward").on("click",function(){s.setDate(s.getDate()+1),h("datetime").value=e(s,l),r()}),f.append("input").attr("type","button").attr("value","Now").attr("id","now").on("click",function(){s.setTime(Date.now()),h("datetime").value=e(s,l),r()}),f.append("br"),f.append("label").attr("title","Show horizon marker").attr("for","horizon-show").html(" Horizon marker"),f.append("input").attr("type","checkbox").attr("id","horizon-show").property("checked",t.horizon.show).on("change",r),f.append("label").attr("title","Show solar system objects").attr("for","planets-show").html(" Planets, Sun & Moon"),f.append("input").attr("type","checkbox").attr("id","planets-show").property("checked",t.planets.show).on("change",r),d3.select(document).on("mousedown",function(){!function(t,n){for(;t.parentNode;){if(t.id===n)return!0;t=t.parentNode}return!1}(d3.event.target,"celestial-date")&&c.isVisible()&&c.hide()}),I.getPosition=function(){},I.date=function(t){return t?void(c.isVisible()||(s.setTime(t.valueOf()),h("datetime").value=e(t,l),I.redraw())):s},I.position=function(){return u},I.zenith=function(){return o},I.nadir=function(){var t=-o[1],n=o[0]+180;return n>180&&(n-=360),[n,t-.001]},setTimeout(r,1e3)}var N,T,P,C,j,I={version:"0.6.10",container:null,data:[]},L=.035,D=1.4,R=2e3,F=2500,O=1500,U=10,H=1;I.display=function(t){function e(){for(var e in N.lines)g(N.lines,e)&&("graticule"===e?(at.append("path").datum(qt).attr("class","graticule"),g(N.lines.graticule,"lon")&&N.lines.graticule.lon.pos.length>0&&at.selectAll(".gridvalues_lon").data(u("lon",N.lines.graticule.lon.pos)).enter().append("path").attr("class","graticule_lon"),g(N.lines.graticule,"lat")&&N.lines.graticule.lat.pos.length>0&&at.selectAll(".gridvalues_lat").data(u("lat",N.lines.graticule.lat.pos)).enter().append("path").attr("class","graticule_lat")):at.append("path").datum(d3.geo.circle().angle([90]).origin(n(Y[e],G[pt]))).attr("class",e));d3.json(kt+"mw.json",function(t,n){if(t)return window.alert("Your Browser doesn't support local file loading or the file doesn't exist. See readme.md"),console.warn(t);var e=a(n,pt);at.selectAll(".mway").data(e.features).enter().append("path").attr("class","mw"),c()}),d3.json(kt+"constellations.json",function(n,e){if(n)return console.warn(n);var r=a(e,pt);at.selectAll(".constnames").data(r.features).enter().append("text").attr("class","constname");var i=function(t,n){for(var e={},r=(G[n],t.features),a=0;a<r.length;a++)e[r[a].id]={name:r[a].properties.name,center:r[a].properties.display.slice(0,2),scale:r[a].properties.display[2]};return e}(e,pt);if(h("constellation")){var o=d3.select("#constellation"),u=0,s=Object.keys(i).map(function(n,e){return n===t.constellation&&(u=e),{o:n,n:i[n].name}});s=[{o:"",n:"(Select constellation)"}].concat(s),o.selectAll("option").data(s).enter().append("option").attr("value",function(t){return t.o}).text(function(t){return t.n}),o.property("selectedIndex",u)}I.constellations=i,c()}),d3.json(kt+"constellations.bounds.json",function(t,n){if(t)return console.warn(t);var e=a(n,pt);at.selectAll(".bounds").data(e.features).enter().append("path").attr("class","boundaryline"),c()}),d3.json(kt+"constellations.lines.json",function(t,n){if(t)return console.warn(t);var e=a(n,pt);at.selectAll(".lines").data(e.features).enter().append("path").attr("class","constline"),c()}),d3.json(kt+N.stars.data,function(t,n){if(t)return console.warn(t);var e=a(n,pt);at.selectAll(".stars").data(e.features).enter().append("path").attr("class","star"),c()}),d3.json(kt+N.dsos.data,function(t,n){if(t)return console.warn(t);var e=a(n,pt);at.selectAll(".dsos").data(e.features).enter().append("path").attr("class","dso"),c()}),d3.json(kt+"planets.json",function(t,n){if(t)return console.warn(t);var e=i(n);at.selectAll(".planets").data(e).enter().append("path").attr("class","planet"),c()}),I.data.length>0&&I.data.forEach(function(t){g(t,"file")?d3.json(t.file,t.callback):setTimeout(t.callback,0)},this)}function r(t){if(t&&1!==t){var n=T.scale(),e=n*t,r=P.scaleExtent(),a=O*Math.sqrt(Math.abs(1-t));e<r[0]&&(e=r[0]),e>r[1]&&(e=r[1]);var i=d3.interpolateNumber(n,e);return d3.select({}).transition().duration(a).tween("scale",function(){return function(t){var n=i(t);T.scale(n),c()}}).transition().duration(0).tween("scale",function(){P.scale(e),c()}),a}}function o(t){var n,e,r,a=N.center,i=T.rotate(),o=T.scale(),u=R,s=!1,l=N.orientationfixed;p(i[1],1)===-p(t.center[1],1)&&(s=!0),N=N.set(t);var h=p(d3.geo.distance(a,N.center),2),f=d3.geo.distance([a[2],0],[N.center[2],0]);return L>h&&L>f?(wt=tt(N.center),T.rotate(wt),c()):(e=o>vt*D?d3.interpolateNumber(o,vt):function(){return o},r=0===f?function(){return i[2]}:b(a[2],N.center[2]),h>3.14&&(N.center[0]-=.01),N.orientationfixed=!1,n=0===h?function(){return N.center}:d3.geo.interpolate(a,N.center),u=0!==h?u*h:u*f,d3.select({}).transition().duration(u).tween("center",function(){return function(t){var a=tt(n(t));a[2]=r(t);var o=e(.5>t?t:1-t);s&&(a[1]=i[1]),T.scale(o),T.rotate(a),c()}}).transition().duration(0).tween("center",function(){N.orientationfixed=l,wt=tt(N.center),T.rotate(wt),c()})),u}function s(t){ht=W(),(N.width!==ht||t)&&(gt=ht/dt,vt=ft.scale*ht/1024,St.attr("width",ht).attr("height",gt),P.scaleExtent([vt,vt*U]).scale(vt*H),T.translate([ht/2,gt/2]).scale(vt*H),st&&(st.style.height=f(gt)),vt*=H,c())}function l(t){var n=Z(t.projection);if(n){var e=T.rotate(),a=T.center(),i=T.scale(),o=P.scaleExtent(),u=I.projection(N.projection).center(a).translate([ht/2,gt/2]).scale([o[0]]),s=F,h=0,p=d3.interpolateNumber(dt,n.ratio);ft.clip!=n.clip&&(s=0);var d=I.projection(t.projection).center(a).translate([ht/2,ht/n.ratio/2]).scale([n.scale*ht/1024]),g=N.adaptable;return i>o[0]?(h=r(.1),setTimeout(l,h,t),h+s):(N.location&&k("horizon-show",n.clip),T=function(t,n){var e,r=d3.geo.projection(function(r,a){var i=t([r*=180/Math.PI,a*=180/Math.PI]),o=n([r,a]);return[(1-e)*i[0]+e*o[0],(e-1)*i[1]-e*o[1]]}).scale(1),a=r.center,i=r.translate;return r.alpha=function(o){if(!arguments.length)return e;e=+o;var u=t.center(),s=n.center(),l=t.translate(),c=n.translate();return a([(1-e)*u[0]+e*s[0],(1-e)*u[1]+e*s[1]]),i([(1-e)*l[0]+e*c[0],(1-e)*l[1]+e*c[1]]),r},delete r.translate,delete r.center,r.alpha(0)}(u,d),N.adaptable=!1,d3.select({}).transition().duration(s).tween("projection",function(){return function(t){T.alpha(t).rotate(e),C.projection(T),_(n.clip),dt=p(t),gt=ht/dt,St.attr("width",ht).attr("height",gt),st&&(st.style.height=f(gt)),c()}}).transition().duration(0).tween("projection",function(){dt=(ft=n).ratio,gt=ht/ft.ratio,vt=ft.scale*ht/1024,St.attr("width",ht).attr("height",gt),st&&(st.style.height=f(gt)),N.projection=t.projection,T=I.projection(t.projection).rotate(e).translate([ht/2,gt/2]).scale(vt*H),C.projection(T),_(ft.clip),P.projection(T).scaleExtent([vt,vt*U]).scale(vt*H),N.adaptable=g,vt*=H,c()}),s)}}function c(){var t=T.rotate();for(var n in N.adaptable&&(xt=Math.sqrt(T.scale()/vt)),xt||(xt=1),Mt=N.stars.size,yt=N.stars.exponent,mt=N.dsos.size||Mt,bt=N.dsos.exponent,N.orientationfixed&&(t[2]=N.center[2],T.rotate(t)),N.center=[-t[0],-t[1],t[2]],E(N.center,N.transform),_t.clearRect(0,0,ht+ct[0],gt+ct[1]),d(),N.mw.show&&at.selectAll(".mw").each(function(t){y(N.mw.style),C(t),_t.fill()}),N.lines)g(N.lines,n)&&!0===N.lines[n].show&&(y(N.lines[n]),at.selectAll("."+n).attr("d",C),_t.stroke());if(g(N.lines.graticule,"lon")&&(w(N.lines.graticule.lon),at.selectAll(".graticule_lon").each(function(t){if(m(t.geometry.coordinates)){var n=T(t.geometry.coordinates);B(n,t.properties.orientation),_t.fillText(t.properties.value,n[0],n[1])}})),g(N.lines.graticule,"lat")&&(w(N.lines.graticule.lat),at.selectAll(".graticule_lat").each(function(t){if(m(t.geometry.coordinates)){var n=T(t.geometry.coordinates);B(n,t.properties.orientation),_t.fillText(t.properties.value,n[0],n[1])}})),d(!0),N.constellations.show&&(N.constellations.bounds&&(at.selectAll(".boundaryline").each(function(t){y(N.constellations.boundstyle),I.constellation&&I.constellation===t.id&&(_t.lineWidth*=1.5,_t.setLineDash([])),C(t),_t.stroke()}),d(!0)),N.constellations.names&&(w(N.constellations.namestyle),at.selectAll(".constname").each(function(t){if(m(t.geometry.coordinates)){S(t.properties.rank,N.constellations.namestyle.font);var n=T(t.geometry.coordinates);_t.fillText(function(t){return N.constellations.desig?t.properties.desig:t.properties[N.lang]}(t),n[0],n[1])}})),N.constellations.lines&&at.selectAll(".constline").each(function(t){y(N.constellations.linestyle),C(t),_t.stroke()})),N.stars.show&&(y(N.stars.style),at.selectAll(".star").each(function(t){if(m(t.geometry.coordinates)&&t.properties.mag<=N.stars.limit){var n=T(t.geometry.coordinates),e=function(t){var n=t.properties.mag;if(null===n)return.1;var e=Mt*xt*Math.exp(yt*(n+2));return Math.max(e,.1)}(t);_t.fillStyle=function(t){var n=t.properties.bv;return!N.stars.colors||isNaN(n)?N.stars.style.fill:X(n)}(t),_t.beginPath(),_t.arc(n[0],n[1],e,0,2*Math.PI),_t.closePath(),_t.fill(),N.stars.names&&t.properties.mag<=N.stars.namelimit*xt&&(w(N.stars.namestyle),_t.fillText(function(t){var n=t.properties.desig;return N.stars.desig?n:n.replace(/^(HD|HIP|V\d{3}).+/,"")}(t),n[0]+e,n[1])),N.stars.proper&&t.properties.mag<=N.stars.propernamelimit*xt&&(w(N.stars.propernamestyle),_t.fillText(function(t){return t.properties.name}(t),n[0]-e,n[1]))}})),N.dsos.show&&at.selectAll(".dso").each(function(t){if(m(t.geometry.coordinates)&&q(t.properties,N.dsos.limit)){var n=T(t.geometry.coordinates),e=t.properties.type;y(N.dsos.symbols[e]);var r=z(t,n);g(N.dsos.symbols[e],"stroke")?_t.stroke():_t.fill(),N.dsos.names&&q(t.properties,N.dsos.namelimit)&&(w(N.dsos.namestyle),_t.fillStyle=N.dsos.symbols[e].fill,_t.fillText(function(t){var n=t.properties;if(""!==n.name)return N.dsos.desig&&n.desig?n.desig:n.name}(t),n[0]+r,n[1]-r))}}),N.location&&"equatorial"===N.transform&&N.planets.show&&I.origin){var e=I.date(),r=I.origin(e).spherical();at.selectAll(".planet").each(function(t){var n=t.id(),a=t(e).equatorial(r);if(m(a.pos)){var i=T(a.pos),o=N.planets.symbols[n];"lun"!==n?(w(N.planets.style),_t.fillStyle=o.fill,_t.fillText(o.symbol,i[0],i[1])):K.symbol().type("crescent").size(144).age(a.age).position(i)(_t)}})}I.data.length>0&&I.data.forEach(function(t){t.redraw()}),N.location&&N.horizon.show&&!ft.clip&&(j.origin(I.nadir()),y(N.horizon),at.selectAll(".horizon").datum(j).attr("d",C),_t.fill(),N.horizon.stroke&&_t.stroke()),N.controls&&function(t){var n=h("celestial-zoomin"),e=h("celestial-zoomout"),r=ft.scale*ht/1024;n&&e&&(n.disabled=t>=r*U*.99,e.disabled=r>=t)}(T.scale())}function d(t){var n=T.rotate();T.rotate([0,0]),y(N.background),at.selectAll(".outline").attr("d",C),!0===t?_t.stroke():_t.fill(),T.rotate(n)}function m(t){return ft.clip&&d3.geo.distance(N.center,t)>V?0:1}function y(t){_t.fillStyle=t.fill||null,_t.strokeStyle=t.stroke||null,_t.lineWidth=t.width||null,_t.globalAlpha=t.opacity||1,_t.font=t.font||null,_t.setLineDash(g(t,"dash")?t.dash:[]),_t.beginPath()}function w(t){_t.fillStyle=t.fill,_t.textAlign=t.align||"left",_t.textBaseline=t.baseline||"bottom",_t.globalAlpha=t.opacity||1,_t.font=t.font}function S(t,n){_t.font=M(n)?1===n.length?n[0]:t>n.length?n[n.length-1]:n[t-1]:n}function _(t){t?(T.clipAngle(90),at.selectAll(".outline").remove(),at.append("path").datum(d3.geo.circle().angle([90])).attr("class","outline")):(T.clipAngle(null),at.selectAll(".outline").remove(),at.append("path").datum(qt.outline).attr("class","outline"))}function q(t,n){return 999===t.mag&&Math.sqrt(parseInt(t.dim))>n||999!==t.mag&&t.mag<=n}function z(t,n){var e=t.properties,r=function(t){return t.mag&&999!==t.mag?Math.pow(2*mt*xt-t.mag,bt):Math.pow(parseInt(t.dim)*mt*xt/7,.5)}(e)||9,a=function(t){return t&&g(N.dsos.symbols,t)?N.dsos.symbols[t].shape:"circle"}(e.type);return K.symbol().type(a).size(r).position(n)(_t),Math.sqrt(r)/2}function B(t,n){for(var e=n.split(""),r="center",a="middle",i=e.length-1;i>=0;i--)switch(e[i]){case"N":a="bottom";break;case"S":a="top";break;case"E":r="left",t[0]+=2;break;case"W":r="right",t[0]-=2}return _t.textAlign=r,_t.textBaseline=a,t}function W(){return N.width&&N.width>0?N.width:st?st.clientWidth-ct[0]:window.innerWidth-2*ct[0]}function Z(t){if(g(J,t)){var n=J[t];return g(n,"ratio")||(n.ratio=2),n}}function tt(t){if(null===t)return[0,0,0];var n=Q.equatorial;return t[2]||(t[2]=0),[n[0]-t[0],n[1]-t[1],n[2]+t[2]]}function nt(){if(it&&!(it.length<1)){var t,n=it[ot];switch(n.param){case"projection":t=l({projection:n.value});break;case"center":t=o({center:n.value});break;case"zoom":t=r(n.value)}n.callback&&setTimeout(n.callback,t),ot++,!0===ut&&ot===it.length&&(ot=0),t=0===n.duration||n.duration<t?t:n.duration,ot<it.length&&(rt=setTimeout(nt,t))}}var et,rt,at=I.container,it=[],ot=0,ut=!1;(N=$.set(t)).stars.size=N.stars.size||7,N.stars.exponent=N.stars.exponent||-.28,N.center=N.center||[0,0],N.lang&&-1!==N.lang.search(/^de|es$/)||(N.lang="name"),v(N.zoomextend)&&(U=N.zoomextend),v(N.zoomlevel)&&(H=N.zoomlevel);var st=h(N.container);if(st){et="#"+N.container;var lt=window.getComputedStyle(st,null);parseInt(lt.width)||N.width||(st.style.width=f(st.parentNode.clientWidth))}else et="body",st=null;var ct=[16,16],ht=W(),ft=Z(N.projection);if(N.lines.graticule.lat&&"outline"===N.lines.graticule.lat.pos[0]&&(ft.scale-=2),ft){var pt=N.transform||"equatorial",dt=ft.ratio,gt=ht/dt,vt=ft.scale*ht/1024,Mt=N.stars.size,mt=N.dsos.size||Mt,yt=N.stars.exponent,bt=N.dsos.exponent||yt,xt=1,wt=tt(N.center),kt=N.datapath||"";kt=kt.replace(/([^\/]$)/,"$1/"),"body"!=et&&(h(N.container).style.height=f(gt)),T=I.projection(N.projection).rotate(wt).translate([ht/2,gt/2]).scale(vt*H),P=d3.geo.zoom().projection(T).center([ht/2,gt/2]).scaleExtent([vt,vt*U]).on("zoom.redraw",c),vt*=H;var St=d3.select(et).selectAll("canvas");0===St[0].length&&(St=d3.select(et).append("canvas")),St.attr("width",ht).attr("height",gt);var _t=St.node().getContext("2d"),qt=d3.geo.graticule().minorStep([15,10]);C=d3.geo.path().projection(T).context(_t),at?at.selectAll("*").remove():at=d3.select(et).append("container"),N.interactive?St.call(P):St.attr("style","cursor: default!important"),_(ft.clip),d3.select(window).on("resize",s),d3.select(et).on("dblclick",function(){return r(1.5625),!1}),!0===N.controls&&null===h("celestial-zoomin")&&(d3.select(et).append("input").attr("type","button").attr("id","celestial-zoomin").attr("value","+").on("click",function(){return r(1.25),!1}),d3.select(et).append("input").attr("type","button").attr("id","celestial-zoomout").attr("value","").on("click",function(){return r(.8),!1})),!0===N.location&&(j=d3.geo.circle().angle([90]),at.append("path").datum(j).attr("class","horizon"),null===h("loc")?A(N):"zenith"===N.follow&&o({center:I.zenith()}),k("horizon-show",ft.clip)),!0===N.form&&null===h("params")&&x(N),null===h("error")&&d3.select("body").append("div").attr("id","error"),this.container=at,this.clip=m,this.map=C,this.mapProjection=T,this.context=_t,this.metrics=function(){return{width:ht,height:gt}},this.setStyle=y,this.setTextStyle=w,this.setConstStyle=S,this.dsoSymbol=z,this.redraw=c,this.resize=function(t){t&&g(t,"width")&&(N.width=t.width),s(!0)},this.reload=function(t){t&&g(t,"transform")&&(pt=N.transform=t.transform,qt.minorStep("equatorial"===pt?[15,10]:[10,10]),at.selectAll("*").remove(),_(),at.append("path").datum(j).attr("class","horizon"),e())},this.apply=function(t){!function(t){N=N.set(t),c()}(t)},this.reproject=function(t){return l(t)},this.rotate=function(t){return t?o(t):N.center},this.zoomBy=function(t){return t?r(t):T.scale()/vt},this.color=function(t){return t&&g(N.dsos.symbols,t)?N.dsos.symbols[t].fill:"#000"},this.animate=function(t,n){t&&(it=t,ot=0,ut=!!n,nt())},this.stop=function(t){clearTimeout(rt),!0===t&&(it=[])},this.go=function(t){it.length<1||(t&&t<it.length&&(ot=t),nt())},g(this,"date")||(this.date=function(){console.log("Celestial.date() needs config.location = true to work.")}),e()}},t.exports&&(t.exports=I),I.projection=function(t){var n,e,r;if(!g(J,t))throw new Error("Projection not supported: "+t);return n=J[t],e=null!==n.arg?d3.geo[t].raw(n.arg):d3.geo[t].raw,(r=function(t,n){return e(-t,n)}).invert=function(t,n){try{var r=e.invert(t,n);return r[0]=r&&-r[0],r}catch(t){console.log(t)}},d3.geo.projection(r)};var Q={equatorial:[0,0,0],ecliptic:[0,0,23.4393],galactic:[93.5949,28.9362,-58.5988],supergalactic:[137.31,59.5283,57.7303]},Y={equatorial:[0,90],ecliptic:[-90,66.5607],galactic:[-167.1405,27.1283],supergalactic:[-76.2458,15.7089]};I.eulerAngles=function(){return Q},I.poles=function(){return Y};var B=2*Math.PI,V=Math.PI/2,W=Math.PI/180,G={ecliptic:[-90,23.4393,90],"inverse ecliptic":[90,23.4393,-90],galactic:[-167.1405,62.8717,122.9319],"inverse galactic":[122.9319,62.8717,-167.1405],supergalactic:[283.7542,74.2911,26.4504],"inverse supergalactic":[26.4504,74.2911,283.7542],init:function(){for(var t in this)this[t].constructor==Array&&(this[t]=this[t].map(function(t){return t*W}))},add:function(t,n){return n&&t&&3===n.length&&!this.hasOwnProperty(t)?(this[t]=n.map(function(t){return t*W}),this[t]):void 0}};G.init(),I.euler=function(){return G};var Z=function(t,n,e){var a=r(t,e[1])-n[0];0>a&&(a+=360),a*=W;var i=n[1]*W,o=e[0]*W,u=Math.asin(Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(a)),s=Math.acos((Math.sin(i)-Math.sin(u)*Math.sin(o))/(Math.cos(u)*Math.cos(o)));return Math.sin(a)>0&&(s=2*Math.PI-s),[u/W,s/W,0]};Z.inverse=function(t,n,e){var a=n[0]*W,i=n[1]*W,o=e[0]*W,u=Math.asin(Math.sin(a)*Math.sin(o)+Math.cos(a)*Math.cos(o)*Math.cos(i)),s=((Math.sin(a)-Math.sin(u)*Math.sin(o))/(Math.cos(u)*Math.cos(o))).toFixed(6);return s=Math.acos(s),s/=W,[r(t,e[1])-s,u/W,0]},I.horizontal=Z,I.add=function(t){var n={};return g(t,"type")?"dso"!==t.type&&"json"!==t.type||g(t,"file")&&g(t,"callback")?"line"!==t.type&&"raw"!==t.type||g(t,"callback")?(g(t,"file")&&(n.file=t.file),n.type=t.type,g(t,"callback")&&(n.callback=t.callback),g(t,"redraw")&&(n.redraw=t.redraw),void I.data.push(n)):console.log("Can't add data"):console.log("Can't add data file"):console.log("Missing type")},I.remove=function(t){return null!==t&&t<I.data.length?I.data.splice(t,1):void 0},I.clear=function(){I.data=[]},I.getData=a,I.getPoint=function(t,e){return n(t,G[e])};var $={width:0,projection:"aitoff",transform:"equatorial",center:null,geopos:null,zoomlevel:null,zoomextend:10,follow:"zenith",orientationfixed:!0,adaptable:!0,interactive:!0,form:!1,location:!1,daterange:[],controls:!0,lang:"",container:"celestial-map",datapath:"data/",stars:{show:!0,limit:6,colors:!0,style:{fill:"#ffffff",opacity:1},names:!0,proper:!1,desig:!1,namestyle:{fill:"#ddddbb",font:"11px 'Palatino Linotype', Georgia, Times, 'Times Roman', serif",align:"left",baseline:"top"},namelimit:2.5,propernamestyle:{fill:"#ddddbb",font:"13px 'Palatino Linotype', Georgia, Times, 'Times Roman', serif",align:"right",baseline:"bottom"},propernamelimit:1.5,size:7,exponent:-.28,data:"stars.6.json"},dsos:{show:!0,limit:6,names:!0,desig:!0,namestyle:{fill:"#cccccc",font:"11px 'Lucida Sans Unicode', Helvetica, Arial, serif",align:"left",baseline:"top"},namelimit:4,size:null,exponent:1.4,data:"dsos.bright.json",symbols:{gg:{shape:"circle",fill:"#ff0000"},g:{shape:"ellipse",fill:"#ff0000"},s:{shape:"ellipse",fill:"#ff0000"},s0:{shape:"ellipse",fill:"#ff0000"},sd:{shape:"ellipse",fill:"#ff0000"},e:{shape:"ellipse",fill:"#ff0000"},i:{shape:"ellipse",fill:"#ff0000"},oc:{shape:"circle",fill:"#ff9900",stroke:"#ff9900",width:2},gc:{shape:"circle",fill:"#ff9900"},en:{shape:"square",fill:"#ff00cc"},bn:{shape:"square",fill:"#ff00cc"},sfr:{shape:"square",fill:"#cc00ff"},rn:{shape:"square",fill:"#0000ff"},pn:{shape:"diamond",fill:"#00cccc"},snr:{shape:"diamond",fill:"#ff00cc"},dn:{shape:"square",fill:"#999999",stroke:"#999999",width:2},pos:{shape:"marker",fill:"#cccccc",stroke:"#cccccc",width:1.5}}},constellations:{show:!0,names:!0,desig:!0,namestyle:{fill:"#cccc99",align:"center",baseline:"middle",opacity:.8,font:["14px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif","12px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif","11px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"]},lines:!0,linestyle:{stroke:"#cccccc",width:1.5,opacity:.6},bounds:!1,boundstyle:{stroke:"#ccff00",width:1,opacity:.8,dash:[2,4]}},mw:{show:!0,style:{fill:"#ffffff",opacity:"0.15"}},lines:{graticule:{show:!0,stroke:"#cccccc",width:.6,opacity:.8,lon:{pos:[""],fill:"#eee",font:"10px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"},lat:{pos:[""],fill:"#eee",font:"10px 'Lucida Sans Unicode', Helvetica, Arial, sans-serif"}},equatorial:{show:!0,stroke:"#aaaaaa",width:1.3,opacity:.7},ecliptic:{show:!0,stroke:"#66cc66",width:1.3,opacity:.7},galactic:{show:!1,stroke:"#cc6666",width:1.3,opacity:.7},supergalactic:{show:!1,stroke:"#cc66cc",width:1.3,opacity:.7}},background:{fill:"#000000",opacity:1,stroke:"#000000",width:1.5},horizon:{show:!1,stroke:"#000099",width:1,fill:"#000000",opacity:.5},planets:{show:!1,which:["sol","mer","ven","ter","lun","mar","jup","sat","ura","nep"],style:{fill:"#00ccff",font:"bold 17px 'Lucida Sans Unicode', Consolas, sans-serif",align:"center",baseline:"middle"},symbols:{sol:{symbol:"",fill:"#ffff00"},mer:{symbol:"",fill:"#cccccc"},ven:{symbol:"",fill:"#eeeecc"},ter:{symbol:"",fill:"#00ffff"},lun:{symbol:"",fill:"#ffffff"},mar:{symbol:"",fill:"#ff9999"},cer:{symbol:"",fill:"#cccccc"},ves:{symbol:"",fill:"#cccccc"},jup:{symbol:"",fill:"#ff9966"},sat:{symbol:"",fill:"#ffcc66"},ura:{symbol:"",fill:"#66ccff"},nep:{symbol:"",fill:"#6666ff"},plu:{symbol:"",fill:"#aaaaaa"},eri:{symbol:"",fill:"#eeeeee"}}},daylight:{show:!1,fill:"#fff",opacity:.4},set:function(t){var n,e,r={};if(!t)return this;for(n in this)if(g(this,n))if(g(t,n)&&null!==t[n])if(null===this[n]||this[n].constructor!=Object)r[n]=t[n];else for(e in r[n]={},this[n])r[n][e]=g(t[n],e)?t[n][e]:this[n][e];else r[n]=this[n];return r}};I.settings=function(){return $};var X=d3.scale.quantize().domain([3.347,-.335]).range(["#ff4700","#ff4b00","#ff4f00","#ff5300","#ff5600","#ff5900","#ff5b00","#ff5d00","#ff6000","#ff6300","#ff6500","#ff6700","#ff6900","#ff6b00","#ff6d00","#ff7000","#ff7300","#ff7500","#ff7800","#ff7a00","#ff7c00","#ff7e00","#ff8100","#ff8300","#ff8506","#ff870a","#ff8912","#ff8b1a","#ff8e21","#ff9127","#ff932c","#ff9631","#ff9836","#ff9a3c","#ff9d3f","#ffa148","#ffa34b","#ffa54f","#ffa753","#ffa957","#ffab5a","#ffad5e","#ffb165","#ffb269","#ffb46b","#ffb872","#ffb975","#ffbb78","#ffbe7e","#ffc184","#ffc489","#ffc78f","#ffc892","#ffc994","#ffcc99","#ffce9f","#ffd1a3","#ffd3a8","#ffd5ad","#ffd7b1","#ffd9b6","#ffdbba","#ffddbe","#ffdfc2","#ffe1c6","#ffe3ca","#ffe4ce","#ffe8d5","#ffe9d9","#ffebdc","#ffece0","#ffefe6","#fff0e9","#fff2ec","#fff4f2","#fff5f5","#fff6f8","#fff9fd","#fef9ff","#f9f6ff","#f6f4ff","#f3f2ff","#eff0ff","#ebeeff","#e9edff","#e6ebff","#e3e9ff","#e0e7ff","#dee6ff","#dce5ff","#d9e3ff","#d7e2ff","#d3e0ff","#c9d9ff","#bfd3ff","#b7ceff","#afc9ff","#a9c5ff","#a4c2ff","#9fbfff","#9bbcff"]),J={airy:{n:"Airys Minimum Error",arg:Math.PI/2,scale:360,ratio:1,clip:!0},aitoff:{n:"Aitoff",arg:null,scale:162},armadillo:{n:"Armadillo",arg:0,scale:250},august:{n:"August",arg:null,scale:94,ratio:1.4},azimuthalEqualArea:{n:"Azimuthal Equal Area",arg:null,scale:340,ratio:1,clip:!0},azimuthalEquidistant:{n:"Azimuthal Equidistant",arg:null,scale:320,ratio:1,clip:!0},baker:{n:"Baker Dinomic",arg:null,scale:160,ratio:1.4},berghaus:{n:"Berghaus Star",arg:0,scale:320,ratio:1,clip:!0},boggs:{n:"Boggs Eumorphic",arg:null,scale:170},bonne:{n:"Bonne",arg:Math.PI/2.5,scale:225,ratio:.88},bromley:{n:"Bromley",arg:null,scale:162},cassini:{n:"Cassini",arg:null,scale:325,ratio:1,clip:!0},collignon:{n:"Collignon",arg:null,scale:100,ratio:2.6},craig:{n:"Craig Retroazimuthal",arg:0,scale:310,ratio:1.5,clip:!0},craster:{n:"Craster Parabolic",arg:null,scale:160},cylindricalEqualArea:{n:"Cylindrical Equal Area",arg:Math.PI/6,scale:190,ratio:2.3},cylindricalStereographic:{n:"Cylindrical Stereographic",arg:Math.PI/4,scale:230,ratio:1.3},eckert1:{n:"Eckert I",arg:null,scale:175},eckert2:{n:"Eckert II",arg:null,scale:175},eckert3:{n:"Eckert III",arg:null,scale:190},eckert4:{n:"Eckert IV",arg:null,scale:190},eckert5:{n:"Eckert V",arg:null,scale:182},eckert6:{n:"Eckert VI",arg:null,scale:182},eisenlohr:{n:"Eisenlohr",arg:null,scale:102},equirectangular:{n:"Equirectangular",arg:null,scale:165},fahey:{n:"Fahey",arg:null,scale:196,ratio:1.4},mtFlatPolarParabolic:{n:"Flat Polar Parabolic",arg:null,scale:175},mtFlatPolarQuartic:{n:"Flat Polar Quartic",arg:null,scale:230,ratio:1.65},mtFlatPolarSinusoidal:{n:"Flat Polar Sinusoidal",arg:null,scale:175,ratio:1.9},foucaut:{n:"Foucaut",arg:null,scale:142},ginzburg4:{n:"Ginzburg IV",arg:null,scale:180,ratio:1.7},ginzburg5:{n:"Ginzburg V",arg:null,scale:196,ratio:1.55},ginzburg6:{n:"Ginzburg VI",arg:null,scale:190,ratio:1.4},ginzburg8:{n:"Ginzburg VIII",arg:null,scale:205,ratio:1.3},ginzburg9:{n:"Ginzburg IX",arg:null,scale:190,ratio:1.4},homolosine:{n:"Goode Homolosine",arg:null,scale:160,ratio:2.2},hammer:{n:"Hammer",arg:2,scale:180},hatano:{n:"Hatano",arg:null,scale:186},healpix:{n:"HEALPix",arg:1,scale:320,ratio:1.2},hill:{n:"Hill Eucyclic",arg:2,scale:190,ratio:1.1},kavrayskiy7:{n:"Kavrayskiy VII",arg:null,scale:185,ratio:1.75},lagrange:{n:"Lagrange",arg:Math.PI/4,scale:88,ratio:1.6,clip:!1},larrivee:{n:"l'Arrive",arg:null,scale:160,ratio:1.25},laskowski:{n:"Laskowski Tri-Optimal",arg:null,scale:165,ratio:1.7},loximuthal:{n:"Loximuthal",arg:Math.PI/4,scale:175,ratio:1.8},mercator:{n:"Mercator",arg:null,scale:160,ratio:1.3},miller:{n:"Miller",arg:null,scale:160,ratio:1.5},mollweide:{n:"Mollweide",arg:null,scale:180},naturalEarth:{n:"Natural Earth",arg:null,scale:185,ratio:1.85},nellHammer:{n:"Nell Hammer",arg:null,scale:160,ratio:2.6},orthographic:{n:"Orthographic",arg:null,scale:480,ratio:1,clip:!0},patterson:{n:"Patterson Cylindrical",arg:null,scale:160,ratio:1.75},polyconic:{n:"Polyconic",arg:null,scale:160,ratio:1.3},quincuncial:{n:"Quincuncial",arg:null,scale:160,ratio:1.3},rectangularPolyconic:{n:"Rectangular Polyconic",arg:0,scale:160,ratio:1.65},robinson:{n:"Robinson",arg:null,scale:160},sinusoidal:{n:"Sinusoidal",arg:null,scale:160,ratio:2},stereographic:{n:"Stereographic",arg:null,scale:500,ratio:1,clip:!0},times:{n:"Times",arg:null,scale:210,ratio:1.4},twoPointEquidistant:{n:"Two-Point Equidistant",arg:Math.PI/2,scale:320,ratio:1.15,clip:!0},vanDerGrinten:{n:"van Der Grinten",arg:null,scale:160,ratio:1},vanDerGrinten2:{n:"van Der Grinten II",arg:null,scale:160,ratio:1},vanDerGrinten3:{n:"van Der Grinten III",arg:null,scale:160,ratio:1},vanDerGrinten4:{n:"van Der Grinten IV",arg:null,scale:160,ratio:1.6},wagner4:{n:"Wagner IV",arg:null,scale:185},wagner6:{n:"Wagner VI",arg:null,scale:160},wagner7:{n:"Wagner VII",arg:null,scale:190,ratio:1.8},wiechel:{n:"Wiechel",arg:null,scale:360,ratio:1,clip:!0},winkel3:{n:"Winkel Tripel",arg:null,scale:196,ratio:1.7}};I.projections=function(){return J};var K={symbol:function(){function t(t){o[e()](t)}var n,e=d3.functor("circle"),r=d3.functor(64),a=d3.functor(Math.PI),i=(d3.functor("#fff"),d3.functor("")),o=(d3.functor([2,2]),{circle:function(t){var e=Math.sqrt(r())/2;return t.arc(n[0],n[1],e,0,2*Math.PI),e},square:function(t){var e=Math.sqrt(r())/1.7;return t.moveTo(n[0]-e,n[1]-e),t.lineTo(n[0]+e,n[1]-e),t.lineTo(n[0]+e,n[1]+e),t.lineTo(n[0]-e,n[1]+e),t.closePath(),e},diamond:function(t){var e=Math.sqrt(r())/1.5;return t.moveTo(n[0],n[1]-e),t.lineTo(n[0]+e,n[1]),t.lineTo(n[0],n[1]+e),t.lineTo(n[0]-e,n[1]),t.closePath(),e},triangle:function(t){var e=Math.sqrt(r())/Math.sqrt(3);return t.moveTo(n[0],n[1]-e),t.lineTo(n[0]+e,n[1]+e),t.lineTo(n[0]-e,n[1]+e),t.closePath(),e},ellipse:function(t){var e=Math.sqrt(r())/2;return t.save(),t.translate(n[0],n[1]),t.scale(1.6,.8),t.beginPath(),t.arc(0,0,e,0,2*Math.PI),t.closePath(),t.restore(),e},marker:function(t){var e=Math.sqrt(r())/2;return t.moveTo(n[0],n[1]-e),t.lineTo(n[0],n[1]+e),t.moveTo(n[0]-e,n[1]),t.lineTo(n[0]+e,n[1]),t.closePath(),e},"cross-circle":function(t){var e=Math.sqrt(r()),a=e/2;return t.moveTo(n[0],n[1]-e),t.lineTo(n[0],n[1]+e),t.moveTo(n[0]-e,n[1]),t.lineTo(n[0]+e,n[1]),t.stroke(),t.beginPath(),t.moveTo(n[0],n[1]),t.arc(n[0],n[1],a,0,2*Math.PI),t.closePath(),a},"stroke-circle":function(t){var e=Math.sqrt(r()),a=e/2;return t.moveTo(n[0],n[1]-e),t.lineTo(n[0],n[1]+e),t.stroke(),t.beginPath(),t.moveTo(n[0],n[1]),t.arc(n[0],n[1],a,0,2*Math.PI),t.closePath(),a},crescent:function(t){var e=Math.sqrt(r())/2,i=a(),o=.5*(1-Math.cos(i)),u=1.6*Math.abs(o-.5)+.01,s=i>Math.PI,l=Math.abs(o)>.5?s:!s;return t.save(),t.fillStyle="#557",t.moveTo(n[0],n[1]),t.arc(n[0],n[1],e,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle="#eee",t.beginPath(),t.moveTo(n[0],n[1]),t.arc(n[0],n[1],e,-Math.PI/2,Math.PI/2,s),t.scale(u,1),t.arc(n[0]/u,n[1],e,Math.PI/2,-Math.PI/2,l),t.closePath(),t.fill(),t.restore(),e}});return t.type=function(n){return arguments.length?(e=d3.functor(n),t):e},t.size=function(n){return arguments.length?(r=d3.functor(n),t):r},t.age=function(n){return arguments.length?(a=d3.functor(n),t):a},t.text=function(n){return arguments.length?(i=d3.functor(n),t):i},t.position=function(e){return arguments.length?(n=e,t):void 0},t}};I.Canvas=K;var tt={sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-t))/2},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-t))/2},tanh:function(t){return 2/(1+Math.exp(-2*t))-1},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},normalize0:function(t){return(t+3*Math.PI)%(2*Math.PI)-Math.PI},normalize:function(t){return(t+2*Math.PI)%(2*Math.PI)},cartesian:function(t){var n=t[0],e=V-t[1],r=t[2];return{x:r*Math.sin(e)*Math.cos(n),y:r*Math.sin(e)*Math.sin(n),z:r*Math.cos(e)}},spherical:function(t){var n=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),e=Math.atan(t.y/t.x),r=Math.acos(t.z/n);return[e/W,r/W,n]},distance:function(t,n){return Math.acos(Math.sin(t[1])*Math.sin(n[1])+Math.cos(t[1])*Math.cos(n[1])*Math.cos(t[0]-n[0]))}},nt={"stars-show":["stars-limit","stars-colors","stars-style-fill","stars-names","stars-size","stars-exponent"],"stars-names":["stars-proper","stars-desig","stars-namelimit"],"stars-proper":["stars-propernamelimit"],"dsos-show":["dsos-limit","dsos-names","dsos-size","dsos-exponent"],"dsos-names":["dsos-desig","dsos-namelimit"],"mw-show":["mw-style-opacity","mw-style-fill"],"constellations-names":["constellations-desig"]},et={sol:.0002959122082855911,mer:0x95955473dbc3,ven:0x89d9374048629,ter:0xa923c08a47948,lun:36599199229256,mar:319711652803400,cer:467549107200,ves:129071530155,jup:0xd2088431b2a1400,sat:0x3ee37dea29c61e0,ura:0x99ad2c257ccb88,nep:0xb54f909dc5b7b8,plu:7327611364884,eri:827117568e4},rt={sol:"",mer:"",ven:"",ter:"",lun:"",mar:"",cer:"",ves:"",jup:"",sat:"",ura:"",nep:"",plu:"",eri:""},at=23.43928*W,it=Math.sin(at),ot=Math.cos(at),ut=["a","e","i","w","M","L","W","N","n","ep","ref","lecl","becl","Tilt"],st=function(){function t(n){return d(n),"sol"===u?(p.x=0,p.y=0,p.z=0,t):(v(),t)}function n(t,n){for(var e=n>1?t*t:-t*t,r=n*e*t/6,a=(1-n)*t-r,i=4;Math.abs(r)>1e-15;)a-=r*=e/(i*(i+1)),i+=2;return a}function r(){var t,e,r,a,i=p.e,o=p.M,u=1e-8,s=0,l=1.9,c=!1,h=0;if(!o)return 0;if(1>i&&((o<-Math.PI||o>Math.PI)&&(s=o-(a=tt.normalize0(o)),o=a),.9>i)){t=Math.atan2(Math.sin(o),Math.cos(o)-i);do{t-=e=(t-i*Math.sin(t)-o)/(1-i*Math.cos(t))}while(Math.abs(e)>u);return t}if(0>o&&(o=-o,c=!0),t=o,1e-15>(u*=Math.abs(1-i))&&(u=1e-15),(i>.8&&o<Math.PI/3||i>1)&&((r=o/Math.abs(1-i))*r>6*Math.abs(1-i)&&(r=o<Math.PI?Math.pow(6*o,1/3):tt.asinh(o/i)),t=r),i>1&&o>4&&(t=Math.log(o)),1>i)for(;Math.abs(l)>u;)t+=l=-(e=h++>8?n(t,i)-o:t-i*Math.sin(t)-o)/(1-i*Math.cos(t));else for(;Math.abs(l)>u;)t+=l=-(e=h++>7?-n(t,i)-o:i*tt.sinh(t)-t-o)/(i*tt.cosh(t)-1);return c?s-t:s+t}function a(t){at=(23.439292-.0130042*p.cy-1.667e-7*p.cy*p.cy+5.028e-7*p.cy*p.cy*p.cy)*W,it=Math.sin(at),ot=Math.cos(at);var n="lun"===u?{x:0,y:0,z:0}:{x:t.x,y:t.y,z:t.z};p.xeq=p.x-n.x,p.yeq=(p.y-n.y)*ot-(p.z-n.z)*it,p.zeq=(p.y-n.y)*it+(p.z-n.z)*ot,p.ra=tt.normalize(Math.atan2(p.yeq,p.xeq)),p.dec=Math.atan2(p.zeq,Math.sqrt(p.xeq*p.xeq+p.yeq*p.yeq)),"lun"===u&&(p=function(t,n){return i(),void 0!==lt?lt.corr(t,n):void 0}(p,t)),p.pos=[p.ra/W,p.dec/W],p.rt=Math.sqrt(p.xeq*p.xeq+p.yeq*p.yeq+p.zeq*p.zeq)}function i(){var t=Math.atan2(p.y,p.x),n=Math.atan2(p.z,Math.sqrt(p.x*p.x+p.y*p.y));return p.l=tt.normalize(t),p.b=n,p}function o(t){var n=t.getUTCFullYear(),e=t.getUTCMonth()+1,r=t.getUTCDate(),a=(t.getUTCHours()-12+t.getUTCMinutes()/60+t.getUTCSeconds()/3600)/24;if(-4799>n)return-1;var i=Math.floor((14-e)/12),o=n+4800-i,u=e+12*i-3;return r+Math.floor((153*u+2)/5)+365*o+Math.floor(o/4)-Math.floor(o/100)+Math.floor(o/400)-32045+a}var u,s,l,c=et.sol,h="sol",f={},p={},d=function(t){var n;p=[],t&&(n=t instanceof Date?new Date(t.valueOf()):y(t)),n||(n=new Date),p.jd=o(n),(n=y(f.ep))||(n=y("2000-01-01")),p.jd0=o(n),p.d=p.jd-p.jd0,p.cy=p.d/36525},v=function(){var t;if("lun"===u){if(!(p=function(t){return void 0!==lt?lt.elements(t):void 0}(p)))return}else{for(var n=0;n<ut.length;n++)g(f,t=ut[n])&&(g(f,"d"+t)?p[t]=f[t]+f["d"+t]*p.cy:g(f,t)&&(p[t]=f[t]));g(p,"M")&&!g(p,"dM")&&g(p,"n")&&(p.M+=p.n*p.d)}p.hasOwnProperty("w")||(p.w=p.W-p.N),p.hasOwnProperty("M")||(p.M=p.L-p.W),p.e<1&&(p.M=tt.normalize0(p.M)),p.P=B*Math.sqrt(Math.pow(p.a,3)/c)/365.25,p.T=p.jd0-p.M/V/p.P,1!==p.e?(p.q=p.a*(1-p.e),p.t0=p.a*Math.sqrt(Math.abs(p.a)/c)):(p.w0=3/Math.sqrt(2)/(p.q*Math.sqrt(p.q/c)),p.a=0,p.t0=0),p.am=Math.sqrt(c*p.q*(1+p.e)),function(){var t,n,e,a,i;1===p.e?(i=p.jd0-p.T,a=p.w0*i*.5,n=Math.pow(a+Math.sqrt(a*a+1),1/3),p.v=2*Math.atan(n-1/n)):(p.E=r(),p.e>1?(t=p.e-tt.cosh(p.E),n=tt.sinh(p.E)):(t=Math.cos(p.E)-p.e,n=Math.sin(p.E)),n*=Math.sqrt(Math.abs(1-p.e*p.e)),p.v=Math.atan2(n,t)),e=p.q*(1+p.e),p.r=e/(1+p.e*Math.cos(p.v))}(),function(){var t=p.v+p.w;p.x=p.r*(Math.cos(p.N)*Math.cos(t)-Math.sin(p.N)*Math.sin(t)*Math.cos(p.i)),p.y=p.r*(Math.sin(p.N)*Math.cos(t)+Math.cos(p.N)*Math.sin(t)*Math.cos(p.i)),p.z=p.r*Math.sin(t)*Math.sin(p.i)}()};return t.cartesian=function(){return p},t.spherical=function(){return i(),p},t.equatorial=function(t){return a(t),p},t.transpose=function(){return function(){if(!p.ref||"ecl"===p.ref)return p.tx=p.x,p.ty=p.y,void(p.tz=p.z);var t=p.lecl,n=Math.PI/2-p.becl;e(p,[0,n,-t]);var r=tt.cartesian([p.tl,p.tb,p.r]);p.tx=r.x,p.ty=r.y,p.tz=r.z}(),p},t.elements=function(n){var e;if(!arguments.length)return f;for(var r=0;r<ut.length;r++)g(n,e=ut[r])&&(f[e]=n[e],"a"===e||"e"===e?f[e]*=1:"ref"!==e&&"ep"!==e&&(f[e]*=W),g(n,"d"+e)&&(f[e="d"+e]=n[e],f[e]*="da"===e||"de"===e?1:W));return t},t.parentBody=function(n){return arguments.length?(c=et[h=n],t):h},t.id=function(n){return arguments.length?(u=n,l=rt[n],t):u},t.Name=function(n){return arguments.length?(s=n,t):s},t.symbol=function(n){return arguments.length?(l=rt[n],t):l},t},lt={elements:function(t){var n=(t.jd-2451545)/36525,e=n*n,r=n*e,a=1e-4*e,i=1e-6*r,o=1e-8*(n*r),u=383397.6+(3400.4*Math.cos(W*(235.7004+890534.223*n-32.601*a+3.664*i-1.769*o))-635.6*Math.cos(W*(100.737+413335.3554*n-122.571*a-10.684*i+5.028*o))-235.6*Math.cos(W*(134.9634+477198.8676*n+89.97*a+14.348*i-6.797*o))+218.1*Math.cos(W*(238.1713+854535.1727*n-31.065*a+3.623*i-1.769*o))+181*Math.cos(W*(10.6638+1367733.0907*n+57.37*a+18.011*i-8.566*o))-39.9*Math.cos(W*(103.2079+377336.3051*n-121.035*a-10.724*i+5.028*o))-38.4*Math.cos(W*(233.2295+926533.2733*n-34.136*a+3.705*i-1.769*o))+33.8*Math.cos(W*(336.4374+1303869.5784*n-155.171*a-7.02*i+3.259*o))+28.8*Math.cos(W*(111.4008+1781068.4461*n-65.201*a+7.328*i-3.538*o))+12.6*Math.cos(W*(13.1347+1331734.0404*n+58.906*a+17.971*i-8.566*o))+11.4*Math.cos(W*(186.5442+966404.0351*n-68.058*a-.567*i+.232*o))-11.1*Math.cos(W*(222.5657-441199.8173*n-91.506*a-14.307*i+6.797*o))-10.2*Math.cos(W*(269.9268+954397.7353*n+179.941*a+28.695*i-13.594*o))+9.7*Math.cos(W*(145.6272+1844931.9583*n+147.34*a+32.359*i-15.363*o))+9.6*Math.cos(W*(240.6422+818536.1225*n-29.529*a+3.582*i-1.769*o))+8*Math.cos(W*(297.8502+445267.1115*n-16.3*a+1.832*i-.884*o))-6.2*Math.cos(W*(132.4925+513197.9179*n+88.434*a+14.388*i-6.797*o))+6*Math.cos(W*(173.5506+1335801.3346*n-48.901*a+5.496*i-2.653*o))+3.7*Math.cos(W*(113.8717+1745069.3958*n-63.665*a+7.287*i-3.538*o))+3.6*Math.cos(W*(338.9083+1267870.5281*n-153.636*a-7.061*i+3.259*o))+3.2*Math.cos(W*(246.3642+2258267.3137*n+24.769*a+21.675*i-10.335*o))-3*Math.cos(W*(8.1929+1403732.141*n+55.834*a+18.052*i-8.566*o))+2.3*Math.cos(W*(98.2661+449334.4057*n-124.107*a-10.643*i+5.028*o))-2.2*Math.cos(W*(357.5291+35999.0503*n-1.536*a+.041*i+0*o))-2*Math.cos(W*(38.5872+858602.4669*n-138.871*a-8.852*i+4.144*o))-1.8*Math.cos(W*(105.6788+341337.2548*n-119.499*a-10.765*i+5.028*o))-1.7*Math.cos(W*(201.474+826670.7108*n-245.142*a-21.367*i+10.057*o))+1.6*Math.cos(W*(184.1196+401329.0556*n+125.428*a+18.579*i-8.798*o))-1.4*Math.cos(W*(308.4192-489205.1674*n+158.029*a+14.915*i-7.029*o))+1.3*Math.cos(W*(325.7736-63863.5122*n-212.541*a-25.031*i+11.826*o)))+(-.55*Math.cos(W*(238.2+854535.2*n))+.1*Math.cos(W*(103.2+377336.3*n))+.1*Math.cos(W*(233.2+926533.3*n)))*n,s=.055544+(.014217*Math.cos(W*(100.737+413335.3554*n-122.571*a-10.684*i+5.028*o))+.008551*Math.cos(W*(325.7736-63863.5122*n-212.541*a-25.031*i+11.826*o))-.001383*Math.cos(W*(134.9634+477198.8676*n+89.97*a+14.348*i-6.797*o))+.001353*Math.cos(W*(10.6638+1367733.0907*n+57.37*a+18.011*i-8.566*o))-.001146*Math.cos(W*(66.5106+349471.8432*n-335.112*a-35.715*i+16.854*o))-915e-6*Math.cos(W*(201.474+826670.7108*n-245.142*a-21.367*i+10.057*o))+869e-6*Math.cos(W*(103.2079+377336.3051*n-121.035*a-10.724*i+5.028*o))-628e-6*Math.cos(W*(235.7004+890534.223*n-32.601*a+3.664*i-1.769*o))-393e-6*Math.cos(W*(291.5472-127727.0245*n-425.082*a-50.062*i+23.651*o))+284e-6*Math.cos(W*(328.2445-99862.5625*n-211.005*a-25.072*i+11.826*o))-278e-6*Math.cos(W*(162.8868-31931.7561*n-106.271*a-12.516*i+5.913*o))-24e-5*Math.cos(W*(269.9268+954397.7353*n+179.941*a+28.695*i-13.594*o))+23e-5*Math.cos(W*(111.4008+1781068.4461*n-65.201*a+7.328*i-3.538*o))+229e-6*Math.cos(W*(167.2476+762807.1986*n-457.683*a-46.398*i+21.882*o))-202e-6*Math.cos(W*(83.3826-12006.2998*n+247.999*a+29.262*i-13.826*o))+19e-5*Math.cos(W*(190.8102-541062.3799*n-302.511*a-39.379*i+18.623*o))+177e-6*Math.cos(W*(357.5291+35999.0503*n-1.536*a+.041*i+0*o))+153e-6*Math.cos(W*(32.2842+285608.3309*n-547.653*a-60.746*i+28.679*o))-137e-6*Math.cos(W*(44.8902+1431596.6029*n+269.911*a+43.043*i-20.392*o))+122e-6*Math.cos(W*(145.6272+1844931.9583*n+147.34*a+32.359*i-15.363*o))+116e-6*Math.cos(W*(302.211+1240006.0662*n-367.713*a-32.051*i+15.085*o))-111e-6*Math.cos(W*(203.9449+790671.6605*n-243.606*a-21.408*i+10.057*o))-108e-6*Math.cos(W*(68.9815+313472.7929*n-333.576*a-35.756*i+16.854*o))+96e-6*Math.cos(W*(336.4374+1303869.5784*n-155.171*a-7.02*i+3.259*o))-9e-5*Math.cos(W*(98.2661+449334.4057*n-124.107*a-10.643*i+5.028*o))+9e-5*Math.cos(W*(13.1347+1331734.0404*n+58.906*a+17.971*i-8.566*o))+56e-6*Math.cos(W*(55.8468-1018261.2475*n-392.482*a-53.726*i+25.42*o))-56e-6*Math.cos(W*(238.1713+854535.1727*n-31.065*a+3.623*i-1.769*o))+52e-6*Math.cos(W*(308.4192-489205.1674*n+158.029*a+14.915*i-7.029*o))-5e-5*Math.cos(W*(133.0212+698943.6863*n-670.224*a-71.429*i+33.708*o))-49e-6*Math.cos(W*(267.9846+1176142.554*n-580.254*a-57.082*i+26.911*o))-49e-6*Math.cos(W*(184.1196+401329.0556*n+125.428*a+18.579*i-8.798*o))-45e-6*Math.cos(W*(49.1562-75869.812*n+35.458*a+4.231*i-2.001*o))+44e-6*Math.cos(W*(257.3208-191590.5367*n-637.623*a-75.093*i+35.477*o))+42e-6*Math.cos(W*(105.6788+341337.2548*n-119.499*a-10.765*i+5.028*o))+42e-6*Math.cos(W*(160.4159+4067.2942*n-107.806*a-12.475*i+5.913*o))+4e-5*Math.cos(W*(246.3642+2258267.3137*n+24.769*a+21.675*i-10.335*o))-4e-5*Math.cos(W*(156.5838-604925.8921*n-515.053*a-64.41*i+30.448*o))+36e-6*Math.cos(W*(169.7185+726808.1483*n-456.147*a-46.439*i+21.882*o))+29e-6*Math.cos(W*(113.8717+1745069.3958*n-63.665*a+7.287*i-3.538*o))-29e-6*Math.cos(W*(297.8502+445267.1115*n-16.3*a+1.832*i-.884*o))-28e-6*Math.cos(W*(294.0181-163726.0747*n-423.546*a-50.103*i+23.651*o))+27e-6*Math.cos(W*(263.6238+381403.5993*n-228.841*a-23.199*i+10.941*o))-26e-6*Math.cos(W*(358.0578+221744.8187*n-760.194*a-85.777*i+40.505*o))-26e-6*Math.cos(W*(8.1929+1403732.141*n+55.834*a+18.052*i-8.566*o)))+.001*n*(-.0022*Math.cos(W*(103.2+377336.3*n))),l=.0449858+(.0011776*Math.cos(W*(49.1562-75869.812*n+35.458*a+4.231*i-2.001*o))-971e-7*Math.cos(W*(235.7004+890534.223*n-32.601*a+3.664*i-1.769*o))+908e-7*Math.cos(W*(186.5442+966404.0351*n-68.058*a-.567*i+.232*o))+623e-7*Math.cos(W*(83.3826-12006.2998*n+247.999*a+29.262*i-13.826*o))+483e-7*Math.cos(W*(51.6271-111868.8623*n+36.994*a+4.19*i-2.001*o))+348e-7*Math.cos(W*(100.737+413335.3554*n-122.571*a-10.684*i+5.028*o))-316e-7*Math.cos(W*(308.4192-489205.1674*n+158.029*a+14.915*i-7.029*o))-253e-7*Math.cos(W*(46.6853-39870.7617*n+33.922*a+4.272*i-2.001*o))-141e-7*Math.cos(W*(274.1928-553068.6797*n-54.513*a-10.116*i+4.797*o))+127e-7*Math.cos(W*(325.7736-63863.5122*n-212.541*a-25.031*i+11.826*o))+117e-7*Math.cos(W*(184.1196+401329.0556*n+125.428*a+18.579*i-8.798*o))-78e-7*Math.cos(W*(98.3124-151739.624*n+70.916*a+8.462*i-4.001*o))-63e-7*Math.cos(W*(238.1713+854535.1727*n-31.065*a+3.623*i-1.769*o))+63e-7*Math.cos(W*(134.9634+477198.8676*n+89.97*a+14.348*i-6.797*o))+36e-7*Math.cos(W*(321.5076+1443602.9027*n+21.912*a+13.78*i-6.566*o))-35e-7*Math.cos(W*(10.6638+1367733.0907*n+57.37*a+18.011*i-8.566*o))+24e-7*Math.cos(W*(149.8932+337465.5434*n-87.113*a-6.453*i+3.028*o))+24e-7*Math.cos(W*(170.9849-930404.9848*n+66.523*a+.608*i-.232*o)))+.001*(-.0203*Math.cos(W*(125-1934.1*n))+.0034*Math.cos(W*(220.2-1935.5*n))),c=83.353+4069.0137*n-103.238*a-12.492*i+5.263*o+(-15.448*Math.sin(W*(100.737+413335.3554*n-122.571*a-10.684*i+5.028*o))-9.642*Math.sin(W*(325.7736-63863.5122*n-212.541*a-25.031*i+11.826*o))-2.721*Math.sin(W*(134.9634+477198.8676*n+89.97*a+14.348*i-6.797*o))+2.607*Math.sin(W*(66.5106+349471.8432*n-335.112*a-35.715*i+16.854*o))+2.085*Math.sin(W*(201.474+826670.7108*n-245.142*a-21.367*i+10.057*o))+1.477*Math.sin(W*(10.6638+1367733.0907*n+57.37*a+18.011*i-8.566*o))+.968*Math.sin(W*(291.5472-127727.0245*n-425.082*a-50.062*i+23.651*o))-.949*Math.sin(W*(103.2079+377336.3051*n-121.035*a-10.724*i+5.028*o))-.703*Math.sin(W*(167.2476+762807.1986*n-457.683*a-46.398*i+21.882*o))-.66*Math.sin(W*(235.7004+890534.223*n-32.601*a+3.664*i-1.769*o))-.577*Math.sin(W*(190.8102-541062.3799*n-302.511*a-39.379*i+18.623*o))-.524*Math.sin(W*(269.9268+954397.7353*n+179.941*a+28.695*i-13.594*o))-.482*Math.sin(W*(32.2842+285608.3309*n-547.653*a-60.746*i+28.679*o))+.452*Math.sin(W*(357.5291+35999.0503*n-1.536*a+.041*i+0*o))-.381*Math.sin(W*(302.211+1240006.0662*n-367.713*a-32.051*i+15.085*o))-.342*Math.sin(W*(328.2445-99862.5625*n-211.005*a-25.072*i+11.826*o))-.312*Math.sin(W*(44.8902+1431596.6029*n+269.911*a+43.043*i-20.392*o))+.282*Math.sin(W*(162.8868-31931.7561*n-106.271*a-12.516*i+5.913*o))+.255*Math.sin(W*(203.9449+790671.6605*n-243.606*a-21.408*i+10.057*o))+.252*Math.sin(W*(68.9815+313472.7929*n-333.576*a-35.756*i+16.854*o))-.211*Math.sin(W*(83.3826-12006.2998*n+247.999*a+29.262*i-13.826*o))+.193*Math.sin(W*(267.9846+1176142.554*n-580.254*a-57.082*i+26.911*o))+.191*Math.sin(W*(133.0212+698943.6863*n-670.224*a-71.429*i+33.708*o))-.184*Math.sin(W*(55.8468-1018261.2475*n-392.482*a-53.726*i+25.42*o))+.182*Math.sin(W*(145.6272+1844931.9583*n+147.34*a+32.359*i-15.363*o))-.158*Math.sin(W*(257.3208-191590.5367*n-637.623*a-75.093*i+35.477*o))+.148*Math.sin(W*(156.5838-604925.8921*n-515.053*a-64.41*i+30.448*o))-.111*Math.sin(W*(169.7185+726808.1483*n-456.147*a-46.439*i+21.882*o))+.101*Math.sin(W*(13.1347+1331734.0404*n+58.906*a+17.971*i-8.566*o))+.1*Math.sin(W*(358.0578+221744.8187*n-760.194*a-85.777*i+40.505*o))+.087*Math.sin(W*(98.2661+449334.4057*n-124.107*a-10.643*i+5.028*o))+.08*Math.sin(W*(42.948+1653341.4216*n-490.283*a-42.734*i+20.113*o))+.08*Math.sin(W*(222.5657-441199.8173*n-91.506*a-14.307*i+6.797*o))+.077*Math.sin(W*(294.0181-163726.0747*n-423.546*a-50.103*i+23.651*o))-.073*Math.sin(W*(280.8834-1495460.1151*n-482.452*a-68.074*i+32.217*o))-.071*Math.sin(W*(304.6819+1204007.0159*n-366.177*a-32.092*i+15.085*o))-.069*Math.sin(W*(233.7582+1112279.0417*n-792.795*a-82.113*i+38.736*o))-.067*Math.sin(W*(34.7551+249609.2807*n-546.117*a-60.787*i+28.679*o))-.067*Math.sin(W*(263.6238+381403.5993*n-228.841*a-23.199*i+10.941*o))+.055*Math.sin(W*(21.6203-1082124.7597*n-605.023*a-78.757*i+37.246*o))+.055*Math.sin(W*(308.4192-489205.1674*n+158.029*a+14.915*i-7.029*o))-.054*Math.sin(W*(8.7216+1589477.9094*n-702.824*a-67.766*i+31.939*o))-.052*Math.sin(W*(179.8536+1908795.4705*n+359.881*a+57.39*i-27.189*o))-.05*Math.sin(W*(98.7948+635080.1741*n-882.765*a-96.461*i+45.533*o))-.049*Math.sin(W*(128.6604-95795.2683*n-318.812*a-37.547*i+17.738*o))-.047*Math.sin(W*(17.3544+425341.6552*n-370.57*a-39.946*i+18.854*o))-.044*Math.sin(W*(160.4159+4067.2942*n-107.806*a-12.475*i+5.913*o))-.043*Math.sin(W*(238.1713+854535.1727*n-31.065*a+3.623*i-1.769*o))+.042*Math.sin(W*(270.4555+1140143.5037*n-578.718*a-57.123*i+26.911*o))-.042*Math.sin(W*(132.4925+513197.9179*n+88.434*a+14.388*i-6.797*o))-.041*Math.sin(W*(122.3573-668789.4043*n-727.594*a-89.441*i+42.274*o))-.04*Math.sin(W*(105.6788+341337.2548*n-119.499*a-10.765*i+5.028*o))+.038*Math.sin(W*(135.4921+662944.6361*n-668.688*a-71.47*i+33.708*o))-.037*Math.sin(W*(242.391-51857.2124*n-460.54*a-54.293*i+25.652*o))+.036*Math.sin(W*(336.4374+1303869.5784*n-155.171*a-7.02*i+3.259*o))+.035*Math.sin(W*(223.0943-255454.0489*n-850.164*a-100.124*i+47.302*o))-.034*Math.sin(W*(193.2811-577061.4302*n-300.976*a-39.419*i+18.623*o))+.031*Math.sin(W*(87.6023-918398.685*n-181.476*a-28.654*i+13.594*o)))+.001*n*(2.4*Math.sin(W*(103.2+377336.3*n))),h=125.0446-1934.13618*n+20.762*a+2.139*i-1.65*o+(-1.4979*Math.sin(W*(49.1562-75869.812*n+35.458*a+4.231*i-2.001*o))-.15*Math.sin(W*(357.5291+35999.0503*n-1.536*a+.041*i+0*o))-.1226*Math.sin(W*(235.7004+890534.223*n-32.601*a+3.664*i-1.769*o))+.1176*Math.sin(W*(186.5442+966404.0351*n-68.058*a-.567*i+.232*o))-.0801*Math.sin(W*(83.3826-12006.2998*n+247.999*a+29.262*i-13.826*o))-.0616*Math.sin(W*(51.6271-111868.8623*n+36.994*a+4.19*i-2.001*o))+.049*Math.sin(W*(100.737+413335.3554*n-122.571*a-10.684*i+5.028*o))+.0409*Math.sin(W*(308.4192-489205.1674*n+158.029*a+14.915*i-7.029*o))+.0327*Math.sin(W*(134.9634+477198.8676*n+89.97*a+14.348*i-6.797*o))+.0324*Math.sin(W*(46.6853-39870.7617*n+33.922*a+4.272*i-2.001*o))+.0196*Math.sin(W*(98.3124-151739.624*n+70.916*a+8.462*i-4.001*o))+.018*Math.sin(W*(274.1928-553068.6797*n-54.513*a-10.116*i+4.797*o))+.015*Math.sin(W*(325.7736-63863.5122*n-212.541*a-25.031*i+11.826*o))-.015*Math.sin(W*(184.1196+401329.0556*n+125.428*a+18.579*i-8.798*o))-.0078*Math.sin(W*(238.1713+854535.1727*n-31.065*a+3.623*i-1.769*o))-.0045*Math.sin(W*(10.6638+1367733.0907*n+57.37*a+18.011*i-8.566*o))+.0044*Math.sin(W*(321.5076+1443602.9027*n+21.912*a+13.78*i-6.566*o))-.0042*Math.sin(W*(162.8868-31931.7561*n-106.271*a-12.516*i+5.913*o))-.0031*Math.sin(W*(170.9849-930404.9848*n+66.523*a+.608*i-.232*o))+.0031*Math.sin(W*(103.2079+377336.3051*n-121.035*a-10.724*i+5.028*o))+.0029*Math.sin(W*(222.612-1042273.8471*n+103.516*a+4.798*i-2.232*o))+.0028*Math.sin(W*(184.0733+1002403.0853*n-69.594*a-.526*i+.232*o)))+.001*(25.9*Math.sin(W*(125-1934.1*n))-4.3*Math.sin(W*(220.2-1935.5*n))+.38*Math.sin(W*(357.5+35999.1*n))*n),f=218.31665+481267.88134*n-13.268*a+1.856*i-1.534*o+(-.92581*Math.sin(W*(235.7004+890534.223*n-32.601*a+3.664*i-1.769*o))+.33262*Math.sin(W*(100.737+413335.3554*n-122.571*a-10.684*i+5.028*o))-.18402*Math.sin(W*(357.5291+35999.0503*n-1.536*a+.041*i+0*o))+.11007*Math.sin(W*(134.9634+477198.8676*n+89.97*a+14.348*i-6.797*o))-.06055*Math.sin(W*(238.1713+854535.1727*n-31.065*a+3.623*i-1.769*o))+.04741*Math.sin(W*(325.7736-63863.5122*n-212.541*a-25.031*i+11.826*o))-.03086*Math.sin(W*(10.6638+1367733.0907*n+57.37*a+18.011*i-8.566*o))+.02184*Math.sin(W*(103.2079+377336.3051*n-121.035*a-10.724*i+5.028*o))+.01645*Math.sin(W*(49.1562-75869.812*n+35.458*a+4.231*i-2.001*o))+.01022*Math.sin(W*(233.2295+926533.2733*n-34.136*a+3.705*i-1.769*o))-.00756*Math.sin(W*(336.4374+1303869.5784*n-155.171*a-7.02*i+3.259*o))-.0053*Math.sin(W*(222.5657-441199.8173*n-91.506*a-14.307*i+6.797*o))-.00496*Math.sin(W*(162.8868-31931.7561*n-106.271*a-12.516*i+5.913*o))-.00472*Math.sin(W*(297.8502+445267.1115*n-16.3*a+1.832*i-.884*o))-.00271*Math.sin(W*(240.6422+818536.1225*n-29.529*a+3.582*i-1.769*o))+.00264*Math.sin(W*(132.4925+513197.9179*n+88.434*a+14.388*i-6.797*o))-.00254*Math.sin(W*(186.5442+966404.0351*n-68.058*a-.567*i+.232*o))+.00234*Math.sin(W*(269.9268+954397.7353*n+179.941*a+28.695*i-13.594*o))-.0022*Math.sin(W*(13.1347+1331734.0404*n+58.906*a+17.971*i-8.566*o))-.00202*Math.sin(W*(355.0582+71998.1006*n-3.072*a+.082*i+0*o))+.00167*Math.sin(W*(328.2445-99862.5625*n-211.005*a-25.072*i+11.826*o))-.00143*Math.sin(W*(173.5506+1335801.3346*n-48.901*a+5.496*i-2.653*o))-.00121*Math.sin(W*(98.2661+449334.4057*n-124.107*a-10.643*i+5.028*o))-.00116*Math.sin(W*(145.6272+1844931.9583*n+147.34*a+32.359*i-15.363*o))+.00102*Math.sin(W*(105.6788+341337.2548*n-119.499*a-10.765*i+5.028*o))-9e-4*Math.sin(W*(184.1196+401329.0556*n+125.428*a+18.579*i-8.798*o))-86e-5*Math.sin(W*(338.9083+1267870.5281*n-153.636*a-7.061*i+3.259*o))-78e-5*Math.sin(W*(111.4008+1781068.4461*n-65.201*a+7.328*i-3.538*o))+69e-5*Math.sin(W*(323.3027-27864.4619*n-214.077*a-24.99*i+11.826*o))+66e-5*Math.sin(W*(51.6271-111868.8623*n+36.994*a+4.19*i-2.001*o))+65e-5*Math.sin(W*(38.5872+858602.4669*n-138.871*a-8.852*i+4.144*o))-6e-4*Math.sin(W*(83.3826-12006.2998*n+247.999*a+29.262*i-13.826*o))+54e-5*Math.sin(W*(201.474+826670.7108*n-245.142*a-21.367*i+10.057*o))-52e-5*Math.sin(W*(308.4192-489205.1674*n+158.029*a+14.915*i-7.029*o))+48e-5*Math.sin(W*(8.1929+1403732.141*n+55.834*a+18.052*i-8.566*o))-41e-5*Math.sin(W*(46.6853-39870.7617*n+33.922*a+4.272*i-2.001*o))-33e-5*Math.sin(W*(274.1928-553068.6797*n-54.513*a-10.116*i+4.797*o))+3e-4*Math.sin(W*(160.4159+4067.2942*n-107.806*a-12.475*i+5.913*o)))+.001*(3.96*Math.sin(W*(119.7+131.8*n))+1.96*Math.sin(W*(125-1934.1*n))+(.463*Math.sin(W*(357.5+35999.1*n))+.152*Math.sin(W*(238.2+854535.2*n))-.071*Math.sin(W*(27.8+131.8*n))-.055*Math.sin(W*(103.2+377336.3*n))-.026*Math.sin(W*(233.2+926533.3*n)))*n+(14*Math.sin(W*(357.5+35999.1*n))+5*Math.sin(W*(238.2+854535.2*n)))*a);return t.a=u,t.e=s,t.i=2*Math.asin(l),t.w=tt.normalize(W*(c-h)),t.N=tt.normalize(W*h),t.M=tt.normalize(W*(f-c)),t},corr:function(t,n){var e=tt.normalize(n.M+Math.PI),r=tt.normalize(n.w+Math.PI),a=t.M+t.w,i=a+t.N-e-r,o=-.022234*Math.sin(t.M-2*i)+.011494*Math.sin(2*i)+-.003246*Math.sin(e)+-.001029*Math.sin(2*t.M-2*i)+-994838e-9*Math.sin(t.M-2*i+e)+925025e-9*Math.sin(t.M+2*i)+802851e-9*Math.sin(2*i-e)+715585e-9*Math.sin(t.M-e)+-610865e-9*Math.sin(i)+-541052e-9*Math.sin(t.M+e)+-261799e-9*Math.sin(2*a-2*i)+191986e-9*Math.sin(t.M-4*i);t.ra+=o;var u=-.003019*Math.sin(a-2*i)+-959931e-9*Math.sin(t.M-a-2*i)+-802851e-9*Math.sin(t.M+a-2*i)+575958e-9*Math.sin(a+2*i)+296706e-9*Math.sin(2*t.M+a);return t.dec+=u,t.age=tt.normalize(t.l-n.l+Math.PI),t.phase=.5*(1-Math.cos(t.age)),t}},ct=function(t,n){function e(){var t=h("mon").value,n=h("yr").value,e=new Date(n,t,1),r=d3.select("#cal"),a=new Date;n=parseInt(n),t=parseInt(t),e.setDate(e.getDate()-e.getDay());for(var i=r.node();i.firstChild;)i.removeChild(i.firstChild);for(var o=0;7>o;o++)r.append("div").classed({date:!0,weekday:!0}).html(g[o]);for(o=0;42>o;o++){var u=e.getMonth(),s=e.getDay(),f=M(e);r.append("div").classed({date:!0,grey:u!==t,weekend:u===t&&(0===s||6===s),today:0===m(e,a),selected:0===m(e,c)}).attr("id",f).on("click",l).html(e.getDate().toString()),e.setDate(e.getDate()+1)}}function r(){var t=d3.select("select#yr"),n=c.getFullYear(),e=0,r=i(c);t.selectAll("*").remove(),t.selectAll("option").data(r).enter().append("option").text(function(t,r){return t===n&&(e=r),t.toString()}),t.property("selectedIndex",e)}function a(t){b.append("div").attr("id",t).on("click",function(){var n=h("mon"),r=h("yr");"left"===t?0===n.selectedIndex?(n.selectedIndex=11,r.selectedIndex--):n.selectedIndex--:11===n.selectedIndex?(n.selectedIndex=0,r.selectedIndex++):n.selectedIndex++,e()})}function i(t){for(var n=function(t){return!y||y.length<1?[t-10,t+10]:1===y.length&&v(y[0])?y[0]>=100?[y[0]-10,y[0]+10]:[t-y[0],t+y[0]]:2===y.length&&v(y[0])&&v(y[1])?y[1]>=100?[y[0],y[1]]:[y[0]-y[1],y[0]+y[1]]:[t-10,t+10]}(t.getFullYear()),e=[],r=n[0];r<=n[1];r++)e.push(r);return e}function o(t,n){for(var e=h(t),r=0;r<e.childNodes.length;r++)if(e.childNodes[r].value==n){e.selectedIndex=r;break}}function u(t){t&&c.setTime(t.valueOf()),o("yr",c.getFullYear()),o("mon",c.getMonth()),e(),h("hr").value=c.getHours(),h("min").value=c.getMinutes(),h("sec").value=c.getSeconds()}function s(){d3.select("#celestial-date").style("opacity",0),d3.select("#error").style({top:"-9999px",left:"-9999px",opacity:0}),d3.select("#datepick").classed("active",!1),setTimeout(function(){h("celestial-date").style.top=f(-9999)},600)}function l(){var t=h("hr").value,e=h("min").value,a=h("sec").value,i=h("tz").value;this.id&&-1!==this.id.search(/^\d/)&&(c=M.parse(this.id)),r(),c.setHours(t,e,a),u(),n(c,i)}var c=new Date,p=(d3.time.format("%Z"),[{"12:00":720},{"11:00":660},{"10:00":600},{"09:30":570},{"09:00":540},{"08:00":480},{"07:00":420},{"06:00":360},{"05:00":300},{"04:30":270},{"04:00":240},{"03:30":210},{"03:00":180},{"02:00":120},{"01:00":60},{"00:00":0},{"+01:00":-60},{"+02:00":-120},{"+03:00":-180},{"+03:30":-210},{"+04:00":-240},{"+04:30":-270},{"+05:00":-300},{"+05:30":-330},{"+05:45":-345},{"+06:00":-360},{"+06:30":-390},{"+07:00":-420},{"+08:00":-480},{"+08:30":-510},{"+08:45":-525},{"+09:00":-540},{"+09:30":-570},{"+10:00":-600},{"+10:30":-630},{"+11:00":-660},{"+12:00":-720},{"+12:45":-765},{"+13:00":-780},{"+14:00":-840}]),d=["January","February","March","April","May","June","July","August","September","October","November","December"],g=["Su","M","Tu","W","Th","F","Sa"],M=(i(c),d3.time.format("%Y-%m-%d")),y=t.daterange||[],b=d3.select("#celestial-form").append("div").attr("id","celestial-date");a("left"),function(){var t=b.append("select").attr("title","Month").attr("id","mon").on("change",e),n=0,r=c.getMonth();t.selectAll("option").data(d).enter().append("option").attr("value",function(t,e){return e===r&&(n=e),e}).text(function(t){return t}),t.property("selectedIndex",n)}(),b.append("select").attr("title","Year").attr("id","yr").on("change",e),r(),a("right"),b.append("div").attr("id","cal"),e(),b.append("input").attr("type","number").attr("id","hr").attr("title","Hours").attr("max","24").attr("min","-1").attr("step","1").attr("value",c.getHours()).on("change",function(){!0===_(this)&&l()}),b.append("input").attr("type","number").attr("id","min").attr("title","Minutes").attr("max","60").attr("min","-1").attr("step","1").attr("value",c.getMinutes()).on("change",function(){!0===_(this)&&l()}),b.append("input").attr("type","number").attr("id","sec").attr("title","Seconds").attr("max","60").attr("min","-1").attr("step","1").attr("value",c.getSeconds()).on("change",function(){!0===_(this)&&l()}),function(){var t=b.append("select").attr("title","Time zone offset from UTC").attr("id","tz").on("change",l),n=15,e=c.getTimezoneOffset();t.selectAll("option").data(p).enter().append("option").attr("value",function(t,r){var a=Object.keys(t)[0];return t[a]===e&&(n=r),t[a]}).text(function(t){return Object.keys(t)[0]}),t.property("selectedIndex",n)}(),this.show=function(t){var n=h("celestial-date"),e=h("datepick"),r=e.offsetLeft+e.offsetWidth-n.offsetWidth,a=e.offsetTop-n.offsetHeight-1;-9999===n.offsetTop?(c.setTime(t.valueOf()),u(),d3.select("#celestial-date").style({top:f(a),left:f(r),opacity:1}),d3.select("#datepick").classed("active",!0)):s()},this.isVisible=function(){return-9999!==h("celestial-date").offsetTop},this.hide=function(){s()}};!function(){function t(t,n,e){var r=t.translate(),a=Math.atan2(n[1]-r[1],n[0]-r[0])-Math.atan2(e[1]-r[1],e[0]-r[0]);return[Math.cos(a/2),0,0,Math.sin(a/2)]}function n(t,n){var e=t.invert(n);return e&&isFinite(e[0])&&isFinite(e[1])&&u(e)}function e(t){var n=.5*t[0]*l,e=.5*t[1]*l,r=.5*t[2]*l,a=Math.sin(n),i=Math.cos(n),o=Math.sin(e),u=Math.cos(e),s=Math.sin(r),c=Math.cos(r);return[i*u*c+a*o*s,a*u*c-i*o*s,i*o*c+a*u*s,i*u*s-a*o*c]}function r(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],o=n[0],u=n[1],s=n[2],l=n[3];return[e*o-r*u-a*s-i*l,e*u+r*o+a*l-i*s,e*s-r*l+a*o+i*u,e*l+r*s-a*u+i*o]}function a(t,n){if(t&&n){var e=function(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}(t,n),r=Math.sqrt(s(e,e)),a=.5*Math.acos(Math.max(-1,Math.min(1,s(t,n)))),i=Math.sin(a)/r;return r&&[Math.cos(a),e[2]*i,-e[1]*i,e[0]*i]}}function i(t,n){var e=Math.max(-1,Math.min(1,s(t,n))),r=0>e?-1:1,a=Math.acos(r*e),i=Math.sin(a);return i?function(e){var o=r*Math.sin((1-e)*a)/i,u=Math.sin(e*a)/i;return[t[0]*o+n[0]*u,t[1]*o+n[1]*u,t[2]*o+n[2]*u,t[3]*o+n[3]*u]}:function(){return t}}function o(t){return[Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*c,Math.asin(Math.max(-1,Math.min(1,2*(t[0]*t[2]-t[3]*t[1]))))*c,Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*c]}function u(t){var n=t[0]*l,e=t[1]*l,r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function s(t,n){for(var e=0,r=t.length,a=0;r>e;++e)a+=t[e]*n[e];return a}var l=Math.PI/180,c=180/Math.PI;d3.geo.zoom=function(){function s(t){d++||t({type:"zoomstart"})}function l(t){t({type:"zoom"})}function c(t){--d||t({type:"zoomend"})}var h,f,p,d=0,g=function(t){for(var n=0,e=arguments.length,r=[];++n<e;)r.push(arguments[n]);var a=d3.dispatch.apply(null,r);return a.of=function(n,e){return function(r){try{var i=r.sourceEvent=d3.event;r.target=t,d3.event=r,a[r.type].apply(n,e)}finally{d3.event=i}}},a}(v,"zoomstart","zoom","zoomend"),v=d3.behavior.zoom().on("zoomstart",function(){var i=d3.mouse(this),u=e(h.rotate()),c=n(h,i);c&&(p=c),M.call(v,"zoom",function(){h.scale(m.k=d3.event.scale);var e=d3.mouse(this),s=a(p,n(h,e));h.rotate(m.r=o(u=s?r(u,s):r(t(h,i,e),u))),i=e,l(g.of(this,arguments))}),s(g.of(this,arguments))}).on("zoomend",function(){M.call(v,"zoom",null),c(g.of(this,arguments))}),M=v.on,m={r:[0,0,0],k:1};return v.rotateTo=function(t){var n=a(u(t),u([-m.r[0],-m.r[1]]));return o(r(e(m.r),n))},v.projection=function(t){return arguments.length?(m={r:(h=t).rotate(),k:h.scale()},v.scale(m.k)):h},v.duration=function(t){return arguments.length?(f=t,v):f},v.event=function(t){t.each(function(){var t=d3.select(this),n=g.of(this,arguments),r=m,a=d3.transition(t);if(a!==t){a.each("start.zoom",function(){this.__chart__&&((m=this.__chart__).hasOwnProperty("r")||(m.r=h.rotate())),h.rotate(m.r).scale(m.k),s(n)}).tween("zoom:zoom",function(){var t=v.size()[0],u=i(e(m.r),e(r.r)),s=d3.geo.distance(m.r,r.r),c=d3.interpolateZoom([0,0,t/m.k],[s,0,t/r.k]);return f&&a.duration(f(.001*c.duration)),function(e){var r=c(e);this.__chart__=m={r:o(u(r[0]/s)),k:t/r[2]},h.rotate(m.r).scale(m.k),v.scale(m.k),l(n)}}).each("end.zoom",function(){c(n)});try{a.each("interrupt.zoom",function(){c(n)})}catch(t){console.log(t)}}else this.__chart__=m,s(n),l(n),c(n)})},d3.rebind(v,g,"on")}}(),this.Celestial=I}()},nQYg:function(t,n){!function(){function t(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:n(t.geometry,e)}}function n(t,e){if(!t)return null;if("GeometryCollection"===t.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(t){return n(t,e)})};if(!Bt.hasOwnProperty(t.type))return null;var r=Bt[t.type];return d3.geo.stream(t,e(r)),r.result()}function e(){}function r(t){return t>0?1:0>t?-1:0}function a(t){return t>1?Zt:-1>t?-Zt:Math.asin(t)}function i(t){return t>1?0:-1>t?Gt:Math.acos(t)}function o(t){return t>0?Math.sqrt(t):0}function u(t){function n(t,n){var e=Math.cos(t),a=Math.cos(n),i=Math.sin(n),o=a*e,u=-((1-o?Math.log(.5*(1+o))/(1-o):-.5)+r/(1+o));return[u*a*Math.sin(t),u*i]}var e=Math.tan(.5*t),r=2*Math.log(Math.cos(.5*t))/(e*e);return n.invert=function(n,e){var i,o=Math.sqrt(n*n+e*e),u=-.5*t,s=50;if(!o)return[0,0];do{var l=.5*u,c=Math.cos(l),h=Math.sin(l),f=Math.tan(l),p=Math.log(1/c);u-=i=(2/f*p-r*f-o)/(-p/(h*h)+1-r/(2*c*c))}while(Math.abs(i)>Vt&&--s>0);var d=Math.sin(u);return[Math.atan2(n*d,o*Math.cos(u)),a(e*d/o)]},n}function s(t,n){var e=Math.cos(n),r=function(t){return t?t/Math.sin(t):1}(i(e*Math.cos(t/=2)));return[2*e*Math.sin(t)*r,Math.sin(n)*r]}function l(t){function n(t,n){var u=Math.cos(n),s=Math.cos(t/=2);return[(1+u)*Math.sin(t),(a*n>-Math.atan2(s,i)-.001?0:10*-a)+o+Math.sin(n)*r-(1+u)*e*s]}var e=Math.sin(t),r=Math.cos(t),a=t>0?1:-1,i=Math.tan(a*t),o=(1+e-r)/2;return n.invert=function(t,n){var u=0,s=0,l=50;do{var c=Math.cos(u),h=Math.sin(u),f=Math.cos(s),p=Math.sin(s),d=1+f,g=d*h-t,v=o+p*r-d*e*c-n,M=.5*d*c,m=-h*p,y=.5*e*d*h,b=r*f+e*c*p,x=m*y-b*M,w=.5*(v*m-g*b)/x,k=(g*y-v*M)/x;u-=w,s-=k}while((Math.abs(w)>Vt||Math.abs(k)>Vt)&&--l>0);return a*s>-Math.atan2(Math.cos(u),i)-.001?[2*u,s]:null},n}function c(t){return.5*(Math.exp(t)-Math.exp(-t))}function h(t){return.5*(Math.exp(t)+Math.exp(-t))}function f(t){return Math.log(t+o(t*t+1))}function p(t){return Math.log(t+o(t*t-1))}function d(t,n){var e=Math.tan(n/2),r=o(1-e*e),a=1+r*Math.cos(t/=2),i=Math.sin(t)*r/a,u=e/a,s=i*i,l=u*u;return[4/3*i*(3+s-3*l),4/3*u*(3+3*s-l)]}function g(t,n){var e=Math.abs(n);return Gt/4>e?[t,Math.log(Math.tan(Gt/4+n/2))]:[t*Math.cos(e)*(2*Math.SQRT2-1/Math.sin(e)),r(n)*(2*Math.SQRT2*(e-Gt/4)-Math.log(Math.tan(e/2)))]}function v(t){function n(t,n){var r=en(t,n);if(Math.abs(t)>Zt){var i=Math.atan2(r[1],r[0]),o=Math.sqrt(r[0]*r[0]+r[1]*r[1]),u=e*Math.round((i-Zt)/e)+Zt,s=Math.atan2(Math.sin(i-=u),2-Math.cos(i));i=u+a(Gt/o*Math.sin(s))-s,r[0]=o*Math.cos(i),r[1]=o*Math.sin(i)}return r}var e=2*Gt/t;return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n);if(r>Zt){var a=Math.atan2(n,t),i=e*Math.round((a-Zt)/e)+Zt,o=a>i?-1:1,u=r*Math.cos(i-a),s=1/Math.tan(o*Math.acos((u-Gt)/Math.sqrt(Gt*(Gt-2*u)+r*r)));a=i+2*Math.atan((s+o*Math.sqrt(s*s-3))/3),t=r*Math.cos(a),n=r*Math.sin(a)}return en.invert(t,n)},n}function M(t){return function(n){var e,r=t*Math.sin(n),a=30;do{n-=e=(n+Math.sin(n)-r)/(1+Math.cos(n))}while(Math.abs(e)>Vt&&--a>0);return n/2}}function m(t,n,e){function r(e,r){return[t*e*Math.cos(r=i(r)),n*Math.sin(r)]}var i=M(e);return r.invert=function(r,i){var o=a(i/n);return[r/(t*Math.cos(o)),a((2*o+Math.sin(2*o))/e)]},r}function y(t,n){var e=2.00276,r=rn(n);return[e*t/(1/Math.cos(n)+1.11072/Math.cos(r)),(n+Math.SQRT2*Math.sin(r))/e]}function b(t){var n=0,e=tn(t),r=e(n);return r.parallel=function(t){return arguments.length?e(n=t*Gt/180):n/Gt*180},r}function x(t,n){return[t*Math.cos(n),n]}function w(t){function n(n,r){var a=e+t-r,i=a?n*Math.cos(r)/a:a;return[a*Math.sin(i),e-a*Math.cos(i)]}if(!t)return x;var e=1/Math.tan(t);return n.invert=function(n,r){var a=Math.sqrt(n*n+(r=e-r)*r),i=e+t-a;return[a/Math.cos(i)*Math.atan2(n,r),i]},n}function k(t){function n(t,n){var r=Zt-n,a=r?t*e*Math.sin(r)/r:r;return[r*Math.sin(a)/e,Zt-r*Math.cos(a)]}var e=Math.sin(t);return n.invert=function(t,n){var r=t*e,a=Zt-n,i=Math.sqrt(r*r+a*a),o=Math.atan2(r,a);return[(i?i/Math.sin(i):1)*o/e,Zt-i]},n}function S(t){for(var n,e=(t=t.map(function(t){return[t[0],t[1],Math.sin(t[1]),Math.cos(t[1])]}))[2],r=0;3>r;++r,e=n)n=t[r],e.v=_(n[1]-e[1],e[3],e[2],n[3],n[2],n[0]-e[0]),e.point=[0,0];var a=q(t[0].v[0],t[2].v[0],t[1].v[0]),i=q(t[0].v[0],t[1].v[0],t[2].v[0]),o=Gt-a;t[2].point[1]=0,t[0].point[0]=-(t[1].point[0]=.5*t[0].v[0]);var u=[t[2].point[0]=t[0].point[0]+t[2].v[0]*Math.cos(a),2*(t[0].point[1]=t[1].point[1]=t[2].v[0]*Math.sin(a))];return function(n,e){for(var r=Math.sin(e),a=Math.cos(e),s=new Array(3),l=0;3>l;++l){var c=t[l];if(s[l]=_(e-c[1],c[3],c[2],a,r,n-c[0]),!s[l][0])return c.point;s[l][1]=z(s[l][1]-c.v[1])}var h=u.slice();for(l=0;3>l;++l){var f=2==l?0:l+1,p=q(t[l].v[0],s[l][0],s[f][0]);s[l][1]<0&&(p=-p),l?1==l?(p=i-p,h[0]-=s[l][0]*Math.cos(p),h[1]-=s[l][0]*Math.sin(p)):(p=o-p,h[0]+=s[l][0]*Math.cos(p),h[1]+=s[l][0]*Math.sin(p)):(h[0]+=s[l][0]*Math.cos(p),h[1]-=s[l][0]*Math.sin(p))}return h[0]/=3,h[1]/=3,h}}function _(t,n,e,r,o,u){var s,l=Math.cos(u);if(Math.abs(t)>1||Math.abs(u)>1)s=i(e*o+n*r*l);else{var c=Math.sin(.5*t),h=Math.sin(.5*u);s=2*a(Math.sqrt(c*c+n*r*h*h))}return Math.abs(s)>Vt?[s,Math.atan2(r*Math.sin(u),n*o-e*r*l)]:[0,0]}function q(t,n,e){return i(.5*(t*t+n*n-e*e)/(t*n))}function z(t){return t-2*Gt*Math.floor((t+Gt)/(2*Gt))}function E(t){return[t[0]*Xt,t[1]*Xt]}function A(t,n){var e=o(1-Math.sin(n));return[2/$t*t*e,$t*(1-e)]}function N(t){function n(t,n){return[t,(t?t/Math.sin(t):1)*(Math.sin(n)*Math.cos(t)-e*Math.cos(n))]}var e=Math.tan(t);return n.invert=e?function(t,n){t&&(n*=Math.sin(t)/t);var r=Math.cos(t);return[t,2*Math.atan2(Math.sqrt(r*r+e*e-n*n)-r,e-n)]}:function(t,n){return[t,a(t?n*Math.tan(t)/t:n)]},n}function T(t,n){var e=Math.sqrt(3);return[e*t*(2*Math.cos(2*n/3)-1)/$t,e*$t*Math.sin(n/3)]}function P(t){function n(t,n){return[t*e,Math.sin(n)/e]}var e=Math.cos(t);return n.invert=function(t,n){return[t/e,a(n*e)]},n}function C(t){function n(t,n){return[t*e,(1+e)*Math.tan(.5*n)]}var e=Math.cos(t);return n.invert=function(t,n){return[t/e,2*Math.atan(n/(1+e))]},n}function j(t,n){var e=Math.sqrt(8/(3*Gt));return[e*t*(1-Math.abs(n)/Gt),e*n]}function I(t,n){var e=Math.sqrt(4-3*Math.sin(Math.abs(n)));return[2/Math.sqrt(6*Gt)*t*e,r(n)*Math.sqrt(2*Gt/3)*(2-e)]}function L(t,n){var e=Math.sqrt(Gt*(4+Gt));return[2/e*t*(1+Math.sqrt(1-4*n*n/(Gt*Gt))),4/e*n]}function D(t,n){var e=(2+Zt)*Math.sin(n);n/=2;for(var r=0,a=1/0;10>r&&Math.abs(a)>Vt;r++){var i=Math.cos(n);n-=a=(n+Math.sin(n)*(i+2)-e)/(2*i*(1+i))}return[2/Math.sqrt(Gt*(4+Gt))*t*(1+Math.cos(n)),2*Math.sqrt(Gt/(4+Gt))*Math.sin(n)]}function R(t,n){return[t*(1+Math.cos(n))/Math.sqrt(2+Gt),2*n/Math.sqrt(2+Gt)]}function F(t,n){for(var e=(1+Zt)*Math.sin(n),r=0,a=1/0;10>r&&Math.abs(a)>Vt;r++)n-=a=(n+Math.sin(n)-e)/(1+Math.cos(n));return e=Math.sqrt(2+Gt),[t*(1+Math.cos(n))/e,2*n/e]}function O(t,n){var e=Math.sin(t/=2),r=Math.cos(t),a=Math.sqrt(Math.cos(n)),i=Math.cos(n/=2),o=Math.sin(n)/(i+Math.SQRT2*r*a),u=Math.sqrt(2/(1+o*o)),s=Math.sqrt((Math.SQRT2*i+(r+e)*a)/(Math.SQRT2*i+(r-e)*a));return[un*(u*(s-1/s)-2*Math.log(s)),un*(u*o*(s+1/s)-2*Math.atan(o))]}function U(t,n){var e=Math.tan(n/2);return[t*sn*o(1-e*e),(1+sn)*e]}function H(t,n){var e=n/2,r=Math.cos(e);return[2*t/$t*Math.cos(n)*r*r,$t*Math.tan(e)]}function Q(t,n){function e(n,e){var i=ln(n,e),o=i[0],u=i[1],s=o*o+u*u;if(s>a){var l=Math.sqrt(s),c=Math.atan2(u,o),h=r*Math.round(c/r),f=c-h,p=t*Math.cos(f),d=(t*Math.sin(f)-f*Math.sin(p))/(Zt-p),g=Y(f,d),v=(Gt-t)/B(g,p,Gt);o=l;var M,m=50;do{o-=M=(t+B(g,p,o)*v-l)/(g(o)*v)}while(Math.abs(M)>Vt&&--m>0);u=f*Math.sin(o),Zt>o&&(u-=d*(o-Zt));var y=Math.sin(h),b=Math.cos(h);i[0]=o*b-u*y,i[1]=o*y+u*b}return i}var r=2*Gt/n,a=t*t;return e.invert=function(n,e){var i=n*n+e*e;if(i>a){var o=Math.sqrt(i),u=Math.atan2(e,n),s=r*Math.round(u/r),l=u-s;n=o*Math.cos(l);e=o*Math.sin(l);for(var c=n-Zt,h=Math.sin(n),f=e/h,p=Zt>n?1/0:0,d=10;;){var g=t*Math.sin(f),v=t*Math.cos(f),M=Math.sin(v),m=Zt-v,y=(g-f*M)/m,b=Y(f,y);if(Math.abs(p)<Wt||!--d)break;f-=p=(f*h-y*c-e)/(h-2*c*(m*(v+f*g*Math.cos(v)-M)-g*(g-f*M))/(m*m))}u=s+f,n=(o=t+B(b,v,n)*(Gt-t)/B(b,v,Gt))*Math.cos(u),e=o*Math.sin(u)}return ln.invert(n,e)},e}function Y(t,n){return function(e){var r=t*Math.cos(e);return Zt>e&&(r-=n),Math.sqrt(1+r*r)}}function B(t,n,e){for(var r=(e-n)/50,a=t(n)+t(e),i=1,o=n;50>i;++i)a+=2*t(o+=r);return.5*a*r}function V(t,n,e,r,a,i,u,s){function l(o,l){if(!l)return[t*o/Gt,0];var c=l*l,h=t+c*(n+c*(e+c*r)),f=l*(a-1+c*(i-s+c*u)),p=(h*h+f*f)/(2*f),d=o*Math.asin(h/p)/Gt;return[p*Math.sin(d),l*(1+c*s)+p*(1-Math.cos(d))]}return arguments.length<8&&(s=0),l.invert=function(l,c){var h,f,p=Gt*l/t,d=c,g=50;do{var v=d*d,M=t+v*(n+v*(e+v*r)),m=d*(a-1+v*(i-s+v*u)),y=M*M+m*m,b=2*m,x=y/b,w=x*x,k=Math.asin(M/x)/Gt,S=p*k;if(xB2=M*M,dxBd=(2*n+v*(4*e+6*v*r))*d,dyBd=a+v*(3*i+5*v*u),dpd=2*(M*dxBd+m*(dyBd-1)),dqd=2*(dyBd-1),dmd=(dpd*b-y*dqd)/(b*b),cos=Math.cos(S),sin=Math.sin(S),mcos=x*cos,msin=x*sin,dd=p/Gt*(1/o(1-xB2/w))*(dxBd*x-M*dmd)/w,fx=msin-l,fy=d*(1+v*s)+x-mcos-c,x=dmd*sin+mcos*dd,x=mcos*k,y=1+dmd-(dmd*cos-msin*dd),y=msin*k,denominator=x*y-y*x,!denominator)break;p-=h=(fy*x-fx*y)/denominator,d-=f=(fx*y-fy*x)/denominator}while((Math.abs(h)>Vt||Math.abs(f)>Vt)&&--g>0);return[p,d]},l}function W(t,n){var e=t*t,r=n*n;return[t*(1-.162388*r)*(.87-952426e-9*e*e),n*(1+r/12)]}function G(t){function n(){var t=!1,n=tn(e),r=n(t);return r.quincuncial=function(e){return arguments.length?n(t=!!e):t},r}function e(n){var e=n?function(n,e){var i=Math.abs(n)<Zt,o=t(i?n:n>0?n-Gt:n+Gt,e),u=(o[0]-o[1])*Math.SQRT1_2,s=(o[0]+o[1])*Math.SQRT1_2;if(i)return[u,s];var l=a*Math.SQRT1_2,c=u>0^s>0?-1:1;return[c*u-r(s)*l,c*s-r(u)*l]}:function(n,e){var r=n>0?-.5:.5,i=t(n+r*Gt,e);return i[0]-=r*a,i};return t.invert&&(e.invert=n?function(n,e){var r=(n+e)*Math.SQRT1_2,i=(e-n)*Math.SQRT1_2,o=Math.abs(r)<.5*a&&Math.abs(i)<.5*a;if(!o){var u=a*Math.SQRT1_2,s=r>0^i>0?-1:1,l=-s*(n+(i>0?1:-1)*u),c=-s*(e+(r>0?1:-1)*u);r=(-l-c)*Math.SQRT1_2,i=(l-c)*Math.SQRT1_2}var h=t.invert(r,i);return o||(h[0]+=r>0?Gt:-Gt),h}:function(n,e){var r=n>0?-.5:.5,i=t.invert(n+r*a,e),o=i[0]-r*Gt;return-Gt>o?o+=2*Gt:o>Gt&&(o-=2*Gt),i[0]=o,i}),e}var a=t(Zt,0)[0]-t(-Zt,0)[0];return n.raw=e,n}function Z(t,n){var e=r(t),i=r(n),o=Math.cos(n),u=Math.cos(t)*o,s=Math.sin(t)*o,l=Math.sin(i*n);t=Math.abs(Math.atan2(s,l)),n=a(u),Math.abs(t-Zt)>Vt&&(t%=Zt);var c=$(t>Gt/4?Zt-t:t,n);return t>Gt/4&&(l=c[0],c[0]=-c[1],c[1]=-l),c[0]*=e,c[1]*=-i,c}function $(t,n){if(n===Zt)return[0,0];var e=Math.sin(n),r=e*e,i=r*r,u=1+i,s=1+3*i,l=1-i,c=a(1/Math.sqrt(u)),h=l+r*u*c,f=(1-e)/h,p=Math.sqrt(f),d=f*u,g=Math.sqrt(d),v=p*l;if(0===t)return[0,-(v+r*g)];var M=Math.cos(n),m=1/M,y=2*e*M,b=(-h*M-(1-e)*((-3*r+c*s)*y))/(h*h),x=-m*y,w=-m*(r*u*b+f*s*y),k=-2*m*(l*(.5*b/p)-2*r*p*y),S=4*t/Gt;if(t>.222*Gt||Gt/4>n&&t>.175*Gt){var _=(v+r*o(d*(1+i)-v*v))/(1+i);if(t>Gt/4)return[_,_];var q=_,z=.5*_,E=50;_=.5*(z+q);do{if(!(C=_*(k+x*(N=Math.sqrt(d-_*_)))+w*a(_/g)-S))break;0>C?z=_:q=_,_=.5*(z+q)}while(Math.abs(q-z)>Vt&&--E>0)}else{var A;_=Vt,E=25;do{var N,T=_*_,P=k+x*(N=o(d-T)),C=_*P+w*a(_/g)-S;_-=A=N?C/(P+(w-x*T)/N):0}while(Math.abs(A)>Vt&&--E>0)}return[_,-v-r*o(d-_*_)]}function X(t,n){var e,r,i,u,s;if(Vt>n)return[(u=Math.sin(t))-(e=.25*n*(t-u*(r=Math.cos(t))))*r,r+e*u,1-.5*n*u*u,t-e];if(n>=1-Vt)return e=.25*(1-n),i=1/(r=h(t)),[(u=function(t){return((t=Math.exp(2*t))-1)/(t+1)}(t))+e*((s=r*c(t))-t)/(r*r),i-e*u*i*(s-t),i+e*u*i*(s+t),2*Math.atan(Math.exp(t))-Zt+e*(s-t)/r];var l=[1,0,0,0,0,0,0,0,0],f=[Math.sqrt(n),0,0,0,0,0,0,0,0],p=0;for(r=Math.sqrt(1-n),s=1;Math.abs(f[p]/l[p])>Vt&&8>p;)e=l[p++],f[p]=.5*(e-r),l[p]=.5*(e+r),r=o(e*r),s*=2;i=s*l[p]*t;do{i=.5*(a(u=f[p]*Math.sin(r=i)/l[p])+i)}while(--p);return[Math.sin(i),u=Math.cos(i),u/Math.cos(i-r),i]}function J(t,n,e){var a=Math.abs(t),i=c(Math.abs(n));if(a){var u=1/Math.sin(a),s=1/(Math.tan(a)*Math.tan(a)),l=-(s+e*i*i*u*u-1+e),h=(e-1)*s,f=.5*(-l+Math.sqrt(l*l-4*h));return[K(Math.atan(1/Math.sqrt(f)),e)*r(t),K(Math.atan(o((f/s-1)/e)),1-e)*r(n)]}return[0,K(Math.atan(i),1-e)*r(n)]}function K(t,n){if(!n)return t;if(1===n)return Math.log(Math.tan(t/2+Gt/4));for(var e=1,r=Math.sqrt(1-n),a=Math.sqrt(n),i=0;Math.abs(a)>Vt;i++){if(t%Gt){var o=Math.atan(r*Math.tan(t)/e);0>o&&(o+=Gt),t+=o+~~(t/Gt)*Gt}else t+=t;a=(e+r)/2,r=Math.sqrt(e*r),a=((e=a)-r)/2}return t/(Math.pow(2,i)*e)}function tt(t,n){var e=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-e*e),a=K(Zt,r*r),i=Math.log(Math.tan(Gt/4+Math.abs(n)/2)),o=Math.exp(-1*i)/Math.sqrt(e),u=function(t,n){var e=t*t,r=n+1,a=1-e-n*n;return[.5*((t>=0?Zt:-Zt)-Math.atan2(a,2*t)),-.25*Math.log(a*a+4*e)+.5*Math.log(r*r+e)]}(o*Math.cos(-1*t),o*Math.sin(-1*t)),s=J(u[0],u[1],r*r);return[-s[1],(n>=0?1:-1)*(.5*a-s[0])]}function nt(t){function n(t,n){var o=a(t,n);t=o[0],n=o[1];var u=Math.sin(n),s=Math.cos(n),l=Math.cos(t),c=i(e*u+r*s*l),h=Math.sin(c),f=Math.abs(h)>Vt?c/h:1;return[f*r*Math.sin(t),(Math.abs(t)>Zt?f:-f)*(e*s-r*u*l)]}var e=Math.sin(t),r=Math.cos(t),a=et(t);return a.invert=et(-t),n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=-Math.sin(r),u=Math.cos(r),s=r*u,l=-n*i,c=r*e,h=o(s*s+l*l-c*c),f=Math.atan2(s*c+l*h,l*c-s*h),p=(r>Zt?-1:1)*Math.atan2(t*i,r*Math.cos(f)*u+n*Math.sin(f)*i);return a.invert(p,f)},n}function et(t){var n=Math.sin(t),e=Math.cos(t);return function(t,r){var i=Math.cos(r),o=Math.cos(t)*i,u=Math.sin(t)*i,s=Math.sin(r);return[Math.atan2(u,o*e-s*n),a(s*e+o*n)]}}function rt(t,n){function e(e,r){var a=dn(e/n,r);return a[0]*=t,a}return arguments.length<2&&(n=t),1===n?dn:1/0===n?at:(e.invert=function(e,r){var a=dn.invert(e/t,r);return a[0]*=n,a},e)}function at(t,n){return[t*Math.cos(n)/Math.cos(n/=2),2*Math.sin(n)]}function it(t,n){for(var e,r=Math.sin(n)*(0>n?2.43763:2.67595),a=0;20>a&&(n-=e=(n+Math.sin(n)-r)/(1+Math.cos(n)),!(Math.abs(e)<Vt));a++);return[.85*t*Math.cos(n*=.5),Math.sin(n)*(0>n?1.93052:1.75859)]}function ot(t){function n(n,c){var h,f=Math.abs(c);if(f>r){var p=Math.min(t-1,Math.max(0,Math.floor((n+Gt)/l)));n+=Gt*(t-1)/t-p*l,(h=d3.geo.collignon.raw(n,f))[0]=h[0]*a/i-a*(t-1)/(2*t)+p*a/t,h[1]=o+4*(h[1]-u)*s/a,0>c&&(h[1]=-h[1])}else h=e(n,c);return h[0]/=2,h}var e=d3.geo.cylindricalEqualArea.raw(0),r=gn*Gt/180,a=2*Gt,i=d3.geo.collignon.raw(Gt,r)[0]-d3.geo.collignon.raw(-Gt,r)[0],o=e(0,r)[1],u=d3.geo.collignon.raw(0,r)[1],s=d3.geo.collignon.raw(0,Zt)[1]-u,l=2*Gt/t;return n.invert=function(n,r){n*=2;var c=Math.abs(r);if(c>o){var h=Math.min(t-1,Math.max(0,Math.floor((n+Gt)/l)));n=(n+Gt*(t-1)/t-h*l)*i/a;var f=d3.geo.collignon.raw.invert(n,.25*(c-o)*a/s+u);return f[0]-=Gt*(t-1)/t-h*l,0>r&&(f[1]=-f[1]),f}return e.invert(n,r)},n}function ut(t){function n(n,a){var i,h,f=1-Math.sin(a);if(f&&2>f){var p,d=Zt-a,g=25;do{var v=Math.sin(d),M=Math.cos(d),m=o+Math.atan2(v,r-M),y=1+c-2*r*M;d-=p=(d-l*o-r*v+y*m-.5*f*e)/(2*r*v*m)}while(Math.abs(p)>Wt&&--g>0);i=u*Math.sqrt(y),h=n*m/Gt}else i=u*(t+f),h=n*o/Gt;return[i*Math.sin(h),s-i*Math.cos(h)]}var e,r=1+t,o=a(Math.sin(1/r)),u=2*Math.sqrt(Gt/(e=Gt+4*o*r)),s=.5*u*(r+Math.sqrt(t*(2+t))),l=t*t,c=r*r;return n.invert=function(t,n){var h=t*t+(n-=s)*n,f=(1+c-h/(u*u))/(2*r),p=i(f),d=Math.sin(p),g=o+Math.atan2(d,r-f);return[a(t/Math.sqrt(h))*Gt/g,a(1-2*(p-l*o-r*d+(1+c-2*r*f)*g)/e)]},n}function st(t,n){return n>-vn?((t=an(t,n))[1]+=Mn,t):x(t,n)}function lt(t,n){return Math.abs(n)>vn?((t=an(t,n))[1]-=n>0?Mn:-Mn,t):x(t,n)}function ct(t,n){return[3*t/(2*Gt)*Math.sqrt(Gt*Gt/3-n*n),n]}function ht(t){function n(n,e){if(Math.abs(Math.abs(e)-Zt)<Vt)return[0,0>e?-2:2];var r=Math.sin(e),a=Math.pow((1+r)/(1-r),t/2),i=.5*(a+1/a)+Math.cos(n*=t);return[2*Math.sin(n)/i,(a-1/a)/i]}return n.invert=function(n,e){var i=Math.abs(e);if(Math.abs(i-2)<Vt)return n?null:[0,r(e)*Zt];if(i>2)return null;var o=(n/=2)*n,u=(e/=2)*e,s=2*e/(1+o+u);return s=Math.pow((1+s)/(1-s),1/t),[Math.atan2(2*n,1-o-u)/t,a((s-1)/(s+1))]},n}function ft(t,n){return[t*(1+Math.sqrt(Math.cos(n)))/2,n/(Math.cos(n/2)*Math.cos(t/6))]}function pt(t,n){var e=t*t,r=n*n;return[t*(.975534+r*(-.0143059*e-.119161+-.0547009*r)),n*(1.00384+e*(.0802894+-.02855*r+199025e-9*e)+r*(.0998909+-.0491032*r))]}function dt(t,n){return[Math.sin(t)/Math.cos(n),Math.tan(n)*Math.cos(t)]}function gt(t){function n(n,a){var i=a-t,o=Math.abs(i)<Vt?n*e:Math.abs(o=Gt/4+a/2)<Vt||Math.abs(Math.abs(o)-Zt)<Vt?0:n*i/Math.log(Math.tan(o)/r);return[o,i]}var e=Math.cos(t),r=Math.tan(Gt/4+t/2);return n.invert=function(n,a){var i,o=a+t;return[Math.abs(a)<Vt?n/e:Math.abs(i=Gt/4+o/2)<Vt||Math.abs(Math.abs(i)-Zt)<Vt?0:n*Math.log(Math.tan(i)/r)/a,o]},n}function vt(t,n){return[t,1.25*Math.log(Math.tan(Gt/4+.4*n))]}function Mt(t){function n(n,r){for(var a,i=Math.cos(r),o=2/(1+i*Math.cos(n)),u=o*i*Math.sin(n),s=o*Math.sin(r),l=e,c=t[l],h=c[0],f=c[1];--l>=0;)h=(c=t[l])[0]+u*(a=h)-s*f,f=c[1]+u*f+s*a;return[h=u*(a=h)-s*f,f=u*f+s*a]}var e=t.length-1;return n.invert=function(n,r){var i=20,o=n,u=r;do{for(var s,l=e,c=t[l],h=c[0],f=c[1],p=0,d=0;--l>=0;)p=h+o*(s=p)-u*d,d=f+o*d+u*s,h=(c=t[l])[0]+o*(s=h)-u*f,f=c[1]+o*f+u*s;var g,v,M=(p=h+o*(s=p)-u*d)*p+(d=f+o*d+u*s)*d;o-=g=((h=o*(s=h)-u*f-n)*p+(f=o*f+u*s-r)*d)/M,u-=v=(f*p-h*d)/M}while(Math.abs(g)+Math.abs(v)>Vt*Vt&&--i>0);if(i){var m=Math.sqrt(o*o+u*u),y=2*Math.atan(.5*m),b=Math.sin(y);return[Math.atan2(o*b,m*Math.cos(y)),m?a(u*b/m):0]}},n}function mt(t,n){var e=Math.sqrt(6),r=Math.sqrt(7),a=Math.asin(7*Math.sin(n)/(3*e));return[e*t*(2*Math.cos(2*a/3)-1)/r,9*Math.sin(a/3)/r]}function yt(t,n){for(var e,r=(1+Math.SQRT1_2)*Math.sin(n),a=n,i=0;25>i&&(a-=e=(Math.sin(a/2)+Math.sin(a)-r)/(.5*Math.cos(a/2)+Math.cos(a)),!(Math.abs(e)<Vt));i++);return[t*(1+2*Math.cos(a)/Math.cos(a/2))/(3*Math.SQRT2),2*Math.sqrt(3)*Math.sin(a/2)/Math.sqrt(2+Math.SQRT2)]}function bt(t,n){for(var e,r=Math.sqrt(6/(4+Gt)),a=(1+Gt/4)*Math.sin(n),i=n/2,o=0;25>o&&(i-=e=(i/2+Math.sin(i)-a)/(.5+Math.cos(i)),!(Math.abs(e)<Vt));o++);return[r*(.5+Math.cos(i))*t/1.5,r*i]}function xt(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function wt(t,n){return[t*(1+Math.cos(n))/2,2*(n-Math.tan(n/2))]}function kt(t,n){var e=n*n;return[t,n*(yn+e*e*(bn+e*(xn+wn*e)))]}function St(t,n){if(Math.abs(n)<Vt)return[t,0];var e=Math.tan(n),r=t*Math.sin(n);return[Math.sin(r)/e,n+(1-Math.cos(r))/e]}function _t(t){function n(n,r){var a=e?Math.tan(n*e/2)/e:n/2;if(!r)return[2*a,-t];var i=2*Math.atan(a*Math.sin(r)),o=1/Math.tan(r);return[Math.sin(i)*o,r+(1-Math.cos(i))*o-t]}var e=Math.sin(t);return n.invert=function(n,r){if(Math.abs(r+=t)<Vt)return[e?2*Math.atan(e*n/2)/e:n,0];var o,u=n*n+r*r,s=0,l=10;do{var c=Math.tan(s),h=1/Math.cos(s),f=u-2*r*s+s*s;s-=o=(c*f+2*(s-r))/(2+f*h*h+2*(s-r)*c)}while(Math.abs(o)>Vt&&--l>0);var p=n*(c=Math.tan(s)),d=Math.tan(Math.abs(r)<Math.abs(s+1/c)?.5*a(p):.5*i(p)+Gt/4)/Math.sin(s);return[e?2*Math.atan(e*d)/e:2*d,s]},n}function qt(t,n){var e,r=Math.min(18,36*Math.abs(n)/Gt),a=Math.floor(r),i=r-a,o=(e=An[a])[0],u=e[1],s=(e=An[++a])[0],l=e[1],c=(e=An[Math.min(19,++a)])[0],h=e[1];return[t*(s+i*(c-o)/2+i*i*(c-2*s+o)/2),(n>0?Zt:-Zt)*(l+i*(h-u)/2+i*i*(h-2*l+u)/2)]}function zt(t,n){function e(n,e){var a=r(n,e),u=a[1],s=u*o/(t-1)+i;return[a[0]*i/s,u/s]}var r=function(t){function n(n,e){var r=Math.cos(e),a=(t-1)/(t-r*Math.cos(n));return[a*r*Math.sin(n),a*Math.sin(e)]}return n.invert=function(n,e){var r=n*n+e*e,i=Math.sqrt(r),o=(t-Math.sqrt(1-r*(t+1)/(t-1)))/((t-1)/i+i/(t-1));return[Math.atan2(n*o,i*Math.sqrt(1-o*o)),i?a(e*o/i):0]},n}(t);if(!n)return r;var i=Math.cos(n),o=Math.sin(n);return e.invert=function(n,e){var a=(t-1)/(t-1-e*o);return r.invert(a*n,a*e*i)},e}function Et(t,n){var e=Math.tan(n/2),r=Math.sin(Gt/4*e);return[t*(.74482-.34588*r*r),1.70711*e]}function At(t){function n(n,u){var s=i(Math.cos(u)*Math.cos(n-e)),l=i(Math.cos(u)*Math.cos(n-r));return[((s*=s)-(l*=l))/(2*t),(0>u?-1:1)*o(4*a*l-(a-s+l)*(a-s+l))/(2*t)]}if(!t)return d3.geo.azimuthalEquidistant.raw;var e=-t/2,r=-e,a=t*t,u=Math.tan(r),s=.5/Math.sin(r);return n.invert=function(t,n){var a,o,l=n*n,c=Math.cos(Math.sqrt(l+(a=t+e)*a)),h=Math.cos(Math.sqrt(l+(a=t+r)*a));return[Math.atan2(o=c-h,a=(c+h)*u),(0>n?-1:1)*i(Math.sqrt(a*a+o*o)*s)]},n}function Nt(t){function n(t,n){var r=d3.geo.gnomonic.raw(t,n);return r[0]*=e,r}var e=Math.cos(t);return n.invert=function(t,n){return d3.geo.gnomonic.raw.invert(t/e,n)},n}function Tt(t,n){if(Math.abs(n)<Vt)return[t,0];var e=Math.abs(n/Zt),i=a(e);if(Math.abs(t)<Vt||Math.abs(Math.abs(n)-Zt)<Vt)return[0,r(n)*Gt*Math.tan(i/2)];var o=Math.cos(i),u=Math.abs(Gt/t-t/Gt)/2,s=u*u,l=o/(e+o-1),c=l*(2/e-1),h=c*c,f=h+s,p=l-h,d=s+l;return[r(t)*Gt*(u*p+Math.sqrt(s*p*p-f*(l*l-h)))/f,r(n)*Gt*(c*d-u*Math.sqrt((s+1)*f-d*d))/f]}function Pt(t,n){if(Math.abs(n)<Vt)return[t,0];var e=Math.abs(n/Zt),i=a(e);if(Math.abs(t)<Vt||Math.abs(Math.abs(n)-Zt)<Vt)return[0,r(n)*Gt*Math.tan(i/2)];var u=Math.cos(i),s=Math.abs(Gt/t-t/Gt)/2,l=s*s,c=u*(Math.sqrt(1+l)-s*u)/(1+l*e*e);return[r(t)*Gt*c,r(n)*Gt*o(1-c*(2*s+c))]}function Ct(t,n){if(Math.abs(n)<Vt)return[t,0];var e=n/Zt,i=a(e);if(Math.abs(t)<Vt||Math.abs(Math.abs(n)-Zt)<Vt)return[0,Gt*Math.tan(i/2)];var u=(Gt/t-t/Gt)/2,s=e/(1+Math.cos(i));return[Gt*(r(t)*o(u*u+1-s*s)-u),Gt*s]}function jt(t,n){if(!n)return[t,0];var e=Math.abs(n);if(!t||e===Zt)return[0,n];var a=e/Zt,i=a*a,u=(8*a-i*(i+2)-5)/(2*i*(a-1)),s=u*u,l=a*u,c=i+s+2*l,h=a+3*u,f=t/Zt,p=f+1/f,d=r(Math.abs(t)-Zt)*Math.sqrt(p*p-4),g=d*d,v=(d*(c+s-1)+2*o(c*(i+s*g-1)+(1-i)*(i*(h*h+4*s)+12*l*s+4*s*s)))/(4*c+g);return[r(t)*Zt*v,r(n)*Zt*o(1+d*Math.abs(v)-v*v)]}function It(t,n){return[t*Math.sqrt(1-3*n*n/(Gt*Gt)),n]}function Lt(t,n){var e=.90631*Math.sin(n),r=Math.sqrt(1-e*e),a=Math.sqrt(2/(1+r*Math.cos(t/=3)));return[2.66723*r*a*Math.sin(t),1.24104*e*a]}function Dt(t,n){var e=Math.cos(n),r=Math.cos(t)*e,a=1-r,i=Math.cos(t=Math.atan2(Math.sin(t)*e,-Math.sin(n))),u=Math.sin(t);return[u*(e=o(1-r*r))-i*a,-i*e-u*a]}function Rt(t,n){var e=s(t,n);return[(e[0]+t/Zt)/2,(e[1]+n)/2]}d3.geo.project=function(t,e){var r=e.stream;if(!r)throw new Error("not yet supported");return(t&&Ft.hasOwnProperty(t.type)?Ft[t.type]:n)(t,r)};var Ft={Feature:t,FeatureCollection:function(n,e){return{type:"FeatureCollection",features:n.features.map(function(n){return t(n,e)})}}},Ot=[],Ut=[],Ht={point:function(t,n){Ot.push([t,n])},result:function(){var t=Ot.length?Ot.length<2?{type:"Point",coordinates:Ot[0]}:{type:"MultiPoint",coordinates:Ot}:null;return Ot=[],t}},Qt={lineStart:e,point:function(t,n){Ot.push([t,n])},lineEnd:function(){Ot.length&&(Ut.push(Ot),Ot=[])},result:function(){var t=Ut.length?Ut.length<2?{type:"LineString",coordinates:Ut[0]}:{type:"MultiLineString",coordinates:Ut}:null;return Ut=[],t}},Yt={polygonStart:e,lineStart:e,point:function(t,n){Ot.push([t,n])},lineEnd:function(){var t=Ot.length;if(t){do{Ot.push(Ot[0].slice())}while(++t<4);Ut.push(Ot),Ot=[]}},polygonEnd:e,result:function(){if(!Ut.length)return null;var t=[],n=[];return Ut.forEach(function(e){!function(t){if((n=t.length)<4)return!1;for(var n,e=0,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return 0>=r}(e)?n.push(e):t.push([e])}),n.forEach(function(n){var e=n[0];t.some(function(t){return function(t,n){for(var e=n[0],r=n[1],a=!1,i=0,o=t.length,u=o-1;o>i;u=i++){var s=t[i],l=s[0],c=s[1],h=t[u],f=h[0],p=h[1];c>r^p>r&&(f-l)*(r-c)/(p-c)+l>e&&(a=!a)}return a}(t[0],e)?(t.push(n),!0):void 0})||t.push([n])}),Ut=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}},Bt={Point:Ht,MultiPoint:Ht,LineString:Qt,MultiLineString:Qt,Polygon:Yt,MultiPolygon:Yt,Sphere:Yt},Vt=1e-6,Wt=Vt*Vt,Gt=Math.PI,Zt=Gt/2,$t=Math.sqrt(Gt),Xt=Gt/180,Jt=180/Gt,Kt=d3.geo.projection,tn=d3.geo.projectionMutator;d3.geo.interrupt=function(t){function n(n,e){for(var r=0>e?-1:1,a=u[+(0>e)],i=0,o=a.length-1;o>i&&n>a[i][2][0];++i);var s=t(n-a[i][1][0],e);return s[0]+=t(a[i][1][0],r*e>r*a[i][0][1]?a[i][0][1]:e)[0],s}function e(){o=u.map(function(n){return n.map(function(n){var e,r=t(n[0][0],n[0][1])[0],a=t(n[2][0],n[2][1])[0],i=t(n[1][0],n[0][1])[1],o=t(n[1][0],n[1][1])[1];return i>o&&(e=i,i=o,o=e),[[r,i],[a,o]]})})}function r(){for(var t=1e-6,n=[],e=0,r=u[0].length;r>e;++e){var i=180*(h=u[0][e])[0][0]/Gt,o=180*h[0][1]/Gt,s=180*h[1][1]/Gt,l=180*h[2][0]/Gt,c=180*h[2][1]/Gt;n.push(a([[i+t,o+t],[i+t,s-t],[l-t,s-t],[l-t,c+t]],30))}for(e=u[1].length-1;e>=0;--e){var h;i=180*(h=u[1][e])[0][0]/Gt,o=180*h[0][1]/Gt,s=180*h[1][1]/Gt,l=180*h[2][0]/Gt,c=180*h[2][1]/Gt;n.push(a([[l-t,c-t],[l-t,s+t],[i+t,s+t],[i+t,o-t]],30))}return{type:"Polygon",coordinates:[d3.merge(n)]}}function a(t,n){for(var e,r,a,i=-1,o=t.length,u=t[0],s=[];++i<o;){r=((e=t[i])[0]-u[0])/n,a=(e[1]-u[1])/n;for(var l=0;n>l;++l)s.push([u[0]+l*r,u[1]+l*a]);u=e}return s.push(e),s}function i(t,n){return Math.abs(t[0]-n[0])<Vt&&Math.abs(t[1]-n[1])<Vt}var o,u=[[[[-Gt,0],[0,Zt],[Gt,0]]],[[[-Gt,0],[0,-Zt],[Gt,0]]]];t.invert&&(n.invert=function(e,r){for(var a=o[+(0>r)],s=u[+(0>r)],l=0,c=a.length;c>l;++l){var h=a[l];if(h[0][0]<=e&&e<h[1][0]&&h[0][1]<=r&&r<h[1][1]){var f=t.invert(e-t(s[l][1][0],0)[0],r);return f[0]+=s[l][1][0],i(n(f[0],f[1]),[e,r])?f:null}}});var s=d3.geo.projection(n),l=s.stream;return s.stream=function(t){var n=s.rotate(),e=l(t),a=(s.rotate([0,0]),l(t));return s.rotate(n),e.sphere=function(){d3.geo.stream(r(),a)},e},s.lobes=function(t){return arguments.length?(u=t.map(function(t){return t.map(function(t){return[[t[0][0]*Gt/180,t[0][1]*Gt/180],[t[1][0]*Gt/180,t[1][1]*Gt/180],[t[2][0]*Gt/180,t[2][1]*Gt/180]]})}),e(),s):u.map(function(t){return t.map(function(t){return[[180*t[0][0]/Gt,180*t[0][1]/Gt],[180*t[1][0]/Gt,180*t[1][1]/Gt],[180*t[2][0]/Gt,180*t[2][1]/Gt]]})})},s},(d3.geo.airy=function(){var t=Zt,n=tn(u),e=n(t);return e.radius=function(e){return arguments.length?n(t=e*Gt/180):t/Gt*180},e}).raw=u,s.invert=function(t,n){if(!(t*t+4*n*n>Gt*Gt+Vt)){var e=t,r=n,a=25;do{var o,u=Math.sin(e),s=Math.sin(e/2),l=Math.cos(e/2),c=Math.sin(r),h=Math.cos(r),f=Math.sin(2*r),p=c*c,d=h*h,g=s*s,v=1-d*l*l,M=v?i(h*l)*Math.sqrt(o=1/v):o=0,m=2*M*h*s-t,y=M*c-n,b=o*(d*g+M*h*l*p),x=o*(.5*u*f-2*M*c*s),w=.25*o*(f*s-M*c*d*u),k=o*(p*l+M*g*h),S=x*w-k*b;if(!S)break;var _=(y*x-m*k)/S,q=(m*w-y*b)/S;e-=_,r-=q}while((Math.abs(_)>Vt||Math.abs(q)>Vt)&&--a>0);return[e,r]}},(d3.geo.aitoff=function(){return Kt(s)}).raw=s,(d3.geo.armadillo=function(){var t=Gt/9,n=t>0?1:-1,e=Math.tan(n*t),r=tn(l),a=r(t),i=a.stream;return a.parallel=function(a){return arguments.length?(e=Math.tan((n=(t=a*Gt/180)>0?1:-1)*t),r(t)):t/Gt*180},a.stream=function(r){var o=a.rotate(),u=i(r),s=(a.rotate([0,0]),i(r));return a.rotate(o),u.sphere=function(){s.polygonStart(),s.lineStart();for(var r=-180*n;180>n*r;r+=90*n)s.point(r,90*n);for(;n*(r-=t)>=-180;)s.point(r,n*-Math.atan2(Math.cos(r*Xt/2),e)*Jt);s.lineEnd(),s.polygonEnd()},u},a}).raw=l,d.invert=function(t,n){if(n*=3/8,!(t*=3/8)&&Math.abs(n)>1)return null;var e=1+t*t+n*n,i=Math.sqrt(.5*(e-Math.sqrt(e*e-4*n*n))),o=a(i)/3,u=i?p(Math.abs(n/i))/3:f(Math.abs(t))/3,s=Math.cos(o),l=h(u),d=l*l-s*s;return[2*r(t)*Math.atan2(c(u)*s,.25-d),2*r(n)*Math.atan2(l*Math.sin(o),.25+d)]},(d3.geo.august=function(){return Kt(d)}).raw=d;var nn=Math.log(1+Math.SQRT2);g.invert=function(t,n){if((a=Math.abs(n))<nn)return[t,2*Math.atan(Math.exp(n))-Zt];var e,a,i=Math.sqrt(8),o=Gt/4,u=25;do{var s=Math.cos(o/2),l=Math.tan(o/2);o-=e=(i*(o-Gt/4)-Math.log(l)-a)/(i-.5*s*s/l)}while(Math.abs(e)>Wt&&--u>0);return[t/(Math.cos(o)*(i-1/Math.sin(o))),r(n)*o]},(d3.geo.baker=function(){return Kt(g)}).raw=g;var en=d3.geo.azimuthalEquidistant.raw;(d3.geo.berghaus=function(){var t=5,n=tn(v),e=n(t),r=e.stream,i=.01,o=-Math.cos(i*Xt),u=Math.sin(i*Xt);return e.lobes=function(e){return arguments.length?n(t=+e):t},e.stream=function(n){var s=e.rotate(),l=r(n),c=(e.rotate([0,0]),r(n));return e.rotate(s),l.sphere=function(){c.polygonStart(),c.lineStart();for(var n=0,e=360/t,r=2*Gt/t,s=90-180/t,l=Zt;t>n;++n,s-=e,l-=r)c.point(Math.atan2(u*Math.cos(l),o)*Jt,a(u*Math.sin(l))*Jt),-90>s?(c.point(-90,-180-s-i),c.point(-90,-180-s+i)):(c.point(90,s+i),c.point(90,s-i));c.lineEnd(),c.polygonEnd()},l},e}).raw=v;var rn=M(Gt),an=m(Math.SQRT2/Zt,Math.SQRT2,Gt);(d3.geo.mollweide=function(){return Kt(an)}).raw=an,y.invert=function(t,n){var e,r,a=2.00276,i=a*n,o=0>n?-Gt/4:Gt/4,u=25;do{r=i-Math.SQRT2*Math.sin(o),o-=e=(Math.sin(2*o)+2*o-Gt*Math.sin(r))/(2*Math.cos(2*o)+2+Gt*Math.cos(r)*Math.SQRT2*Math.cos(o))}while(Math.abs(e)>Vt&&--u>0);return r=i-Math.SQRT2*Math.sin(o),[t*(1/Math.cos(r)+1.11072/Math.cos(o))/a,r]},(d3.geo.boggs=function(){return Kt(y)}).raw=y,x.invert=function(t,n){return[t/Math.cos(n),n]},(d3.geo.sinusoidal=function(){return Kt(x)}).raw=x,(d3.geo.bonne=function(){return b(w).parallel(45)}).raw=w,(d3.geo.bottomley=function(){var t=Gt/6,n=d3.geo.projectionMutator(k),e=n(t);return e.variant=function(e){return arguments.length?n(t=+e):t},e}).raw=k;var on=m(1,4/Gt,Gt);(d3.geo.bromley=function(){return Kt(on)}).raw=on,(d3.geo.chamberlin=function(){var t=[[0,0],[0,0],[0,0]],n=tn(S),e=n(t),r=e.rotate;return delete e.rotate,e.points=function(a){if(!arguments.length)return t;t=a;var i=d3.geo.centroid({type:"MultiPoint",coordinates:t}),o=[-i[0],-i[1]];return r.call(e,o),n(t.map(d3.geo.rotation(o)).map(E))},e.points([[-150,55],[-35,55],[-92.5,10]])}).raw=S,A.invert=function(t,n){var e=(e=n/$t-1)*e;return[e>0?t*Math.sqrt(Gt/e)/2:0,a(1-e)]},(d3.geo.collignon=function(){return Kt(A)}).raw=A,(d3.geo.craig=function(){return b(N)}).raw=N,T.invert=function(t,n){var e=Math.sqrt(3),r=3*a(n/(e*$t));return[$t*t/(e*(2*Math.cos(2*r/3)-1)),r]},(d3.geo.craster=function(){return Kt(T)}).raw=T,(d3.geo.cylindricalEqualArea=function(){return b(P)}).raw=P,(d3.geo.cylindricalStereographic=function(){return b(C)}).raw=C,j.invert=function(t,n){var e=Math.sqrt(8/(3*Gt)),r=n/e;return[t/(e*(1-Math.abs(r)/Gt)),r]},(d3.geo.eckert1=function(){return Kt(j)}).raw=j,I.invert=function(t,n){var e=2-Math.abs(n)/Math.sqrt(2*Gt/3);return[t*Math.sqrt(6*Gt)/(2*e),r(n)*a((4-e*e)/3)]},(d3.geo.eckert2=function(){return Kt(I)}).raw=I,L.invert=function(t,n){var e=Math.sqrt(Gt*(4+Gt))/2;return[t*e/(1+o(1-n*n*(4+Gt)/(4*Gt))),n*e/2]},(d3.geo.eckert3=function(){return Kt(L)}).raw=L,D.invert=function(t,n){var e=.5*n*Math.sqrt((4+Gt)/Gt),r=a(e),i=Math.cos(r);return[t/(2/Math.sqrt(Gt*(4+Gt))*(1+i)),a((r+e*(i+2))/(2+Zt))]},(d3.geo.eckert4=function(){return Kt(D)}).raw=D,R.invert=function(t,n){var e=Math.sqrt(2+Gt),r=n*e/2;return[e*t/(1+Math.cos(r)),r]},(d3.geo.eckert5=function(){return Kt(R)}).raw=R,F.invert=function(t,n){var e=1+Zt,r=Math.sqrt(e/2);return[2*t*r/(1+Math.cos(n*=r)),a((n+Math.sin(n))/e)]},(d3.geo.eckert6=function(){return Kt(F)}).raw=F,O.invert=function(t,n){var e=d3.geo.august.raw.invert(t/1.2,1.065*n);if(!e)return null;var r=e[0],a=e[1],i=20;t/=un,n/=un;do{var o=r/2,u=a/2,s=Math.sin(o),l=Math.cos(o),c=Math.sin(u),h=Math.cos(u),f=Math.cos(a),p=Math.sqrt(f),d=c/(h+Math.SQRT2*l*p),g=d*d,v=Math.sqrt(2/(1+g)),M=(Math.SQRT2*h+(l+s)*p)/(Math.SQRT2*h+(l-s)*p),m=Math.sqrt(M),y=m-1/m,b=m+1/m,x=v*y-2*Math.log(m)-t,w=v*d*b-2*Math.atan(d)-n,k=c&&Math.SQRT1_2*p*s*g/c,S=(Math.SQRT2*l*h+p)/(2*(h+Math.SQRT2*l*p)*(h+Math.SQRT2*l*p)*p),_=-.5*d*v*v*v,q=_*k,z=_*S,E=(E=2*h+Math.SQRT2*p*(l-s))*E*m,A=(Math.SQRT2*l*h*p+f)/E,N=-Math.SQRT2*s*c/(p*E),T=y*q-2*A/m+v*(A+A/M),P=y*z-2*N/m+v*(N+N/M),C=d*b*q-2*k/(1+g)+v*b*k+v*d*(A-A/M),j=d*b*z-2*S/(1+g)+v*b*S+v*d*(N-N/M),I=P*C-j*T;if(!I)break;var L=(w*P-x*j)/I,D=(x*C-w*T)/I;r-=L,a=Math.max(-Zt,Math.min(Zt,a-D))}while((Math.abs(L)>Vt||Math.abs(D)>Vt)&&--i>0);return Math.abs(Math.abs(a)-Zt)<Vt?[0,a]:i&&[r,a]};var un=3+2*Math.SQRT2;(d3.geo.eisenlohr=function(){return Kt(O)}).raw=O,U.invert=function(t,n){var e=n/(1+sn);return[t?t/(sn*o(1-e*e)):0,2*Math.atan(e)]};var sn=Math.cos(35*Xt);(d3.geo.fahey=function(){return Kt(U)}).raw=U,H.invert=function(t,n){var e=Math.atan(n/$t),r=Math.cos(e),a=2*e;return[.5*t*$t/(Math.cos(a)*r*r),a]},(d3.geo.foucaut=function(){return Kt(H)}).raw=H,d3.geo.gilbert=function(t){function n(n){return t([.5*n[0],a(Math.tan(.5*n[1]*Xt))*Jt])}var e=d3.geo.equirectangular().scale(Jt).translate([0,0]);return t.invert&&(n.invert=function(n){return(n=t.invert(n))[0]*=2,n[1]=2*Math.atan(Math.sin(n[1]*Xt))*Jt,n}),n.stream=function(n){n=t.stream(n);var r=e.stream({point:function(t,e){n.point(.5*t,a(Math.tan(.5*-e*Xt))*Jt)},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}});return r.sphere=function(){n.sphere()},r.valid=!1,r},n};var ln=d3.geo.azimuthalEquidistant.raw;(d3.geo.gingery=function(){var t=6,n=30*Xt,e=Math.cos(n),r=Math.sin(n),a=tn(Q),i=a(n,t),o=i.stream,u=-Math.cos(.01*Xt),s=Math.sin(.01*Xt);return i.radius=function(i){return arguments.length?(e=Math.cos(n=i*Xt),r=Math.sin(n),a(n,t)):n*Jt},i.lobes=function(e){return arguments.length?a(n,t=+e):t},i.stream=function(n){var a=i.rotate(),l=o(n),c=(i.rotate([0,0]),o(n));return i.rotate(a),l.sphere=function(){c.polygonStart(),c.lineStart();for(var n=0,a=2*Gt/t,i=0;t>n;++n,i-=a)c.point(Math.atan2(s*Math.cos(i),u)*Jt,Math.asin(s*Math.sin(i))*Jt),c.point(Math.atan2(r*Math.cos(i-a/2),e)*Jt,Math.asin(r*Math.sin(i-a/2))*Jt);c.lineEnd(),c.polygonEnd()},l},i}).raw=Q;var cn=V(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);(d3.geo.ginzburg4=function(){return Kt(cn)}).raw=cn;var hn=V(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);(d3.geo.ginzburg5=function(){return Kt(hn)}).raw=hn;var fn=V(5/6*Gt,-.62636,-.0344,0,1.3493,-.05524,0,.045);(d3.geo.ginzburg6=function(){return Kt(fn)}).raw=fn,W.invert=function(t,n){var e,r=t,a=n,i=50;do{var o=a*a;a-=e=(a*(1+o/12)-n)/(1+o/4)}while(Math.abs(e)>Vt&&--i>0);i=50,t/=1-.162388*o;do{var u=(u=r*r)*u;r-=e=(r*(.87-952426e-9*u)-t)/(.87-.00476213*u)}while(Math.abs(e)>Vt&&--i>0);return[r,a]},(d3.geo.ginzburg8=function(){return Kt(W)}).raw=W;var pn=V(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);(d3.geo.ginzburg9=function(){return Kt(pn)}).raw=pn,Z.invert=function(t,n){var e=r(t),i=r(n),o=-e*t,u=-i*n,s=1>u/o,l=function(t,n){for(var e=0,r=1,a=.5,i=50;;){var o=a*a,u=Math.sqrt(a),s=Math.asin(1/Math.sqrt(1+o)),l=1-o+a*(1+o)*s,c=(1-u)/l,h=Math.sqrt(c),f=c*(1+o),p=h*(1-o),d=f-t*t,g=Math.sqrt(d),v=n+p+a*g;if(Math.abs(r-e)<Wt||0==--i||0===v)break;v>0?e=a:r=a,a=.5*(e+r)}if(!i)return null;var M=Math.asin(u),m=Math.cos(M),y=1/m,b=2*u*m,x=(-l*m-(-3*a+s*(1+3*o))*b*(1-u))/(l*l);return[Gt/4*(t*(-2*y*(.5*x/h*(1-o)-2*a*h*b)+-y*b*g)+-y*(a*(1+o)*x+c*(1+3*o)*b)*Math.asin(t/Math.sqrt(f))),M]}(s?u:o,s?o:u),c=l[0],h=l[1];s&&(c=-Zt-c);var f=Math.cos(h),p=(t=Math.cos(c)*f,n=Math.sin(c)*f,Math.sin(h));return[e*(Math.atan2(n,-p)+Gt),i*a(t)]},d3.geo.gringorten=G(Z),tt.invert=function(t,n){var e=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-e*e),a=function(t,n,e){if(!t)return[[0,(a=X(n,1-e))[0]/a[1]],[1/a[1],0],[a[2]/a[1],0]];var r=X(t,e);if(!n)return[[r[0],0],[r[1],0],[r[2],0]];var a,i=(a=X(n,1-e))[1]*a[1]+e*r[0]*r[0]*a[0]*a[0];return[[r[0]*a[2]/i,r[1]*r[2]*a[0]*a[1]/i],[r[1]*a[1]/i,-r[0]*r[2]*a[0]*a[2]/i],[r[2]*a[1]*a[2]/i,-e*r[0]*r[1]*a[0]/i]]}(.5*K(Zt,r*r)-n,-t,r*r),i=function(t,n){var e=n[0]*n[0]+n[1]*n[1];return[(t[0]*n[0]+t[1]*n[1])/e,(t[1]*n[0]-t[0]*n[1])/e]}(a[0],a[1]);return[Math.atan2(i[1],i[0])/-1,2*Math.atan(Math.exp(-.5*Math.log(e*i[0]*i[0]+e*i[1]*i[1])))-Zt]},d3.geo.guyou=G(tt),(d3.geo.hammerRetroazimuthal=function(){var t=0,n=tn(nt),e=n(t),r=e.rotate,a=e.stream,i=d3.geo.circle();return e.parallel=function(r){if(!arguments.length)return t/Gt*180;var a=e.rotate();return n(t=r*Gt/180).rotate(a)},e.rotate=function(n){return arguments.length?(r.call(e,[n[0],n[1]-t/Gt*180]),i.origin([-n[0],-n[1]]),e):((n=r.call(e))[1]+=t/Gt*180,n)},e.stream=function(t){return(t=a(t)).sphere=function(){t.polygonStart();var n,e=i.angle(89.99)().coordinates[0],r=e.length-1,a=-1;for(t.lineStart();++a<r;)t.point((n=e[a])[0],n[1]);for(t.lineEnd(),r=(e=i.angle(90.01)().coordinates[0]).length-1,t.lineStart();--a>=0;)t.point((n=e[a])[0],n[1]);t.lineEnd(),t.polygonEnd()},t},e}).raw=nt;var dn=d3.geo.azimuthalEqualArea.raw;at.invert=function(t,n){var e=2*a(n/2);return[t*Math.cos(e/2)/Math.cos(e),e]},(d3.geo.hammer=function(){var t=2,n=tn(rt),e=n(t);return e.coefficient=function(e){return arguments.length?n(t=+e):t},e}).raw=rt,it.invert=function(t,n){var e=Math.abs(e=n*(0>n?.5179951515653813:.5686373742600607))>1-Vt?e>0?Zt:-Zt:a(e);return[1.1764705882352942*t/Math.cos(e),Math.abs(e=((e+=e)+Math.sin(e))*(0>n?.4102345310814193:.3736990601468637))>1-Vt?e>0?Zt:-Zt:a(e)]},(d3.geo.hatano=function(){return Kt(it)}).raw=it;var gn=41+48/36+37/3600;(d3.geo.healpix=function(){function t(){var t=180/n;return{type:"Polygon",coordinates:[d3.range(-180,180+t/2,t).map(function(t,n){return[t,1&n?90-1e-6:gn]}).concat(d3.range(180,-180-t/2,-t).map(function(t,n){return[t,1&n?1e-6-90:-gn]}))]}}var n=2,e=tn(ot),r=e(n),a=r.stream;return r.lobes=function(t){return arguments.length?e(n=+t):n},r.stream=function(n){var e=r.rotate(),i=a(n),o=(r.rotate([0,0]),a(n));return r.rotate(e),i.sphere=function(){d3.geo.stream(t(),o)},i},r}).raw=ot,(d3.geo.hill=function(){var t=1,n=tn(ut),e=n(t);return e.ratio=function(e){return arguments.length?n(t=+e):t},e}).raw=ut;var vn=.7109889596207567,Mn=.0528035274542;st.invert=function(t,n){return n>-vn?an.invert(t,n-Mn):x.invert(t,n)},(d3.geo.sinuMollweide=function(){return Kt(st).rotate([-20,-55])}).raw=st,lt.invert=function(t,n){return Math.abs(n)>vn?an.invert(t,n+(n>0?Mn:-Mn)):x.invert(t,n)},(d3.geo.homolosine=function(){return Kt(lt)}).raw=lt,ct.invert=function(t,n){return[2/3*Gt*t/Math.sqrt(Gt*Gt/3-n*n),n]},(d3.geo.kavrayskiy7=function(){return Kt(ct)}).raw=ct,(d3.geo.lagrange=function(){var t=.5,n=tn(ht),e=n(t);return e.spacing=function(e){return arguments.length?n(t=+e):t},e}).raw=ht,ft.invert=function(t,n){var e=Math.abs(t),r=Math.abs(n),a=Gt/Math.SQRT2,u=Vt,s=Zt;a>r?s*=r/a:u+=6*i(a/r);for(var l=0;25>l;l++){var c=Math.sin(s),h=o(Math.cos(s)),f=Math.sin(s/2),p=Math.cos(s/2),d=Math.sin(u/6),g=Math.cos(u/6),v=.5*u*(1+h)-e,M=s/(p*g)-r,m=h?-.25*u*c/h:0,y=.5*(1+h),b=(1+.5*s*f/p)/(p*g),x=s/p*(d/6)/(g*g),w=m*x-b*y,k=(v*x-M*y)/w,S=(M*m-v*b)/w;if(s-=k,u-=S,Math.abs(k)<Vt&&Math.abs(S)<Vt)break}return[0>t?-u:u,0>n?-s:s]},(d3.geo.larrivee=function(){return Kt(ft)}).raw=ft,pt.invert=function(t,n){var e=r(t)*Gt,a=n/2,i=50;do{var o=e*e,u=a*a,s=e*a,l=e*(.975534+u*(-.0143059*o-.119161+-.0547009*u))-t,c=a*(1.00384+o*(.0802894+-.02855*u+199025e-9*o)+u*(.0998909+-.0491032*u))-n,h=.975534-u*(.119161+.0429177*o+.0547009*u),f=-s*(.238322+.2188036*u+.0286118*o),p=s*(.1605788+7961e-7*o+-.0571*u),d=1.00384+o*(.0802894+199025e-9*o)+u*(3*(.0998909-.02855*o)-.245516*u),g=f*p-d*h,v=(c*f-l*d)/g,M=(l*p-c*h)/g;e-=v,a-=M}while((Math.abs(v)>Vt||Math.abs(M)>Vt)&&--i>0);return i&&[e,a]},(d3.geo.laskowski=function(){return Kt(pt)}).raw=pt,dt.invert=function(t,n){var e=t*t,o=n*n,u=o+1,s=t?Math.SQRT1_2*Math.sqrt((u-Math.sqrt(e*e+2*e*(o-1)+u*u))/e+1):1/Math.sqrt(u);return[a(t*s),r(n)*i(s)]},(d3.geo.littrow=function(){return Kt(dt)}).raw=dt,(d3.geo.loximuthal=function(){return b(gt).parallel(40)}).raw=gt,vt.invert=function(t,n){return[t,2.5*Math.atan(Math.exp(.8*n))-.625*Gt]},(d3.geo.miller=function(){return Kt(vt)}).raw=vt;var mn={alaska:[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gs48:[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],gs50:[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],miller:[[.9245,0],[0,0],[.01943,0]],lee:[[.721316,0],[0,0],[-.00881625,-.00617325]]};(d3.geo.modifiedStereographic=function(){var t=mn.miller,n=tn(Mt),e=n(t);return e.coefficients=function(e){return arguments.length?n(t="string"==typeof e?mn[e]:e):t},e}).raw=Mt,mt.invert=function(t,n){var e=Math.sqrt(6),r=Math.sqrt(7),i=3*a(n*r/9);return[t*r/(e*(2*Math.cos(2*i/3)-1)),a(3*Math.sin(i)*e/7)]},(d3.geo.mtFlatPolarParabolic=function(){return Kt(mt)}).raw=mt,yt.invert=function(t,n){var e=n*Math.sqrt(2+Math.SQRT2)/(2*Math.sqrt(3)),r=2*a(e);return[3*Math.SQRT2*t/(1+2*Math.cos(r)/Math.cos(r/2)),a((e+Math.sin(r))/(1+Math.SQRT1_2))]},(d3.geo.mtFlatPolarQuartic=function(){return Kt(yt)}).raw=yt,bt.invert=function(t,n){var e=Math.sqrt(6/(4+Gt)),r=n/e;return Math.abs(Math.abs(r)-Zt)<Vt&&(r=0>r?-Zt:Zt),[1.5*t/(e*(.5+Math.cos(r))),a((r/2+Math.sin(r))/(1+Gt/4))]},(d3.geo.mtFlatPolarSinusoidal=function(){return Kt(bt)}).raw=bt,xt.invert=function(t,n){var e,r=n,a=25;do{var i=r*r,o=i*i;r-=e=(r*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-n)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while(Math.abs(e)>Vt&&--a>0);return[t/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},(d3.geo.naturalEarth=function(){return Kt(xt)}).raw=xt,wt.invert=function(t,n){for(var e=n/2,r=0,a=1/0;10>r&&Math.abs(a)>Vt;r++){var i=Math.cos(n/2);n-=a=(n-Math.tan(n/2)-e)/(1-.5/(i*i))}return[2*t/(1+Math.cos(n)),n]},(d3.geo.nellHammer=function(){return Kt(wt)}).raw=wt;var yn=1.0148,bn=.23185,xn=-.14499,wn=.02406,kn=yn,Sn=5*bn,_n=7*xn,qn=9*wn,zn=1.790857183;kt.invert=function(t,n){n>zn?n=zn:-zn>n&&(n=-zn);var e,r=n;do{var a=r*r;r-=e=(r*(yn+a*a*(bn+a*(xn+wn*a)))-n)/(kn+a*a*(Sn+a*(_n+qn*a)))}while(Math.abs(e)>Vt);return[t,r]},(d3.geo.patterson=function(){return Kt(kt)}).raw=kt;var En=G(tt);(d3.geo.peirceQuincuncial=function(){return En().quincuncial(!0).rotate([-90,-90,45]).clipAngle(180-1e-6)}).raw=En.raw,St.invert=function(t,n){if(Math.abs(n)<Vt)return[t,0];var e,o=t*t+n*n,u=.5*n,s=10;do{var l=Math.tan(u),c=1/Math.cos(u),h=o-2*n*u+u*u;u-=e=(l*h+2*(u-n))/(2+h*c*c+2*(u-n)*l)}while(Math.abs(e)>Vt&&--s>0);return l=Math.tan(u),[(Math.abs(n)<Math.abs(u+1/l)?a(t*l):r(t)*(i(Math.abs(t*l))+Zt))/Math.sin(u),u]},(d3.geo.polyconic=function(){return Kt(St)}).raw=St,(d3.geo.rectangularPolyconic=function(){return b(_t)}).raw=_t;var An=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];An.forEach(function(t){t[1]*=1.0144}),qt.invert=function(t,n){var e=n/Zt,r=90*e,a=Math.min(18,Math.abs(r/5)),i=Math.max(0,Math.floor(a));do{var o=An[i][1],u=An[i+1][1],s=An[Math.min(19,i+2)][1],l=s-o,c=s-2*u+o,h=2*(Math.abs(e)-u)/l,f=c/l,p=h*(1-f*h*(1-2*f*h));if(p>=0||1===i){r=(n>=0?5:-5)*(p+a);var d,g=50;do{p=(a=Math.min(18,Math.abs(r)/5))-(i=Math.floor(a)),o=An[i][1],u=An[i+1][1],s=An[Math.min(19,i+2)][1],r-=(d=(n>=0?Zt:-Zt)*(u+p*(s-o)/2+p*p*(s-2*u+o)/2)-n)*Jt}while(Math.abs(d)>Wt&&--g>0);break}}while(--i>=0);var v=An[i][0],M=An[i+1][0],m=An[Math.min(19,i+2)][0];return[t/(M+p*(m-v)/2+p*p*(m-2*M+v)/2),r*Xt]},(d3.geo.robinson=function(){return Kt(qt)}).raw=qt,(d3.geo.satellite=function(){var t=1.4,n=0,e=tn(zt),r=e(t,n);return r.distance=function(r){return arguments.length?e(t=+r,n):t},r.tilt=function(r){return arguments.length?e(t,n=r*Gt/180):180*n/Gt},r}).raw=zt,Et.invert=function(t,n){var e=n/1.70711,r=Math.sin(Gt/4*e);return[t/(.74482-.34588*r*r),2*Math.atan(e)]},(d3.geo.times=function(){return Kt(Et)}).raw=Et,(d3.geo.twoPointEquidistant=function(){var t=[[0,0],[0,0]],n=tn(At),e=n(0),r=e.rotate;return delete e.rotate,e.points=function(e){if(!arguments.length)return t;t=e;var i=d3.geo.interpolate(e[0],e[1]),o=i(.5),u=d3.geo.rotation([-o[0],-o[1]])(e[0]),s=.5*i.distance,l=-a(Math.sin(u[1]*Xt)/Math.sin(s));return u[0]>0&&(l=Gt-l),r.call(u,[-o[0],-o[1],-l*Jt]),n(2*s)},e}).raw=At,(d3.geo.twoPointAzimuthal=function(){var t=[[0,0],[0,0]],n=tn(Nt),e=n(0),r=e.rotate;return delete e.rotate,e.points=function(e){if(!arguments.length)return t;t=e;var i=d3.geo.interpolate(e[0],e[1]),o=i(.5),u=d3.geo.rotation([-o[0],-o[1]])(e[0]),s=.5*i.distance,l=-a(Math.sin(u[1]*Xt)/Math.sin(s));return u[0]>0&&(l=Gt-l),r.call(u,[-o[0],-o[1],-l*Jt]),n(s)},e}).raw=Nt,Tt.invert=function(t,n){if(Math.abs(n)<Vt)return[t,0];if(Math.abs(t)<Vt)return[0,Zt*Math.sin(2*Math.atan(n/Gt))];var e=(t/=Gt)*t,a=(n/=Gt)*n,o=e+a,u=o*o,s=-Math.abs(n)*(1+o),l=s-2*a+e,c=-2*s+1+2*a+u,h=a/c+(2*l*l*l/(c*c*c)-9*s*l/(c*c))/27,f=(s-l*l/(3*c))/c,p=2*Math.sqrt(-f/3),d=i(3*h/(f*p))/3;return[Gt*(o-1+Math.sqrt(1+2*(e-a)+u))/(2*t),r(n)*Gt*(-p*Math.cos(d+Gt/3)-l/(3*c))]},(d3.geo.vanDerGrinten=function(){return Kt(Tt)}).raw=Tt,Pt.invert=function(t,n){if(!t)return[0,Zt*Math.sin(2*Math.atan(n/Gt))];var e=Math.abs(t/Gt),a=(1-e*e-(n/=Gt)*n)/(2*e),i=a*a,o=Math.sqrt(i+1);return[r(t)*Gt*(o-a),r(n)*Zt*Math.sin(2*Math.atan2(Math.sqrt((1-2*a*e)*(a+o)-e),Math.sqrt(o+a+e)))]},(d3.geo.vanDerGrinten2=function(){return Kt(Pt)}).raw=Pt,Ct.invert=function(t,n){if(!n)return[t,0];var e=n/Gt,a=(Gt*Gt*(1-e*e)-t*t)/(2*Gt*t);return[t?Gt*(r(t)*Math.sqrt(a*a+1)-a):0,Zt*Math.sin(2*Math.atan(e))]},(d3.geo.vanDerGrinten3=function(){return Kt(Ct)}).raw=Ct,jt.invert=function(t,n){if(!t||!n)return[t,n];n/=Gt;var e=r(t)*t/Zt,a=(e*e-1+4*n*n)/Math.abs(e),i=a*a,o=2*n,u=50;do{var s=o*o,l=(8*o-s*(s+2)-5)/(2*s*(o-1)),c=(3*o-s*o-10)/(2*s*o),h=l*l,f=o*l,p=o+l,d=p*p,g=o+3*l,v=d*(s+h*i-1)+(1-s)*(s*(g*g+4*h)+h*(12*f+4*h)),M=-2*p*(4*f*h+(1-4*s+3*s*s)*(1+c)+h*(14*s-6-i+(8*s-8-2*i)*c)+f*(12*s-8+(10*s-10-i)*c)),m=Math.sqrt(v);o-==(a*(d+h-1)+2*m-e*(4*d+i))/(a*(2*l*c+2*p*(1+c))+M/m-8*p*(a*(-1+h+d)+2*m)*(1+c)/(i+4*d))}while(>Vt&&--u>0);return[r(t)*(Math.sqrt(a*a+4)+a)*Gt/4,Zt*o]},(d3.geo.vanDerGrinten4=function(){return Kt(jt)}).raw=jt;var Nn=function(){var t=4*Gt+3*Math.sqrt(3),n=2*Math.sqrt(2*Gt*Math.sqrt(3)/t);return m(n*Math.sqrt(3)/Gt,n,t/6)}();(d3.geo.wagner4=function(){return Kt(Nn)}).raw=Nn,It.invert=function(t,n){return[t/Math.sqrt(1-3*n*n/(Gt*Gt)),n]},(d3.geo.wagner6=function(){return Kt(It)}).raw=It,Lt.invert=function(t,n){var e=t/2.66723,r=n/1.24104,i=Math.sqrt(e*e+r*r),o=2*a(i/2);return[3*Math.atan2(t*Math.tan(o),2.66723*i),i&&a(n*Math.sin(o)/(1.24104*.90631*i))]},(d3.geo.wagner7=function(){return Kt(Lt)}).raw=Lt,Dt.invert=function(t,n){var e=-.5*(t*t+n*n),r=Math.sqrt(-e*(2+e)),i=n*e+t*r,o=t*e-n*r,u=Math.sqrt(o*o+i*i);return[Math.atan2(r*i,u*(1+e)),u?-a(r*o/u):0]},(d3.geo.wiechel=function(){return Kt(Dt)}).raw=Dt,Rt.invert=function(t,n){var e=t,r=n,a=25;do{var o,u=Math.cos(r),s=Math.sin(r),l=Math.sin(2*r),c=s*s,h=u*u,f=Math.sin(e),p=Math.cos(e/2),d=Math.sin(e/2),g=d*d,v=1-h*p*p,M=v?i(u*p)*Math.sqrt(o=1/v):o=0,m=.5*(2*M*u*d+e/Zt)-t,y=.5*(M*s+r)-n,b=.5*o*(h*g+M*u*p*c)+.5/Zt,x=o*(f*l/4-M*s*d),w=.125*o*(l*d-M*s*h*f),k=.5*o*(c*p+M*g*u)+.5,S=x*w-k*b,_=(y*x-m*k)/S,q=(m*w-y*b)/S;e-=_,r-=q}while((Math.abs(_)>Vt||Math.abs(q)>Vt)&&--a>0);return[e,r]},(d3.geo.winkel3=function(){return Kt(Rt)}).raw=Rt}()}},[["EnYI","runtime"]]]);